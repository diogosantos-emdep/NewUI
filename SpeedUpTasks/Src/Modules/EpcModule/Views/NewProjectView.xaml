<dxwui:WinUIDialogWindow 
                            x:Class="Emdep.Geos.Modules.Epc.Views.NewProjectView"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
                            xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                            xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                            xmlns:viewModel="clr-namespace:Emdep.Geos.Modules.Epc.ViewModels"
                            xmlns:UIValidation="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                            xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                            xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                            mc:Ignorable="d" 
                            d:DesignHeight="500" d:DesignWidth="800">
 
<dxwui:WinUIDialogWindow.InputBindings>
    <KeyBinding Key="Escape" Command="{Binding NewProjectCancelButtonCommand}"/>
</dxwui:WinUIDialogWindow.InputBindings>
    <dxwui:WinUIDialogWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Emdep.Geos.Modules.Epc;component/Resources/EpcCommonResource.xaml" />
            </ResourceDictionary.MergedDictionaries>
          
        </ResourceDictionary>
    </dxwui:WinUIDialogWindow.Resources>
    
    <Grid DataContext="{Binding ProjectData}">
        <Grid.Resources>
            <DataTemplate x:Key="headerTemplate">
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding}" FontWeight="Bold" TextDecorations="Underline"/></StackPanel>
            </DataTemplate>          
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="30"></RowDefinition>
            <RowDefinition Height="40"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="40"/>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Row="0"  Grid.ColumnSpan="2" Orientation="Vertical">
            <Label Grid.Row="0" 
               Grid.ColumnSpan="2"
               Content="New Project"
               FontSize="28" 
               FontWeight="Bold"
               HorizontalAlignment="Left"
               VerticalAlignment="Top"
               FontFamily="Calibri" Margin="0,-10,0,0" >
            </Label>
        </StackPanel>    
        <Label  Content="Name" 
                Grid.Column="0" 
                Grid.Row="1" >
        </Label>
        <dxe:TextEdit HorizontalAlignment="Left" 
                      Width="200" 
                      Grid.Row="1" Grid.Column="1" Margin="0,3"
                      NullText="Enter Project Name">
            <dxe:TextEdit.EditValue>
                <Binding Path="ProjectName" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" >
                    <Binding.ValidationRules>
                        <UIValidation:CustomRequiredFieldValidation  ValidationMessage="Please Fill the Value." ValidationStep="UpdatedValue"   />
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>
        
        <Label  Content="Team" 
                Grid.Column="3" 
                Grid.Row="5" >
        </Label>
        <StackPanel Grid.Row="5"
                    HorizontalAlignment="left"
                    Orientation="Vertical"
                    Margin="0,4,24,0"
                    Width="200"
                    Grid.Column="4">
            <dxe:ComboBoxEdit x:Name="cmbTeam" ItemsSource="{Binding DataContext.GroupTeam,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxwui:WinUIDialogWindow}}"
                              AllowCollectionView="True" DisplayMember="ParentChildName"  
                              EditValue="{Binding DataContext.SelectedTeam,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=dxwui:WinUIDialogWindow}}" 
                              >
                <dxe:ComboBoxEdit.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" FontWeight="Bold" TextDecorations="Underline"/>
                    </DataTemplate>
                </dxe:ComboBoxEdit.ItemTemplate>
                <dxe:ComboBoxEdit.GroupStyle>
                    <GroupStyle HidesIfEmpty="True">
                        <GroupStyle.ContainerStyle>
                            <Style TargetType="{x:Type GroupItem}">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate>
                                            <Expander Header="{Binding Path=Name}" HeaderTemplate="{StaticResource  headerTemplate}" IsExpanded="True"
                                                  HorizontalContentAlignment="Stretch" Margin="3,3,3,0">
                                                <ItemsPresenter />
                                            </Expander>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </GroupStyle.ContainerStyle>
                    </GroupStyle>
                </dxe:ComboBoxEdit.GroupStyle>
                <dxe:ComboBoxEdit.StyleSettings>
                    <dxe:CheckedComboBoxStyleSettings/>
                </dxe:ComboBoxEdit.StyleSettings>
                
                <!--<dxmvvm:Interaction.Behaviors>
                <dxmvvm:EventToCommand EventName="EditValueChanging"
										PassEventArgsToCommand="True" 
										Command="{Binding SelectedTeamIndexCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow},Mode=FindAncestor}}" 
                                       CommandParameter="{Binding ElementName=cmbUser, Path=EditValue}"/>
            </dxmvvm:Interaction.Behaviors>-->               
            
                <i:Interaction.Triggers>
                    <i:EventTrigger  EventName="EditValueChanging" >
                        <behaviors:InvokeDelegateCommandAction Command="{Binding DataContext.SelectedTeamIndexCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow},Mode=FindAncestor}}" 
                                                               CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=InvokeParameter}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </dxe:ComboBoxEdit>
        </StackPanel>
        <Label Content="Description"
               Grid.Column="3" Grid.Row="1">
        </Label>
        <dxe:TextEdit  Width="300"
                       Height="110"                                       
                       HorizontalAlignment="Left"
                       VerticalScrollBarVisibility="Visible"
                       VerticalContentAlignment="Top"
                       HorizontalContentAlignment="Left"
                       AcceptsReturn="True"
                       Grid.Row="1"
                       Grid.Column="4"
                       Grid.RowSpan="4"  
                       VerticalAlignment="Top"
                       Margin="0,3" ValidateOnTextInput="False" NullText="Enter Description" >
            <dxe:TextEdit.EditValue>
                <Binding Path="Description" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <UIValidation:CustomRequiredFieldValidation ValidationMessage="Please Fill the value." ValidationStep="UpdatedValue"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <Label  Content="Owner" 
                Grid.Column="3" 
                Grid.Row="6" >
        </Label>
        <StackPanel Grid.Row="6" Grid.Column="4">
            <dxe:ComboBoxEdit  HorizontalAlignment="Left"
                           Width="200" 
                           IsTextEditable="True" 
                           ItemsSource="{Binding DataContext.ProjectOwnerList,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxwui:WinUIDialogWindow }}"
                           EditValue="{Binding IdOwner,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                           DisplayMember="FullName"
                           ValueMember="IdUser"
                           Grid.Row="2" Grid.Column="3"   Margin="0,3" ValidateOnTextInput="False" ValidateOnEnterKeyPressed="True">
            </dxe:ComboBoxEdit>
        </StackPanel>
        
        <Label Content= "Customer"
               Grid.Column="0" 
               Grid.Row="2" 
               Width="120"
               HorizontalAlignment="Left" >
        </Label>
        <dxe:ComboBoxEdit  HorizontalAlignment="Left"
                           Width="200" 
                           IsTextEditable="False" 
                           ItemsSource="{Binding DataContext.ProjectCustomerList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxwui:WinUIDialogWindow}}"                         
                           DisplayMember="CustomerName"
                           ValueMember="IdCustomer"
                           Grid.Row="2" Grid.Column="1" Margin="0,3"
                           NullText="Please Select Customer"
                           EditValue="{Binding IdCustomer, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <!--<dxe:ComboBoxEdit.EditValue>
                <Binding Path="IdCustomer" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                    <Binding.ValidationRules>
                        <UIHelper:CustomRequiredFieldValidation  ValidationMessage="Please select a customer from list" ValidationStep="UpdatedValue"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.EditValue>-->
        </dxe:ComboBoxEdit>
        
        <Label  Content="Status" 
                Grid.Column="0" 
                Grid.Row="4" >
        </Label>
        <StackPanel Grid.Row="4" Grid.Column="1">
            <dxe:ComboBoxEdit   
                           ImmediatePopup="True" HorizontalAlignment="Left"
                           Width="200"  IsSynchronizedWithCurrentItem="True"  
                           Grid.Row="3" Grid.Column="4" Margin="0,3"
                           ApplyItemTemplateToSelectedItem="True" 
                           IsTextEditable="False" 
                           ItemsSource="{Binding DataContext.ProjectStatusList,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxwui:WinUIDialogWindow}}"            
                           EditValue="{Binding IdProjectStatus,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"          
                           DisplayMember="Value"
                           ValueMember="IdLookupValue" ValidateOnTextInput="False" ValidateOnEnterKeyPressed="True">
                <dxe:ComboBoxEdit.ItemTemplate>
                    <DataTemplate>
                        <DockPanel >
                            <!--<Rectangle Width="20" Height="20" Margin="0,0,4,0" Fill="{Binding HtmlColor}"/>-->
                            <TextBlock Text="{Binding Value}" Margin="5,0,0,0" Padding="3"/>
                        </DockPanel>
                    </DataTemplate>
                </dxe:ComboBoxEdit.ItemTemplate>
            </dxe:ComboBoxEdit>
        </StackPanel>
        
        <Label Content= "Category"
               Grid.Column="0" 
               Grid.Row="3" 
               Width="120"
               HorizontalAlignment="Left" >
        </Label>
        <StackPanel Grid.Row="3" Grid.Column="1">
            <dxe:ComboBoxEdit  HorizontalAlignment="Left"
                           Width="200" 
                           ApplyItemTemplateToSelectedItem="True" 
                           IsTextEditable="False" 
                           ItemsSource="{Binding DataContext.ProjectCategoryList,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxwui:WinUIDialogWindow}}"                           
                           DisplayMember="Value"
                           EditValue="{Binding IdCategory,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                           IsSynchronizedWithCurrentItem="True"
                           ValueMember="IdLookupValue"
                           Grid.Row="5" Grid.Column="1" Margin="0,3"
                           ValidateOnTextInput="False" ValidateOnEnterKeyPressed="True">
                <dxe:ComboBoxEdit.ItemTemplate>
                    <DataTemplate>
                        <DockPanel >
                            <Rectangle Width="15" Height="15" Margin="3" Fill="{Binding HtmlColor}"/>
                            <TextBlock Text="{Binding Value}" Margin="5,0,0,0" Padding="3" />
                        </DockPanel>
                    </DataTemplate>
                </dxe:ComboBoxEdit.ItemTemplate>
            </dxe:ComboBoxEdit>
        </StackPanel>
        
        <Label Content= "Priority"
               Grid.Column="0" 
               Grid.Row="5" 
               Width="120"
               HorizontalAlignment="Left" >
        </Label>
        <dxe:ComboBoxEdit  HorizontalAlignment="Left"
                           Width="200" 
                           IsTextEditable="False" 
                           ItemsSource="{Binding DataContext.ProjectPriorityList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxwui:WinUIDialogWindow}}"
                           Style="{StaticResource ProjectPriorityComboBoxEditStyle}"
                           DisplayMember="Value"
                           EditValue="{Binding IdProjectPriority,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                           IsSynchronizedWithCurrentItem="True"
                           ValueMember="IdLookupValue"
                           Grid.Row="5" Grid.Column="1" Margin="0,3"
                           NullText="Select Priority">
        </dxe:ComboBoxEdit>
        <Label Content= "Type"
               Grid.Column="0" 
               Grid.Row="6" 
               Width="120"
               HorizontalAlignment="Left" >
        </Label>
        <dxe:ComboBoxEdit  HorizontalAlignment="Left"
                           Width="200" 
                           IsTextEditable="False" 
                           ItemsSource="{Binding DataContext.ProjectTypeList, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxwui:WinUIDialogWindow}}"
                           DisplayMember="Value"
                           EditValue="{Binding IdProjectType,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                           IsSynchronizedWithCurrentItem="True"
                           ValueMember="IdLookupValue"
                           Grid.Row="6" Grid.Column="1" Margin="0,3"
                           NullText="Select Project Type">
        </dxe:ComboBoxEdit>
        <Label  Content="Start Date" 
                Grid.Column="0" 
                Grid.Row="7" >
        </Label>
        <dxe:DateEdit  HorizontalAlignment="Left"
                       Width="200" 
                       Grid.Row="7" Grid.Column="1" Margin="0,3" NullText="Select a Date" ValidateOnTextInput="False" ValidateOnEnterKeyPressed="True"
                       EditValue="{Binding StartDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        
        <Label  Content="Due Date" 
                Grid.Column="3" 
                Grid.Row="7" >
        </Label>
        <dxe:DateEdit  HorizontalAlignment="Left"
                       Width="200" 
                       Grid.Row="7" Grid.Column="4" Margin="0,3" NullText="Select a Date" ValidateOnTextInput="False" ValidateOnEnterKeyPressed="True"
                       EditValue="{Binding DueDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <!--<dxe:DateEdit.EditValue>
                <Binding Path="DueDate" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"  >
                    <Binding.ValidationRules>
                        <UIHelper:CustomRequiredFieldValidation ValidationMessage="Please Fill The Valid Date." ValidationStep="UpdatedValue"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:DateEdit.EditValue>-->
        </dxe:DateEdit>

        <StackPanel Grid.Row="8"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal"
                    Margin="100,0,0,0"
                    Width="250"
                    Grid.Column="1"
                    Grid.ColumnSpan="3">
            <Button Content="Accept"
                    Command="{Binding DataContext.NewProjectAcceptButtonCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                    Height="30"
                    Width="100"
                    Margin="0,0,30,0"
                    FontFamily="Calibri"
                    VerticalAlignment="Bottom" />
            <Button Content="Cancel"
                    Command="{Binding DataContext.NewProjectCancelButtonCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type dxwui:WinUIDialogWindow}}}" 
                    Height="30"
                    Width="100"
                    Margin="0,0,30,0"
                    FontFamily="Calibri"
                    VerticalAlignment="Bottom"  />
        </StackPanel>
    </Grid>
</dxwui:WinUIDialogWindow>
