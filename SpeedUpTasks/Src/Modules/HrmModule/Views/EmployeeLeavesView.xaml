<UserControl x:Class="Emdep.Geos.Modules.Hrm.Views.EmployeeLeaves"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Emdep.Geos.Modules.Hrm.Views"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
             xmlns:Converters="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
             xmlns:dxsch="http://schemas.devexpress.com/winfx/2008/xaml/scheduling"
             xmlns:dxscht="http://schemas.devexpress.com/winfx/2008/xaml/scheduling/themekeys"
             xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys"
             xmlns:dxschcore="http://schemas.devexpress.com/winfx/2008/xaml/scheduling/core"
             xmlns:dxschc="http://schemas.devexpress.com/winfx/2008/xaml/scheduling/common"
             xmlns:dxschv="http://schemas.devexpress.com/winfx/2008/xaml/scheduling/visual"
             xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
             xmlns:dxa="http://schemas.devexpress.com/winfx/2008/xaml/accordion" 
             xmlns:dxschd="clr-namespace:DevExpress.Xpf.Scheduler.Drawing;assembly=DevExpress.Xpf.Scheduler.v19.2"
             xmlns:HrmApplication="clr-namespace:Emdep.Geos.Modules.Hrm"
             xmlns:ViewModel="clr-namespace:Emdep.Geos.Modules.Hrm.ViewModels"
             xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
             xmlns:UIConverter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters" 
             xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing" 
             xmlns:dxschp="clr-namespace:DevExpress.Xpf.Scheduling.Panels;assembly=DevExpress.Xpf.Scheduling.v19.2" 
             xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:dxei="http://schemas.devexpress.com/winfx/2008/xaml/editors/internal"
             xmlns:dxi="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.Resources>

        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Emdep.Geos.Modules.Hrm;component/Resources/SchedulerWeekViewResources.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <UIConverter:SchedulingAppointmentForegroundColorConverter x:Key="appointmentForegroundColorConverter" />


            <DataTemplate x:Key="appointmentFlyoutContentTemplate">
                <dxlc:LayoutControl Width="250" MinHeight="100" IsHitTestVisible="False" Orientation="Vertical" Padding="11">
                    <StackPanel Orientation="Vertical">
                        <dxschv:DayAppointmentControl MinHeight="10"
                        Panel.ZIndex="0"
                        VerticalAlignment="Top"
                        Content="{Binding}"
                        ShowRecurrenceImage="False"
                        ShowReminderImage="False"
                        ShowInterval="False"
                        ShowStatus="False"
                        Style="{DynamicResource {dxscht:SchedulerFlyoutThemeKey ResourceKey=Appointment}}" 
                        Foreground="{Binding Label, Converter={StaticResource appointmentForegroundColorConverter}}" />
                    </StackPanel>
                    <dxlc:LayoutControl Margin="0,0,0,0" VerticalAlignment="Top" Orientation="Vertical" Padding="0">
                        <dxlc:LayoutItem Style="{DynamicResource {dxscht:SchedulerFlyoutThemeKey ResourceKey=LayoutItem_Start}}">
                            <dxlc:LayoutItem.Content>
                                <TextBlock Text="{Binding Appointment.Start, StringFormat=g,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" />
                            </dxlc:LayoutItem.Content>
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Style="{DynamicResource {dxscht:SchedulerFlyoutThemeKey ResourceKey=LayoutItem_End}}">
                            <dxlc:LayoutItem.Content>
                                <TextBlock Text="{Binding Appointment.End, StringFormat=g,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" />
                            </dxlc:LayoutItem.Content>
                        </dxlc:LayoutItem>
                    </dxlc:LayoutControl>
                </dxlc:LayoutControl>
            </DataTemplate>

            <DataTemplate x:Key="cellTemplate">
                <DockPanel VerticalAlignment="Top" LastChildFill="False">
                    <DockPanel.Style>
                        <Style>
                            <Setter Property="DockPanel.Background" Value="Transparent" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="true">
                                    <Setter Property="DockPanel.Background">
                                        <Setter.Value>
                                            <MultiBinding Converter="{Converters:AppointmentHeaderBackgroundColorConverter}">
                                                <Binding Path="TotalDuration" ElementName="durationProvider" />
                                                <Binding Path="DailyWorkHours" ElementName="durationProvider" />
                                                <Binding Path="DataContext.OKColor" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}" />
                                                <Binding Path="DataContext.NotOKColor" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}" />
                                            </MultiBinding>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="false">
                                    <Setter Property="DockPanel.Background" Value="Transparent" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <dxmvvm:Interaction.Behaviors>
                        <UIHelper:AppointmentDurationProvider x:Name="durationProvider" />
                    </dxmvvm:Interaction.Behaviors>

                    <dxschv:MonthCellDatePresenter DockPanel.Dock="Left"
                    Margin="3,3,3,3" FontSize="14" Foreground="{DynamicResource AppointmentHeaderForeground}">
                    </dxschv:MonthCellDatePresenter>

                    <dxschv:FastTextBlock Foreground="{DynamicResource AppointmentHeaderForeground}"
                    Text="{Binding Path=TotalDurationString, ElementName=durationProvider}"
                    DockPanel.Dock="Right"
                    Margin="3,3,3,3" FontSize="14">
                        <dxschv:FastTextBlock.Style>
                            <Style>
                                <Setter Property="dxschv:FastTextBlock.Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="true">
                                        <Setter Property="dxschv:FastTextBlock.Visibility" Value="Visible"></Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="false">
                                        <Setter Property="dxschv:FastTextBlock.Visibility" Value="Collapsed"></Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </dxschv:FastTextBlock.Style>
                    </dxschv:FastTextBlock>

                </DockPanel>

            </DataTemplate>

            <!--[Sprint-65][20/06/2019][skale]-Add a new filter criterion to Leaves and Attendance Window in GHRM-->
            <dx:BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
            <ControlTemplate x:Key="ItemTemplate" TargetType="{x:Type dxe:ListBoxEditItem}">
                <Border x:Name="rootBorder" BorderThickness="0,0,0,1" BorderBrush="{dxi:ThemeResource ThemeKey={dxgt:GridRowThemeKey ResourceKey=GridDataRowDelimiterBrush}}"
                     Background="{TemplateBinding Background}">
                    <Grid x:Name="Root">
                        <Rectangle x:Name="FocusVisual" Opacity="0" Stroke="#FF3C3C3C" StrokeDashArray="1 2" StrokeThickness="1" />
                        <Border x:Name="InactiveSelectedState" Background="#FFDDDDDD" Opacity="0" 
                        />
                        <Border x:Name="SelectedState" Background="#FF92C0E0" Opacity="0" 
                        />
                        <Border x:Name="HoverState" Background="#FFCDE6F7" Opacity="0" 
                        Visibility="{Binding Path=(dxe:BaseEdit.OwnerEdit).AllowItemHighlighting, Converter={StaticResource BoolToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}}" />
                        <Border x:Name="FocusedState" Background="#7F82B0D0" Opacity="0" 
                        />
                        <DockPanel HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" LastChildFill="True" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                            <dxei:ImagePresenter DockPanel.Dock="Left" Padding="{StaticResource {dxet:ComboBoxEditThemeKey ResourceKey=SelectedItemImagePadding}}" />
                            <dx:ContentContainer x:Name="content" Margin="{StaticResource {dxet:ComboBoxEditThemeKey ResourceKey=SelectedItemContentPadding}}">
                                <ContentPresenter x:Name="contentPresenter" Height="Auto" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Width="Auto" />
                            </dx:ContentContainer>
                        </DockPanel>
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <DataTrigger Value="True">
                        <DataTrigger.Binding>
                            <MultiBinding Converter="{Converters:ListItemBackgroundColorConverter}">
                                <Binding Path="(dxe:BaseEdit.OwnerEdit).ItemsSource" RelativeSource="{RelativeSource Self}" />
                                <Binding Path="." />
                            </MultiBinding>
                        </DataTrigger.Binding>

                        <Setter TargetName="rootBorder" Property="BorderThickness" Value="0" />
                    </DataTrigger>
                    <Trigger Property="IsKeyboardFocused" Value="True">
                        <Setter Property="Opacity" TargetName="SelectedState" Value="0" />
                        <Setter Property="Opacity" TargetName="HoverState" Value="0" />
                        <Setter Property="Opacity" TargetName="FocusVisual" Value="0" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Opacity" TargetName="SelectedState" Value="0" />
                        <Setter Property="Opacity" TargetName="HoverState" Value="0" />
                        <Setter Property="Opacity" TargetName="FocusVisual" Value="0" />
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Opacity" TargetName="SelectedState" Value="0" />
                        <Setter Property="Opacity" TargetName="HoverState" Value="0" />
                        <Setter Property="Opacity" TargetName="FocusVisual" Value="0" />
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="True" />
                            <Condition Property="IsFocused" Value="False" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Opacity" TargetName="SelectedState" Value="0" />
                        <Setter Property="Opacity" TargetName="HoverState" Value="0" />
                        <Setter Property="Opacity" TargetName="FocusVisual" Value="0" />
                    </MultiTrigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Opacity" TargetName="content" Value="0.35" />
                    </Trigger>
                    <Trigger Property="dx:ThemeManager.IsTouchEnabled" Value="True">
                        <Setter Property="Margin" TargetName="content" Value="12" />
                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>

            <Style x:Key="LeaveDepartmentNameStyle" TargetType="{x:Type dxe:ListBoxEditItem}">
                <Setter Property="Background" Value="{Binding DepartmentHtmlColor}" />
                <Setter Property="TextBlock.Foreground" Value="{Binding DepartmentHtmlColor,Converter={Converters:ForegroundColorConverter}}"></Setter>
                <Setter Property="Template" Value="{StaticResource ItemTemplate}"></Setter>
            </Style>
            <!--END-->


            <Style x:Key="aptStyle" TargetType="dxschv:AppointmentControl">
                <Setter Property="ShowStatus" Value="False" />
            </Style>

            <DataTemplate x:Key="aptTemplate">
                <dxschv:FastTextBlock Text="{Binding Appointment,Converter={UIConverter:AppointmentSubjectAndDurationConverter}}" Foreground="{Binding Label, Converter={StaticResource appointmentForegroundColorConverter}}" />
            </DataTemplate>

            <DataTemplate x:Key="DateHeaderTemplate">
                <DockPanel VerticalAlignment="Top" LastChildFill="True">
                    <DockPanel.Style>
                        <Style>
                            <Setter Property="DockPanel.Background" Value="Transparent" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="true">
                                    <Setter Property="DockPanel.Background">
                                        <Setter.Value>
                                            <MultiBinding Converter="{Converters:AppointmentHeaderBackgroundColorConverter}">
                                                <Binding Path="TotalDuration" ElementName="durationProvider" />
                                                <Binding Path="DailyWorkHours" ElementName="durationProvider" />
                                                <Binding Path="DataContext.OKColor" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}" />
                                                <Binding Path="DataContext.NotOKColor" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}" />
                                            </MultiBinding>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="false">
                                    <Setter Property="DockPanel.Background" Value="Transparent" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>

                    <dxmvvm:Interaction.Behaviors>
                        <UIHelper:AppointmentDurationProvider x:Name="durationProvider" />
                    </dxmvvm:Interaction.Behaviors>

                    <TextBlock Foreground="{DynamicResource AppointmentHeaderForeground}" Text="{Binding Interval.Start, StringFormat='{}{0, 1:dddd, dd}'}" HorizontalAlignment="Left" VerticalAlignment="Center" />
                    <dxschv:FastTextBlock Foreground="{DynamicResource AppointmentHeaderForeground}"
                    HorizontalAlignment="Right"
                    Text="{Binding Path=TotalDurationString, ElementName=durationProvider}"
                    Margin="3,3,3,3" FontSize="14">
                        <dxschv:FastTextBlock.Style>
                            <Style>
                                <Setter Property="dxschv:FastTextBlock.Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="true">
                                        <Setter Property="dxschv:FastTextBlock.Visibility" Value="Visible"></Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=Duration, ElementName=durationProvider}" Value="false">
                                        <Setter Property="dxschv:FastTextBlock.Visibility" Value="Collapsed"></Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </dxschv:FastTextBlock.Style>
                    </dxschv:FastTextBlock>
                </DockPanel>
            </DataTemplate>

            <ControlTemplate x:Key="{dxet:DateNavigatorThemeKey ResourceKey=LeftArrowTemplate}" TargetType="{x:Type RepeatButton}">
                <Grid Background="#00000000" Width="30" Height="30" SnapsToDevicePixels="True" d:Name="Grid_0003">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="Path" Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)" Duration="0" To="#FF373A3D" d:Name="ColorAnimation_0001" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="Path" Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)" Duration="0" To="#FF373A3D" d:Name="ColorAnimation_0002" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled" />
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Path x:Name="Path" Stretch="Fill" Fill="#FFB9B9B9" Data="F1 M 208.5,17C 212.09,17 215,19.91 215,23.4999C 215,27.0897 212.09,29.9999 208.5,29.9999C 204.91,29.9999 202,27.0897 202,23.4999C 202,19.91 204.91,17 208.5,17 Z M 208.5,18.0004C 205.462,18.0004 203,20.4628 203,23.5004C 203,26.5378 205.462,29.0002 208.5,29.0002C 211.537,29.0002 214,26.5378 214,23.5004C 214,20.4628 211.537,18.0004 208.5,18.0004 Z M 205,24.0001L 205,24L 205,23.0002L 205,22.9999L 208,19.9999L 210,19.9999L 207,22.9999L 212,23.0002L 212,24L 207,23.9999L 210,26.9999L 208,26.9999L 205,24.0001 Z " Width="25" Height="25" d:Name="Path_0001" />
                </Grid>
            </ControlTemplate>


            <Style x:Key="{dxet:DateNavigatorThemeKey ResourceKey=LeftArrowStyle}" TargetType="{x:Type RepeatButton}">
                <Setter Property="Template" Value="{DynamicResource {dxet:DateNavigatorThemeKey ResourceKey=LeftArrowTemplate}}" />
                <Setter Property="dx:FocusHelper2.Focusable" Value="False" />
                <Setter Property="Margin" Value="2,0,0,0" />
                <Setter Property="ClickMode" Value="Press" />
                <Setter Property="Delay" Value="400" />
                <Setter Property="Interval" Value="400" />
            </Style>


            <ControlTemplate x:Key="{dxet:DateNavigatorThemeKey ResourceKey=RightArrowTemplate}" TargetType="{x:Type RepeatButton}">
                <Grid Background="#00000000" Width="30" Height="30" SnapsToDevicePixels="True" d:Name="Grid_0004">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="Path" Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)" Duration="0" To="#FF373A3D" d:Name="ColorAnimation_0003" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="Path" Storyboard.TargetProperty="(Path.Fill).(SolidColorBrush.Color)" Duration="0" To="#FF373A3D" d:Name="ColorAnimation_0004" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled" />
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Path x:Name="Path" Stretch="Fill" Fill="#FFB9B9B9" Data="F1 M 232.5,17.0001C 228.91,17.0001 226,19.9102 226,23.5C 226,27.0898 228.91,30 232.5,30C 236.09,30 239,27.0898 239,23.5C 239,19.9102 236.09,17.0001 232.5,17.0001 Z M 232.5,18.0004C 235.538,18.0004 238,20.4628 238,23.5004C 238,26.538 235.538,29.0004 232.5,29.0004C 229.463,29.0004 227,26.538 227,23.5004C 227,20.4628 229.463,18.0004 232.5,18.0004 Z M 236,24.0001L 236,24.0001L 236,23.0004L 236,23L 233,20L 231,20L 234,23L 229,23.0004L 229,24.0001L 234,24L 231,26.9999L 233,26.9999L 236,24.0001 Z " Width="25" Height="25" d:Name="Path_0002" />
                </Grid>
            </ControlTemplate>

            <Style x:Key="{dxet:DateNavigatorThemeKey ResourceKey=RightArrowStyle}" TargetType="{x:Type RepeatButton}">
                <Setter Property="Template" Value="{DynamicResource {dxet:DateNavigatorThemeKey ResourceKey=RightArrowTemplate}}" />
                <Setter Property="dx:FocusHelper2.Focusable" Value="False" />
                <Setter Property="Margin" Value="0,0,2,0" />
                <Setter Property="ClickMode" Value="Press" />
                <Setter Property="Delay" Value="400" />
                <Setter Property="Interval" Value="400" />
            </Style>



            <Style x:Key="appointmentStyle" TargetType="dxschv:AppointmentControl">
                <Setter Property="ShowInterval" Value="False" />
                <Setter Property="ShowDescription" Value="True" />
                <Setter Property="ShowStatus" Value="False" />
            </Style>

            <!--Expand Button Style-->
            <Style x:Key="HideButtonStyle" TargetType="{x:Type ToggleButton}">
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                            <Border BorderThickness="0" Background="{TemplateBinding Background}">
                                <Grid>
                                    <Image Stretch="None" VerticalAlignment="Center" HorizontalAlignment="Center"
                                   Source="/Emdep.Geos.Modules.Warehouse;component/Assets/Images/ArrowRight.png"
                                   Visibility="{TemplateBinding IsChecked, Converter={dxmvvm:BooleanToVisibilityConverter Inverse=True}}" />
                                    <Image Stretch="None" VerticalAlignment="Center" HorizontalAlignment="Center"
                                   Source="/Emdep.Geos.Modules.Warehouse;component/Assets/Images/ArrowLeft.png"
                                   Visibility="{TemplateBinding IsChecked, Converter={dxmvvm:BooleanToVisibilityConverter}}" />
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>


            </Style>


            <DataTemplate x:Key="appointmentContentTemplate">
                <dxschv:AppointmentContentPanel>
                    <dxschv:AppointmentContentPanel.IntervalSubject>
                        <dxschv:AppointmentIntervalSubjectPresenter Foreground="{Binding Label, Converter={StaticResource appointmentForegroundColorConverter}}" />
                    </dxschv:AppointmentContentPanel.IntervalSubject>
                </dxschv:AppointmentContentPanel>
            </DataTemplate>

            <DataTemplate x:Key="departmentDataTemplate">
                <StackPanel>
                    <TextBlock Text="{Binding DepartmentName}" TextTrimming="CharacterEllipsis" />
                </StackPanel>
            </DataTemplate>
            <DataTemplate x:Key="employeeDataTemplate">
                <StackPanel>
                    <TextBlock TextTrimming="CharacterEllipsis">                          
                        <Run Text="{Binding FirstName}" />       
                        <Run Text="{Binding LastName}" />
                    </TextBlock>
                </StackPanel>
            </DataTemplate>
            <UIHelper:AccordianTemplateSelector x:Key="accordianTemplateSelector"
            EmployeeDataTemplate="{StaticResource employeeDataTemplate}"
            DepartmentDataTemplate="{StaticResource departmentDataTemplate}" />

        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="145*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <!--<ColumnDefinition Width="*"></ColumnDefinition>-->
        </Grid.ColumnDefinitions>

        <!--LeaveLable-->
        <!--<Label Content="{DynamicResource Leaves}" Grid.Row="0" Grid.Column="0"  Style="{StaticResource LabelTitleStyle}" HorizontalAlignment="Left" />-->

        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition>
                    <ColumnDefinition.Style>
                        <Style TargetType="ColumnDefinition">
                            <Setter Property="Width" Value="200" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsAccordionControlVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" Value="Collapsed">
                                    <Setter Property="Width" Value="0" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ColumnDefinition.Style>
                </ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>

            <dxa:AccordionControl x:Name="accordionControl" Grid.Column="0" Grid.Row="0" 
                                  HorizontalAlignment="Stretch"
                                ShowSearchControl="True" 
                                SelectedItem="{Binding SelectedItem}"
                                SelectionUnit="SubItemOrRootItem"
                                SearchControlFilterCondition="Contains"
                                ItemsSource="{Binding Departments,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                                DisplayMemberPath="{Binding DepartmentName}"
                                ItemTemplateSelector="{StaticResource accordianTemplateSelector}" 
                                ChildrenPath="Employees"      
                                ExpandMode="MultipleOrNone" 
                                Visibility="{Binding IsAccordionControlVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                <dxmvvm:Interaction.Triggers>
                    <dxmvvm:EventToCommand EventName="SelectedItemChanged"
                                       Command="{Binding DepartmentSelectionCommand}"
                                       PassEventArgsToCommand="True" />
                    <dxmvvm:EventToCommand EventName="MouseDoubleClick"
                                       Command="{Binding EditEmployeeDoubleClickCommand}"
                                       CommandParameter="{Binding ElementName=accordionControl}" />
                    <!--PassEventArgsToCommand="True"-->
                    
                </dxmvvm:Interaction.Triggers>

            </dxa:AccordionControl>

            <!--Expand Button-->

            <ToggleButton x:Name="expandButton" Width="20" Grid.Row="1" Grid.Column="1"
                          Command="{Binding HidePanelCommand}"  
                          Style="{StaticResource HideButtonStyle}" IsChecked="True" VerticalAlignment="Center">
            </ToggleButton>

            <UIHelper:SchedulerControlEx x:Name="scheduler" FocusManager.IsFocusScope="True" ShowBorder="True" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                                     Visibility="{Binding IsSchedulerViewVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" 
                                     AllowInplaceEditor="False" Grid.Row="0" Grid.Column="2" 
                                     AllowAppointmentResize="False" 
                                     FlyoutContentTemplate="{StaticResource appointmentFlyoutContentTemplate}"  
                                     AllowAppointmentEdit="True" AllowAppointmentDrag="False" AllowAppointmentConflicts="True"
                                     CommandBarStyle="Ribbon" Margin="0 -50 0 0">
                <dxsch:SchedulerControl.RibbonActions>
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Groups_Home_Appointment }" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_GotoToday }" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_GroupBy_GroupByDate }" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Groups_Home_Arrange }" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Groups_Home_GroupBy }" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Groups_Home_Layout }" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Groups_Home_Window }" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Pages_Home }" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Backward}" PropertyName="Content" Value="" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Forward}" PropertyName="Content" Value="" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.RibbonControl}" PropertyName="ToolbarShowMode" Value="ShowBelow" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.RibbonControl}" PropertyName="IsMinimized" Value="true" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Pages_Appointment}" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Categories_Appointment}" />
                    <dxb:RemoveAction ElementName="{x:Static dxsch:DefaultBarItemNames.Categories_Default}" />
                    <dxb:InsertAction ElementName="{x:Static dxsch:DefaultBarItemNames.RibbonControl}">
                        <dxb:InsertAction.CollectionTag>
                            <dxr:RibbonCollections>ToolbarItems</dxr:RibbonCollections>
                        </dxb:InsertAction.CollectionTag>
                        <dxb:BarStaticItem Content="{Binding Path=(dxsch:SchedulerControl.Scheduler).Name, RelativeSource={RelativeSource Self}}">
                            <dxb:BarStaticItem.ContentTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <RepeatButton HorizontalAlignment="Left" Content="&lt;" x:Name="PART_ArrowLeft" dx:FocusHelper2.Focusable="False" Style="{DynamicResource {dxet:DateNavigatorThemeKey ResourceKey=LeftArrowStyle,IsThemeIndependent=True}}" Command="{x:Static UIHelper:CustomCommands.Back}" CommandParameter="{Binding Path=(dxsch:SchedulerControl.Scheduler), RelativeSource={RelativeSource Self}}" Height="50" />
                                        <TextBlock Text="{Binding Path=(dxsch:SchedulerControl.Scheduler).DisplayName,RelativeSource={RelativeSource Self}}" Width="300" FontSize="25" HorizontalAlignment="Center" TextAlignment="Center" />
                                        <RepeatButton HorizontalAlignment="Right" Content="&gt;" x:Name="PART_ArrowRight" dx:FocusHelper2.Focusable="False" Style="{DynamicResource {dxet:DateNavigatorThemeKey ResourceKey=RightArrowStyle,IsThemeIndependent=True}}" Command="{x:Static UIHelper:CustomCommands.Forw}" CommandParameter="{Binding Path=(dxsch:SchedulerControl.Scheduler), RelativeSource={RelativeSource Self}}" Height="50" />
                                    </StackPanel>
                                </DataTemplate>
                            </dxb:BarStaticItem.ContentTemplate>
                        </dxb:BarStaticItem>
                    </dxb:InsertAction>
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Backward}" PropertyName="Command" Value="{x:Static UIHelper:CustomCommands.Back}" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Forward}" PropertyName="Command" Value="{x:Static UIHelper:CustomCommands.Forw}" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Backward}" PropertyName="CommandParameter" Value="{Binding Path=(dxsch:SchedulerControl.Scheduler), RelativeSource={RelativeSource Self}}" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Forward}" PropertyName="CommandParameter" Value="{Binding Path=(dxsch:SchedulerControl.Scheduler), RelativeSource={RelativeSource Self}}" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Backward}" PropertyName="CommandParameter" Value="{x:Static UIHelper:CustomCommands.Back}" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:DefaultBarItemNames.Items_Home_Navigate_Forward}" PropertyName="CommandParameter" Value="{x:Static UIHelper:CustomCommands.Forw}" />
                </dxsch:SchedulerControl.RibbonActions>

                <dxsch:SchedulerControl.DataSource>
                    <dxsch:DataSource x:Name="source" AppointmentLabelsSource="{Binding LabelItems}" 
                                  AppointmentsSource="{Binding AppointmentItems,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                        <dxsch:DataSource.AppointmentMappings>
                            <dxsch:AppointmentMappings AllDay="AllDay" 
                                               Description="Description"
                                               End="EndDate"
                                               Id="UniqueID"
                                               LabelId="Label"
                                               Type="Type"
                                               Location="Location"
                                               QueryEnd="QueryEnd"
                                               QueryStart="QueryStart"
                                               Reminder="ReminderInfo"
                                               ResourceId="ResourceIDs"
                                               RecurrenceInfo="RecurrenceInfo"
                                               Start="StartDate"
                                               StatusId="Status"
                                               Subject="Subject"
                                                   >
                                <dxsch:CustomFieldMapping Mapping="IdEmployeeLeave" Name="IdEmployeeLeave" />
                                <dxsch:CustomFieldMapping Mapping="IdEmployee" Name="IdEmployee" />
                                <dxsch:CustomFieldMapping Mapping="IsAllDayEvent" Name="IsAllDayEvent" />
                                <dxsch:CustomFieldMapping Mapping="EmployeeCode" Name="EmployeeCode" />

                            </dxsch:AppointmentMappings>
                        </dxsch:DataSource.AppointmentMappings>
                        <dxsch:DataSource.AppointmentLabelMappings>
                            <dxsch:AppointmentLabelMappings Caption="Caption" Id="Id">
                                <dxsch:AppointmentLabelMappings.Color>
                                    <dxsch:Mapping ConversionBehavior="InPlaceOfMapping" Converter="{dxmvvm:BrushToColorConverter}" FieldName="Color" />
                                </dxsch:AppointmentLabelMappings.Color>
                            </dxsch:AppointmentLabelMappings>
                        </dxsch:DataSource.AppointmentLabelMappings>
                    </dxsch:DataSource>
                </dxsch:SchedulerControl.DataSource>
                
                <dxsch:MonthView Name="view" AppointmentStyle="{StaticResource appointmentStyle}" 
                             AppointmentContentTemplate="{StaticResource appointmentContentTemplate}" 
                             WeekCount="5" NavigationButtonsVisibility="Never">

                </dxsch:MonthView>
                

                <dxsch:WeekView NavigationButtonsVisibility="Never" 
                            TimeIndicatorVisibility="Never" TimeMarkerVisibility="Never" 
                            ShowAllDayArea="False" ShowWorkTimeOnly="False" 
                            AppointmentStyle="{StaticResource appointmentStyle}"
                            AppointmentContentTemplate="{StaticResource appointmentContentTemplate}">

                    <dxsch:WeekView.DateHeaderContentTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Interval.Start, StringFormat='{}{0, 1:dddd, dd}'}" />
                        </DataTemplate>
                    </dxsch:WeekView.DateHeaderContentTemplate>

                    <!--<dxsch:WeekView.AllDayCellContentTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Interval.Start, StringFormat='{}{0:dd}'}"/>
                    </DataTemplate>
                </dxsch:WeekView.AllDayCellContentTemplate>-->

                </dxsch:WeekView>

                <dxsch:DayView NavigationButtonsVisibility="Never" 
                            TimeIndicatorVisibility="Never" TimeMarkerVisibility="Never" 
                            ShowAllDayArea="False" ShowWorkTimeOnly="False" 
                               AppointmentStyle="{StaticResource appointmentStyle}"
                                AppointmentContentTemplate="{StaticResource appointmentContentTemplate}"
                               >
                    <dxsch:DayView.DateHeaderContentTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Interval.Start, StringFormat='{}{0, 1:dddd, dd}'}" />
                        </DataTemplate>
                    </dxsch:DayView.DateHeaderContentTemplate>

                </dxsch:DayView>

                <dxmvvm:Interaction.Triggers>
                    <dxmvvm:EventToCommand EventName="AppointmentWindowShowing"
                                                   Command="{Binding DisableAppointmentCommand}" 
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="PopupMenuShowing"
                                                   Command="{Binding PopupMenuShowingCommand}"
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="VisibleIntervalsChanged"
                                                   Command="{Binding scheduler_VisibleIntervalsChangedCommand}" CommandParameter="{Binding ElementName=scheduler}"
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="EditOccurrenceWindowShowing"
                                                   Command="{Binding EditOccurrenceWindowShowingCommand}" 
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="DeleteOccurrenceWindowShowing"
                                                   Command="{Binding DeleteOccurrenceWindowShowingCommand}" 
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="PreviewKeyDown"
                                                   Command="{Binding DeleteAppointmentCommand}" 
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="BeforeAppointmentItemDelete"
                                                   Command="{Binding DeleteAppointmentCommand}" 
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="MouseUp"
                                                   Command="{Binding SelectedIntervalCommand}" 
                                                   PassEventArgsToCommand="True" />

                    <dxmvvm:EventToCommand EventName="Loaded"
                                                   Command="{Binding DefaultLoadCommand}" 
                                                   PassEventArgsToCommand="True" />
                </dxmvvm:Interaction.Triggers>


            </UIHelper:SchedulerControlEx>

        </Grid>
        <!--Grid View-->

        <dxg:GridControl VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4"
                         ItemsSource="{Binding Path=EmployeeLeaves,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" SelectionMode="Row"
                         SelectedItem="{Binding Path=SelectedLeaveRecord,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                         ImplyNullLikeEmptyStringWhenFiltering="True"
                         Visibility="{Binding IsGridViewVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">

            <dxg:GridColumn Header="{DynamicResource CompanyLeave}" FieldName="Employee.EmployeeCompanyAlias" FilterPopupMode="CheckedList" Width="120" FixedWidth="True" ReadOnly="True" />
            <dxg:GridColumn Header="{DynamicResource LeaveGridColumnEmployeeCode}" FieldName="Employee.EmployeeCode" FilterPopupMode="CheckedList" Width="120" FixedWidth="True" ReadOnly="True" />
            <dxg:GridColumn Header="{DynamicResource LeaveFullName}" FieldName="Employee.FullName" FilterPopupMode="CheckedList" Width="200" FixedWidth="True" ReadOnly="True" />
            <dxg:GridColumn Header="{DynamicResource LeaveJDCode}" FieldName="Employee.EmpJobCodes" ColumnFilterMode="DisplayText" FilterPopupMode="CheckedList" Width="200" FixedWidth="True" ReadOnly="True" />
            <dxg:GridColumn Header="{DynamicResource LeaveJobTitle}" FieldName="Employee.EmployeeJobTitles" FilterPopupMode="CheckedList" Width="200" FixedWidth="True" ReadOnly="True" />
            <!--[Sprint-65][20/06/2019][skale]-Add a new filter criterion to Leaves and Attendance Window in GHRM-->
            <dxg:GridColumn Header="{DynamicResource LeaveJobDescriptionDepartment}" FieldName="Employee.LstEmployeeDepartments" FilterPopupMode="CheckedList" Width="200" FixedWidth="True" ReadOnly="True" Name="Departments">
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <dxe:ListBoxEdit ItemsSource="{Binding RowData.Row.Employee.LstEmployeeDepartments}" ShowBorder="False"
                                             DisplayMember="DepartmentName" ItemContainerStyle="{StaticResource LeaveDepartmentNameStyle}">
                            <dxe:ListBoxEdit.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="1"></UniformGrid>
                                </ItemsPanelTemplate>
                            </dxe:ListBoxEdit.ItemsPanel>
                        </dxe:ListBoxEdit>
                    </DataTemplate>

                </dxg:GridColumn.CellTemplate>

                <dxg:GridColumn.PrintCellStyle>
                    <Style BasedOn="{StaticResource {dxgt:TableViewThemeKey ResourceKey=DefaultPrintCellStyle}}" TargetType="{x:Type dxe:TextEdit}">
                        <Setter Property="dxp:ExportSettings.TargetType" Value="Panel" />

                        <Setter Property="DisplayTemplate">
                            <Setter.Value>
                                <ControlTemplate>
                                    <TextBlock dxp:TextExportSettings.FontSize="12" Text="{Binding RowData.Row.Employee.LstEmployeeDepartments, Converter={Converters:ListToWrapTextConverter},ConverterParameter=Departments}"
                                                   dxp:ExportSettings.TargetType="Text" dxp:ExportSettings.BorderThickness="1"
                                                   TextWrapping="WrapWithOverflow" />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </dxg:GridColumn.PrintCellStyle>
            </dxg:GridColumn>
            <!--end-->

            <dxg:GridColumn Header="{DynamicResource LeaveGridColumnMonthNumber}" FieldName="StartDate.Month" FilterPopupMode="CheckedList" Width="80" FixedWidth="True" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings HorizontalContentAlignment="Left" />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>
            <dxg:GridColumn Header="{DynamicResource  LeaveGridColumnWeekNumber}" FieldName="WeekNumber" FilterPopupMode="CheckedList" Width="80" FixedWidth="True" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings HorizontalContentAlignment="Left" />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>
            <dxg:GridColumn Header="{DynamicResource LeaveStartDate}" FieldName="StartDate"  Width="100" FixedWidth="True" FilterPopupMode="CheckedList" ReadOnly="True">
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock VerticalAlignment="Center" Text="{Binding RowData.Row.StartDate,StringFormat=d,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" />
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>
            </dxg:GridColumn>


            <dxg:GridColumn Header="{DynamicResource LeaveStartTime}" FieldName="StartTime" Visible="{Binding HideColumn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="100" FixedWidth="True" FilterPopupMode="CheckedList" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings MaskType="DateTime"
                                           MaskUseAsDisplayFormat="True"
                                           Mask="{Binding TimeEditMask,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                    />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>

            <!--sjadhav-[GEOS2-2437]-->
            <dxg:GridColumn Header="{DynamicResource LeaveStartTime}" FieldName="StartLeaveTimeForExcel" Visible="{Binding ShowColumn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="100" FixedWidth="True" FilterPopupMode="CheckedList" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings MaskType="DateTime"
                                           MaskUseAsDisplayFormat="True"
                                           Mask="{Binding TimeEditMask,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                    />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>

            <dxg:GridColumn Header="{DynamicResource LeaveEndDate}" FieldName="EndDate" Width="100" FixedWidth="True" FilterPopupMode="CheckedList" ReadOnly="True">
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock VerticalAlignment="Center" Text="{Binding RowData.Row.EndDate,StringFormat=d,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" />
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>
            </dxg:GridColumn>


            <dxg:GridColumn Header="{DynamicResource LeaveEndTime}" FieldName="EndTime" Visible="{Binding HideColumn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  FilterPopupMode="CheckedList" Width="100" FixedWidth="True" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings MaskType="DateTime"
                                           Mask="{Binding TimeEditMask,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                    MaskUseAsDisplayFormat="True"
                                           />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>
            
            <!--sjadhav-[GEOS2-2437]-->
            <dxg:GridColumn Header="{DynamicResource LeaveEndTime}" FieldName="EndLeaveTimeForExcel" FilterPopupMode="CheckedList" Visible="{Binding ShowColumn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Width="100" FixedWidth="True" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings MaskType="DateTime"
                                           Mask="{Binding TimeEditMask,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                    MaskUseAsDisplayFormat="True"
                                           />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>            
            
            <dxg:GridColumn Header="{DynamicResource BreakTime}" FieldName="CompanyShift.BreakTime" Visible="{Binding ShowColumn, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" FilterPopupMode="CheckedList" Width="100" FixedWidth="True" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings MaskType="DateTime"
                                           Mask="{Binding TimeEditMask,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                    MaskUseAsDisplayFormat="True"
                                           />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>

            <dxg:GridColumn Header="{DynamicResource TotalTimeHours}" FieldName="CompanyShift.TotalTimeInHours" Visible="{Binding ShowColumn, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" FilterPopupMode="CheckedList" Width="130" FixedWidth="True" ReadOnly="True">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings MaskType="DateTime"
                                           Mask="{Binding TimeEditMask,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                    MaskUseAsDisplayFormat="True"
                                           />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn>
            <dxg:GridColumn Header="{DynamicResource LeaveType}" FieldName="CompanyLeave.Name" FilterPopupMode="CheckedList" Width="90" FixedWidth="True" ReadOnly="True">
                <!--dxg:GridColumn.CellStyle>
                    -->
                <!--<Style  TargetType="dxg:CellContentPresenter">
                        <Setter Property="Background" Value="{Binding RowData.Row.CompanyLeave.HtmlColor}"/>
                        <Setter Property="Foreground" Value ="{Binding  RowData.Row.CompanyLeave.HtmlColor, Converter={Converters:ForegroundColorConverter}}">
                    </Style>-->
                <!--
                </dxg:GridColumn.CellStyle>-->

                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <dxe:TextEdit x:Name="PART_Editor" IsPrintingMode="True" HorizontalAlignment="Stretch" 
                                      Background="{Binding RowData.Row.CompanyLeave.HtmlColor,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                      VerticalAlignment="Stretch"
                                      IsReadOnly="True" Padding="3" 
                                      ShowBorder="False"
                                      Foreground="{Binding  RowData.Row.CompanyLeave.HtmlColor,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,Converter={Converters:ForegroundColorConverter}}" />
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>

            </dxg:GridColumn>

            <dxg:GridColumn Header="{DynamicResource LeaveRemark}" FieldName="Remark" FilterPopupMode="CheckedList" ReadOnly="True" Width="200" FixedWidth="True" />

            <dxg:GridColumn Header="{DynamicResource LeaveGridColumnFile}" FieldName="FileName" FilterPopupMode="CheckedList" ReadOnly="True" Width="80" FixedWidth="True">
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <Button Name="btnViewLeaveFile" ToolTip="View Document" 
                                  Command="{Binding DataContext.DocumentViewCommand,RelativeSource={RelativeSource AncestorType=UserControl}}"
                                  CommandParameter="{Binding ElementName=LeaveTableView}">
                            <Button.ContentTemplate>
                                <DataTemplate>
                                    <Image Height="16" Width="16" Source="/Emdep.Geos.Modules.Hrm;component/Assets/Images/pdf-icon.png" />
                                </DataTemplate>
                            </Button.ContentTemplate>
                            <Button.Style>
                                <Style TargetType="{x:Type Button}">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Cursor" Value="Hand" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding RowData.Row.FileName}" Value="{x:Null}">
                                <Setter TargetName="btnViewLeaveFile" Property="Visibility" Value="Hidden" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding RowData.Row.FileName}" Value="{x:Static sys:String.Empty}">
                                <Setter TargetName="btnViewLeaveFile" Property="Visibility" Value="Hidden" />
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>
                <dxg:GridColumn.PrintCellStyle>
                    <Style TargetType="dxe:TextEdit" BasedOn="{StaticResource {dxgt:TableViewThemeKey ResourceKey=DefaultPrintCellStyle}}">
                        <Setter Property="dxp:TextExportSettings.Text" Value="{Binding Path=RowData.Row.FileName}">
                        </Setter>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=RowData.Row.FileName}" Value="{x:Null}">
                                <Setter Property="dxp:TextExportSettings.Text" Value="" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </dxg:GridColumn.PrintCellStyle>

            </dxg:GridColumn>



            <dxmvvm:Interaction.Behaviors>
                <UIHelper:GridSelectingBehavior />
                <!--swapnil-->
                <dxmvvm:EventToCommand EventName="CustomRowFilter"
                                       Command="{Binding CustomRowFilterCommand}"
                                       PassEventArgsToCommand="True" />

            </dxmvvm:Interaction.Behaviors>

            <dxg:GridControl.TotalSummary>
                <dxg:GridSummaryItem x:Name="summary" FieldName="DepartmentName" SummaryType="Count" DisplayFormat="Total Count: {0}" Visible="True" Alignment="Left" />
            </dxg:GridControl.TotalSummary>

            <dxg:GridControl.View>
                <dxg:TableView x:Name="LeaveTableView"
                                   NavigationStyle="Row"
                                   RowDetailsVisibilityMode="Visible"
                                   ShowHorizontalLines="True"
                                   ShowSearchPanelMode="Always"
                                   ShowColumnHeaders="True"
                                   VerticalScrollbarVisibility="Auto" 
                                   HorizontalScrollbarVisibility="Auto"
                                   AllowFixedColumnMenu="False"
                                   ShowFixedTotalSummary="True" 
                                   SearchPanelHorizontalAlignment="Stretch"
                                   ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                   AllowGrouping="True"
                                   ShowGroupPanel="False"
                                   FocusedRow="{Binding Path=SelectedLeaveRecord,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                   ShowIndicator="False" AutoWidth="True"
                                   SearchString="{Binding MyFilterString,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">

                    <dxg:TableView.Resources>
                        <DataTemplate x:Key="EmployeeLeaveReportPrintHeaderTemplate">
                            <Grid Width="{Binding UsablePageWidth}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="50" />
                                    <ColumnDefinition Width="130" />
                                </Grid.ColumnDefinitions>
                                <dxe:TextEdit Text=" " Width="{Binding UsablePageWidth}" Grid.ColumnSpan="3" IsPrintingMode="True" Background="#333E5E" HorizontalAlignment="Stretch" 
                                                      VerticalAlignment="Stretch" Padding="12" Foreground="#FFFFFFFF" Style="{DynamicResource TextEdit20Style}" FontWeight="Bold" Height="50" />
                                <dxe:TextEdit Text="Employee Leaves Report" IsPrintingMode="True" HorizontalAlignment="Stretch" 
                                                      VerticalAlignment="Stretch" Padding="12" Foreground="#FFFFFFFF" Style="{DynamicResource TextEdit20Style}" FontWeight="Bold" />
                                <Image Source="/Emdep.Geos.Modules.Hrm;component/Assets/Images/GeosReportLogo.png" Height="50" Width="80" dxp:ExportSettings.TargetType="Image" Grid.Column="2" />
                            </Grid>
                        </DataTemplate>

                        <DataTemplate x:Key="EmployeeLeaveReportPrintFooterTemplate">
                            <dxe:TextEdit HorizontalContentAlignment="Center" 
                                                  Width="{Binding Path=UsablePageWidth, Mode=OneWay}" 
                                                  dxp:ExportSettings.TargetType="PageNumber" 
                                                  dxp:PageNumberExportSettings.Kind="NumberOfTotal" 
                                                  dxp:PageNumberExportSettings.Format="Page {0} of {1}" />
                        </DataTemplate>

                    </dxg:TableView.Resources>

                    <dxmvvm:Interaction.Behaviors>
                        <dxmvvm:EventToCommand Command="{Binding EditLeaveGridDoubleClickCommand}" EventName="MouseDoubleClick" CommandParameter="{Binding ElementName=LeaveTableView}">
                            <dxmvvm:EventToCommand.EventArgsConverter>
                                <dx:EventArgsToDataRowConverter />
                            </dxmvvm:EventToCommand.EventArgsConverter>
                        </dxmvvm:EventToCommand>
                        <!--swapnil-->
                        <dxmvvm:EventToCommand EventName="ShowFilterPopup"
                                               Command="{Binding CustomShowFilterPopupCommand}"
                                               PassEventArgsToCommand="True" />


                    </dxmvvm:Interaction.Behaviors>

                </dxg:TableView>
               
            </dxg:GridControl.View>
            
        </dxg:GridControl>


        <Grid Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="4" HorizontalAlignment="Stretch">
            <Grid.RowDefinitions>
                <RowDefinition Height="AUTO" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
                <ColumnDefinition Width="AUTO" />
            </Grid.ColumnDefinitions>

            <Label Content="{DynamicResource Leaves}" Grid.Row="0" Grid.Column="0" Style="{StaticResource LabelTitleStyle}" HorizontalAlignment="Left" />

            <!--Plant-->
            <TextBlock Grid.Column="1" Grid.Row="2" Text="{DynamicResource CommonPlant}" FontWeight="Bold" Margin="10,2,5,0" HorizontalAlignment="Right" Height="25" IsEnabled="True" />

            <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Grid.Column="2" Grid.Row="0" Width="150" Height="30"
                                ItemsSource="{Binding Source={x:Static HrmApplication:HrmCommon.Instance}, Path=UserAuthorizedPlantsList}"
                                EditValue="{Binding Source={x:Static HrmApplication:HrmCommon.Instance}, Path=SelectedAuthorizedPlantsList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5,0,5,0"
                                DisplayMember="ShortName">

                <dxe:ComboBoxEdit.StyleSettings>
                    <dxe:CheckedComboBoxStyleSettings />
                </dxe:ComboBoxEdit.StyleSettings>

                <dxmvvm:Interaction.Triggers>
                    <dxmvvm:EventToCommand EventName="EditValueChanged"
                                           Command="{Binding DataContext.PlantOwnerEditValueChangedCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                           PassEventArgsToCommand="True">
                        <dxmvvm:EventToCommand.CommandParameter>
                            <MultiBinding Converter="{Converters:ConverterForRefresh}">
                                <Binding ElementName="scheduler" />
                                <Binding ElementName="accordionControl" />
                            </MultiBinding>
                        </dxmvvm:EventToCommand.CommandParameter>
                    </dxmvvm:EventToCommand>

                </dxmvvm:Interaction.Triggers>
            </dxe:ComboBoxEdit>

            <!--Period-->
            <DockPanel Grid.Column="3" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="5,0,0,0">
                <Image Style="{DynamicResource CalendarImageStyle}" Width="30" Height="20" Margin="2,0,3,0" />
                <TextBlock Text="{DynamicResource AnnualSalesPerformanceViewPeriod}" FontWeight="Bold" Margin="0,0,0,0" IsEnabled="True" />
            </DockPanel>

            <dxe:ComboBoxEdit Grid.Row="0" Grid.Column="4" 
                                Name="cmbPeriod"
                                IsTextEditable="False" Margin="5,0,0,0"
                                HorizontalAlignment="Left"
                                IsEnabled="True"
                                Height="30"
                                Width="100"
                                MaxLength="4" 
                                VerticalAlignment="Center" 
                                ItemsSource="{Binding Source={x:Static HrmApplication:HrmCommon.Instance}, Path=FinancialYearList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 SelectedItem="{Binding Source={x:Static HrmApplication:HrmCommon.Instance}, Path=SelectedPeriod,UpdateSourceTrigger=PropertyChanged}">
                <dxe:ComboBoxEdit.StyleSettings>
                    <dxe:ComboBoxStyleSettings />
                </dxe:ComboBoxEdit.StyleSettings>
                <dxmvvm:Interaction.Triggers>
                    <dxmvvm:EventToCommand EventName="EditValueChanged"
                                               Command="{Binding DataContext.SelectedYearChangedCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                            PassEventArgsToCommand="False">
                        <dxmvvm:EventToCommand.CommandParameter>
                            <MultiBinding Converter="{Converters:ConverterForRefresh}">
                                <Binding ElementName="scheduler" />
                                <Binding ElementName="accordionControl" />
                            </MultiBinding>
                        </dxmvvm:EventToCommand.CommandParameter>
                    </dxmvvm:EventToCommand>

                </dxmvvm:Interaction.Triggers>
            </dxe:ComboBoxEdit>

            <!--Add Button-->
            <Button Visibility="Visible" Grid.Row="0" Grid.Column="5" Height="40" Width="40" HorizontalAlignment="Right" 
                    Command="{Binding ButtonAddNewLeaveCommand}" Margin="5,0,0,0"
                    IsEnabled="{Binding IsAcceptEnabled}">
                <Button.CommandParameter>
                    <MultiBinding Converter="{Converters:ConverterForRefresh}">
                        <Binding ElementName="LeaveTableView" />
                        <Binding ElementName="scheduler" />
                        <Binding ElementName="accordionControl" />
                    </MultiBinding>
                </Button.CommandParameter>
                <Button.ToolTip>
                    <TextBlock Text="{DynamicResource AddNewEntry}" />
                </Button.ToolTip>
                <Button.ContentTemplate>
                    <DataTemplate>
                        <Image Style="{DynamicResource AddNewButtonImageStyle}" Height="24" Width="24" Margin="-20" />
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>

            <!-- Refresh Button -->
            <Button Visibility="Visible" Grid.Row="0" Grid.Column="6" Height="40" Width="40" HorizontalAlignment="Right" 
                    Command="{Binding RefreshButtonCommand}"
                    Margin="5,0,0,0"
                    >
                <Button.CommandParameter>
                    <MultiBinding Converter="{Converters:ConverterForRefresh}">
                        <Binding ElementName="scheduler" />
                        <Binding ElementName="accordionControl" />
                        <Binding ElementName="LeaveTableView" />
                    </MultiBinding>
                </Button.CommandParameter>

                <Button.ToolTip>
                    <TextBlock Text="{DynamicResource ButtonRefresh}" />
                </Button.ToolTip>
                <Button.ContentTemplate>
                    <DataTemplate>
                        <Image Style="{DynamicResource RefreshButtonImageStyle}" Height="24" Width="24" Margin="-20" />
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>

            <!-- Print Department List-->
            <Button Visibility="Visible" Grid.Row="0" Grid.Column="7" Height="40" Width="40" HorizontalAlignment="Right" 
                    Command="{Binding PrintButtonCommand}" CommandParameter="{Binding ElementName=LeaveTableView}"
                     Margin="5,0,0,0"
                    >
                <Button.ToolTip>
                    <TextBlock Text="{DynamicResource ButtonPrint}" />
                </Button.ToolTip>
                <Button.ContentTemplate>
                    <DataTemplate>
                        <Image Style="{DynamicResource PrinterButtonImageStyle}" Height="24" Width="24" Margin="-10" />
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>

            <!-- Export Department List-->
            <Button Visibility="Visible" Grid.Row="0" Grid.Column="8" Height="40" Width="40" HorizontalAlignment="Right" 
                    Command="{Binding ExportButtonCommand}"
                    CommandParameter="{Binding ElementName=LeaveTableView}"
                     Margin="5,0,0,0"
                    >
                <Button.ToolTip>
                    <TextBlock Text="{DynamicResource ButtonExportToExcel}" />
                </Button.ToolTip>
                <Button.ContentTemplate>
                    <DataTemplate>
                        <Image Style="{DynamicResource ExcelExportButtonImageStyle}" Height="24" Width="24" Margin="-10" />
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>

            <!-- Switch View -->
            <dx:DropDownButton x:Name="dropdownButton" Content="Dropdown button" 
                                   HorizontalAlignment="Right" Height="40" Width="40" Grid.Row="0" Grid.Column="9" Margin="5,0,0,0" VerticalAlignment="Center">
                <dx:DropDownButton.Style>
                    <Style>
                        <Setter Property="dx:DropDownButtonBase.ArrowAlignment" Value="Right" />
                        <Setter Property="dx:DropDownButtonBase.ArrowPadding" Value="0" />
                    </Style>
                </dx:DropDownButton.Style>

                <Button.ToolTip>
                    <TextBlock Text="{DynamicResource SwitchViewButtonTooltip}"></TextBlock>
                </Button.ToolTip>

                <Button.ContentTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Style="{ DynamicResource SwitchOrganizationImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-20" />
                        </Grid>
                    </DataTemplate>
                </Button.ContentTemplate>

                <dxb:PopupMenu>
                    <dxb:BarButtonItem Name="SchedulerView" Content="Scheduler View" Glyph="{DynamicResource SwitchActivityCalendar}" Command="{Binding ShowSchedulerViewCommand}">
                        <dxb:BarButtonItem.Style>
                            <Style>
                                <Style.Triggers>
                                    <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="True">
                                        <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityCalendarMouseOver}" />
                                    </Trigger>
                                    <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="False">
                                        <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityCalendar}" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </dxb:BarButtonItem.Style>
                    </dxb:BarButtonItem>

                    <dxb:BarButtonItem Name="GridView" Content="Grid View" Glyph="{DynamicResource SwitchActivityGridview}" Command="{Binding ShowGridViewCommand}" CommandParameter="{Binding ElementName=scheduler}">
                        <dxb:BarButtonItem.Style>
                            <Style>
                                <Style.Triggers>
                                    <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="True">
                                        <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityGridviewMouseOver}" />
                                    </Trigger>
                                    <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="False">
                                        <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityGridview}" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </dxb:BarButtonItem.Style>
                    </dxb:BarButtonItem>
                </dxb:PopupMenu>
            </dx:DropDownButton>

        </Grid>

    </Grid>
</UserControl>
