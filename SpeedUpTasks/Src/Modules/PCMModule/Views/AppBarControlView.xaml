<dx:DXWindow  x:Class="Emdep.Geos.Modules.PCM.Views.AppBarControlView"
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                         xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:local="clr-namespace:WindowsUIDemo"
                         mc:Ignorable="d"
                         WindowStartupLocation="CenterScreen"
                         Height="800" Width="800">

    <dx:DXWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding CancelButtonCommand}"/>
    </dx:DXWindow.InputBindings>

    
        <DockPanel >
            <Grid Background="#55000000">
            <Grid.RowDefinitions>
                <RowDefinition Height="80*"/>
                <RowDefinition Height="20*"/>
            </Grid.RowDefinitions>
            <Grid.Resources>
                    <Style TargetType="dxwui:AppBarButton">
                        <Setter Property="AllowGlyphTheming" Value="True" />
                        <Setter Property="GlyphHeight" Value="24" />
                    </Style>
                    <ControlTemplate x:Key="ScrollViewerControlTemplate" TargetType="{x:Type ScrollViewer}">
                        <Grid x:Name="Grid" Background="Transparent">
                            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                                Margin="{TemplateBinding Padding}"
                                                Content="{TemplateBinding Content}"
                                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                                CanContentScroll="{TemplateBinding CanContentScroll}"
                                                CanHorizontallyScroll="False"
                                                CanVerticallyScroll="False" />
                        </Grid>
                    </ControlTemplate>
                    <Style TargetType="ScrollViewer">
                        <Setter Property="Template" Value="{StaticResource ScrollViewerControlTemplate}" />
                    </Style>
                </Grid.Resources>

            <dxwui:FlipView ItemsSource="{Binding Photos, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                            SelectedItem="{Binding SelectedItem, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                            x:Name="imageViewer1"
                            IsAnimationEnabled="True"
                            IsManipulationEnabled="True"
                            Grid.Row="0"
                            >
                    <dxwui:FlipView.ItemTemplate>
                        <DataTemplate>
                        <local:ImageViewer ImageSource="{Binding Source, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                           Rotation="{Binding Rotation, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged }"
                                           Scale="{Binding Scale, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}"
                                           Flip="{Binding Flip, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" 
                                          />
                    </DataTemplate>
                    </dxwui:FlipView.ItemTemplate>
                </dxwui:FlipView>

                <dxwui:AppBar x:Name="appBar"
                          IsOpen="True"
                          HideMode="AlwaysVisible"
                              Grid.Row="1" Width="auto">
                    <dxwui:AppBarButton Label="Zoom in" Command="{Binding ZoomInCommand}" Glyph="{dx:DXImageGrayscale Image=ZoomIn_32x32.png}" />
                    <dxwui:AppBarButton Label="Zoom out" Command="{Binding ZoomOutCommand}" Glyph="{dx:DXImageGrayscale Image=ZoomOut_32x32.png}" />
                   
                    <dxwui:AppBarButton Label="Actual Size" Command="{Binding ResetScaleCommand}" Glyph="{dx:DXImageGrayscale Image=Zoom_32x32.png}" />
                    <dxwui:AppBarButton Label="Rotate" HorizontalAlignment="Right" Glyph="{dx:DXImage Image=DrillDown_32x32.png}">
                        <dxwui:AppBarButton.Flyout>
                            <dxwui:MenuFlyout ShowIndicator="True">
                                <dxwui:MenuFlyoutItem Content="90° clockwise" Command="{Binding RotateClockwiseCommand}" />
                                <dxwui:MenuFlyoutItem Content="90° counter clockwise" Command="{Binding RotateCounterclockwiseCommand}" />
                                <dxwui:MenuFlyoutItem Content="180°" Command="{Binding Rotate180Command}" />
                                <dxwui:MenuFlyoutSeparator />
                                <dxwui:MenuFlyoutItem Content="Reset" Command="{Binding RotateResetCommand}" />
                            </dxwui:MenuFlyout>
                        </dxwui:AppBarButton.Flyout>
                    </dxwui:AppBarButton>
                    <dxwui:AppBarButton Label="Flip" Command="{Binding FlipCommand}" Alignment="Far" Glyph="{dx:DXImageGrayscale Image=Stretch_32x32.png}" />
                    
                    <!--<dxwui:AppBarButton Label="Print" Command="{Binding PrintCommand}" Alignment="Far" Glyph="{dx:DXImageGrayscale Image=Print_32x32.png}" />-->
                </dxwui:AppBar>
            </Grid>
        </DockPanel>
</dx:DXWindow>
