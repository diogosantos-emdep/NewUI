<UserControl x:Class="Emdep.Geos.Modules.Crm.Views.ActivityView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:ViewModels="clr-namespace:Emdep.Geos.Modules.Crm.ViewModels"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" 
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" 
             xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
             xmlns:dxci="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
             xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
             xmlns:UIConverter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters" 
             xmlns:dxpg="http://schemas.devexpress.com/winfx/2008/xaml/pivotgrid"
             xmlns:local="clr-namespace:Emdep.Geos.Modules.Crm.Views"
             xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing" 
             xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
             xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
             xmlns:Behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
             xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
             xmlns:Interactive="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:gif="http://wpfanimatedgif.codeplex.com"
             xmlns:dxsch="http://schemas.devexpress.com/winfx/2008/xaml/scheduler"
             xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
             xmlns:dxcn="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
             xmlns:dxscht="http://schemas.devexpress.com/winfx/2008/xaml/scheduler/themekeys"
             xmlns:dxschd="http://schemas.devexpress.com/winfx/2008/xaml/scheduler/internal"
             xmlns:dxschcore="clr-namespace:DevExpress.XtraScheduler;assembly=DevExpress.XtraScheduler.v19.2.Core"
             xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
             xmlns:dxprg="http://schemas.devexpress.com/winfx/2008/xaml/propertygrid"
             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             Height="Auto" Width="Auto"  
             Style="{DynamicResource UserControlStyle}">

    <!--xmlns:dxschp="clr-namespace:DevExpress.Xpf.Scheduling.Panels;assembly=DevExpress.Xpf.Scheduling.v17.2" 
             xmlns:dxschv="http://schemas.devexpress.com/winfx/2008/xaml/scheduling/visual" 
              xmlns:dxcn="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"-->
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <sys:Boolean x:Key="False">False</sys:Boolean>
        <sys:Boolean x:Key="True">True</sys:Boolean>
        <UIConverter:AppointmentForeColorConverter x:Key="appointmentForeColorConverter" />

        <DataTemplate x:Key="AppointmentToolTipContentTemplate">
            <Grid Margin="-7 -2 -7 -2" Background="{Binding Label.Brush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150" />
                    <ColumnDefinition Width="90" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Margin="5" Text="{Binding CustomViewInfo.TooltipTitle}" TextWrapping="Wrap"
                           Foreground="{Binding Label, Converter={StaticResource appointmentForeColorConverter}}" FontWeight="Bold" Style="{DynamicResource TextBlock16Style}" />
                <GridSplitter Grid.Row="1" Grid.Column="0" Height="2" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" Margin="2 0 2 0" />

                <TextBlock Grid.Row="2" Grid.Column="0" Margin="5" Text="{Binding CustomViewInfo.TooltipSubject}" VerticalAlignment="Top"
                           TextWrapping="Wrap"
                           Foreground="{Binding Label, Converter={StaticResource appointmentForeColorConverter}}" FontWeight="Bold" Style="{DynamicResource TextBlock14Style}" />

                <TextBlock Grid.Row="3" Grid.Column="0" Margin="5" Grid.RowSpan="2" Text="{Binding Path=Description}" TextWrapping="Wrap"
                           VerticalAlignment="Top"
                           Foreground="{Binding Label, Converter={StaticResource appointmentForeColorConverter}}" Style="{DynamicResource TextBlock14Style}" />

                <Border Grid.Row="2" Grid.Column="1" Grid.RowSpan="2" 
                        Height="80" Width="80"
                        SnapsToDevicePixels="True"
                        Margin="2" BorderThickness="1"
                        BorderBrush="DarkGray" CornerRadius="2">
                    <Image SnapsToDevicePixels="True" Stretch="Uniform" 
                           MaxWidth="80" MaxHeight="140"
                           Source="{Binding CustomViewInfo.Picture}" />
                </Border>

                <TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding CustomViewInfo.Owner}" TextWrapping="Wrap"
                           VerticalAlignment="Top"
                           HorizontalAlignment="Center"
                            Foreground="{Binding Label, Converter={StaticResource appointmentForeColorConverter}}" Style="{DynamicResource TextBlock14Style}" />

            </Grid>

        </DataTemplate>

        <!-- Display image as per type. -->
        <DataTemplate x:Key="AppointmentContentTemplate">
            <StackPanel Orientation="Horizontal" Height="20">

                <!--Source="/Emdep.Geos.Modules.Crm;component/Assets/Images/PlannedAppoinment.png"-->
                <Image Height="16" Width="16" Margin="2,0,0,0" VerticalAlignment="Center">
                    <Image.Style>
                        <Style>
                            <Style.Triggers>
                                <!--For value 0 and 1 image will be collapsed-->
                                <DataTrigger Binding="{Binding Status.Id}" Value="0">
                                    <!--<Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/wCompleted.png"/>-->
                                    <!--<Setter Property="Image.ToolTip" Value="{Binding Status}"/>-->
                                    <Setter Property="Image.Visibility" Value="Collapsed" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status.Id}" Value="1">
                                    <!--<Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/wCompleted.png"/>-->
                                    <!--<Setter Property="Image.ToolTip" Value="{Binding Status}"/>-->
                                    <Setter Property="Image.Visibility" Value="Collapsed" />
                                </DataTrigger>

                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>


                <Image Height="16" Width="16" Margin="0,0,0,0" VerticalAlignment="Center">
                    <Image.Style>
                        <Style>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Label.Id}" Value="37">
                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/Meeting.png" />
                                    <Setter Property="Image.ToolTip" Value="{Binding Location}" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Label.Id}" Value="38">
                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/Call.png" />
                                    <Setter Property="Image.ToolTip" Value="{Binding Location}" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Label.Id}" Value="39">
                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/At.png" />
                                    <Setter Property="Image.ToolTip" Value="{Binding Location}" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Label.Id}" Value="40">
                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/Task.png" />
                                    <Setter Property="Image.ToolTip" Value="{Binding Location}" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Label.Id}" Value="91">
                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/info.png" />
                                    <Setter Property="Image.ToolTip" Value="{Binding Location}" />
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Label.Id}" Value="96">
                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/PlannedAppointment.png" />
                                    <Setter Property="Image.ToolTip" Value="{Binding Location}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
                <!--Source="/Emdep.Geos.Modules.Crm;component/Assets/Images/Completed.png"-->
                <Image Height="16" Width="16" Margin="2,0,0,0" VerticalAlignment="Center">
                    <Image.Style>
                        <Style>
                            <Style.Triggers>
                                <!--For value 0 and 2 image will be collapsed-->
                                <DataTrigger Binding="{Binding Status.Id}" Value="0">
                                    <!--<Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/wCompleted.png"/>-->
                                    <!--<Setter Property="Image.ToolTip" Value="{Binding Status}"/>-->
                                    <Setter Property="Image.Visibility" Value="Collapsed" />
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Status.Id}" Value="1">
                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.Crm;component/Assets/Images/wCompleted.png" />
                                    <Setter Property="Image.ToolTip" Value="Completed" />
                                    <Setter Property="Image.Visibility" Value="Visible" />
                                </DataTrigger>


                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>

                <TextBlock Margin="2,0,0,0" VerticalAlignment="Center" TextAlignment="Center" Text="{Binding Subject}" Foreground="{Binding Label, Converter={StaticResource appointmentForeColorConverter}}" />
            </StackPanel>
        </DataTemplate>

    </UserControl.Resources>
    <Grid x:Name="gridActivity">

        <DockPanel LastChildFill="True">
            <Grid DockPanel.Dock="Top" Grid.Row="0" Margin="0,5,0,0">
                <Grid.ColumnDefinitions>
                    <!--<ColumnDefinition Width="10" />
                    <ColumnDefinition  />
                    <ColumnDefinition />-->
                    <!--<ColumnDefinition />-->
                    <ColumnDefinition Width="AUTO" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="AUTO" />
                    <ColumnDefinition Width="AUTO" />
                    <ColumnDefinition Width="AUTO" />
                    <ColumnDefinition Width="AUTO" />
                    <ColumnDefinition Width="AUTO" />
                    <ColumnDefinition Width="AUTO" />
                    <ColumnDefinition Width="AUTO" />
                </Grid.ColumnDefinitions>

                <TextBlock Text="{DynamicResource ActivityViewTextHeader}" Grid.Column="0" Style="{DynamicResource TextBlock30Style}" FontWeight="Bold" />

                <!--<Image gif:ImageBehavior.RepeatBehavior="Forever" gif:ImageBehavior.AnimatedSource="/Emdep.Geos.Modules.Crm;component/Assets/Images/animatedWarning.gif" Visibility="{Binding IsShowFailedPlantWarning,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,Converter={StaticResource BoolToVis}}" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,2,5,0" Height="30" Width="30">
                    <Image.ToolTip>
                        <TextBlock Text="{Binding WarningFailedPlants}"/>
                    </Image.ToolTip>
                </Image>-->

                <!--Search Control-->
                <!--<DockPanel Grid.Column="1" Grid.ColumnSpan="2"  HorizontalAlignment="Center" Margin="0" Height="45" Visibility="{Binding IsFilterSearchVisible}" >
                <dxe:ImageEdit Grid.Column="0"  Height="24" Width="24"
                                       ShowMenu="False" ShowBorder="False"
                                       ShowLoadDialogOnClickMode="Never" 
                                       Style="{DynamicResource SearchImageStyle}" />
                        <TextBlock Grid.Column="1" Text="{DynamicResource QuickSearch}" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                        <dxe:SearchControl x:Name="searchControl" Width="150"
                                           Grid.Column="2"
                                           Margin="5 0 0 0"
                                           Height="30"
                                           HorizontalAlignment="Stretch"
                                           VerticalAlignment="Stretch" ShowMRUButton="False"
                                           SearchText="{Binding ActivityFilterCriteria, Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged}" />
                </DockPanel>-->

                <DockPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" Height="45">
                    <Grid HorizontalAlignment="Right" Width="Auto" Height="30">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="25" />

                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="10" />
                            <ColumnDefinition Width="Auto" />

                            <ColumnDefinition Width="25" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <!--<ColumnDefinition Width="40"/>-->

                            <!--<ColumnDefinition Width="70*"/>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="25"/>

                            <ColumnDefinition Width="70*"/>
                            <ColumnDefinition Width="50*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="50*"/>

                            <ColumnDefinition Width="25"/>
                            <ColumnDefinition Width="80*"/>
                            <ColumnDefinition Width="80*"/>
                            <ColumnDefinition Width="40"/>-->

                        </Grid.ColumnDefinitions>

                        <!--Visibility="{Binding IsFilterSearchVisible}"-->
                        <!-- Quick Search -->
                        <StackPanel Grid.Column="0" HorizontalAlignment="Center" Margin="0" Orientation="Horizontal" Visibility="{Binding IsFilterSearchVisible}">
                            <dxe:ImageEdit Height="24" Width="24"
                                       ShowMenu="False" ShowBorder="False"
                                       ShowLoadDialogOnClickMode="Never" 
                                       Style="{DynamicResource SearchImageStyle}" />
                            <TextBlock Grid.Column="1" Text="{DynamicResource QuickSearch}" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Left" />
                            <dxe:SearchControl x:Name="searchControl" 
                                           Margin="5 0 0 0"
                                           Height="30"
                                               Width="80"
                                           HorizontalAlignment="Stretch"
                                           VerticalAlignment="Stretch" ShowMRUButton="False"
                                           SearchText="{Binding ActivityFilterCriteria, Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged}" />
                        </StackPanel>

                        <!-- Plant Owner -->
                        <DockPanel Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=CmbPlantOwnerUsers}">
                            <Image Style="{DynamicResource PlantOwnerImageStyle}" Width="24" Height="24" Margin="7,0,3,0" />
                            <TextBlock Text="{DynamicResource CommonPlantOwner}" FontWeight="Bold" Margin="5,2,5,0" />
                        </DockPanel>

                        <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Grid.Column="2" Width="150"
                                      Visibility="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=CmbPlantOwnerUsers}"
                                      ItemsSource="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=PlantOwnerUsersList}" Margin="5,0,5,0"
                                      DisplayMember="ShortName"
                                      EditValue="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=SelectedPlantOwnerUsersList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <dxe:ComboBoxEdit.StyleSettings>
                                <dxe:CheckedComboBoxStyleSettings />
                            </dxe:ComboBoxEdit.StyleSettings>
                            <dxmvvm:Interaction.Triggers>
                                <dxmvvm:EventToCommand EventName="PopupClosed"
                                               Command="{Binding DataContext.PlantOwnerPopupClosedCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                               PassEventArgsToCommand="True" />
                            </dxmvvm:Interaction.Triggers>
                        </dxe:ComboBoxEdit>

                        <!-- Sales Owner -->
                        <DockPanel Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=CmbSalesOwnerUsers}">
                            <Image Style="{DynamicResource OwnerGroupImageStyle}" Width="24" Height="24" Margin="7,0,3,0" />
                            <TextBlock Text="{DynamicResource CommonSalesOwner}" FontWeight="Bold" Margin="5,2,5,0" />
                        </DockPanel>

                        <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Grid.Column="2" Width="150"
                                      Visibility="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=CmbSalesOwnerUsers}"
                                      ItemsSource="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=SalesOwnerUsersList}" Margin="5,0,0,0"
                                      DisplayMember="User.FullName"
                                      EditValue="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=SelectedSalesOwnerUsersList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <dxe:ComboBoxEdit.StyleSettings>
                                <dxe:CheckedComboBoxStyleSettings />
                            </dxe:ComboBoxEdit.StyleSettings>
                            <dxmvvm:Interaction.Triggers>
                                <dxmvvm:EventToCommand EventName="PopupClosed"
                                               Command="{Binding DataContext.SalesOwnerPopupClosedCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                                   PassEventArgsToCommand="True" />
                            </dxmvvm:Interaction.Triggers>
                        </dxe:ComboBoxEdit>

                        <!-- Period -->
                        <DockPanel Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Image Style="{DynamicResource CalendarImageStyle}" Width="16" Height="16" Margin="7,0,3,0" />
                            <TextBlock Text="{DynamicResource AnnualSalesPerformanceViewPeriod}" FontWeight="Bold" Margin="5,0,0,0" />
                        </DockPanel>
                        <TextBlock Text="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=SelectedyearStarDate, StringFormat=d, ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="5" Margin="3,0,0,0" />
                        <TextBlock Text=" - " HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="6" FontWeight="Bold" />
                        <TextBlock Text="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=SelectedyearEndDate, StringFormat=d, ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="7" />

                        <!-- Remaining -->
                        <DockPanel Grid.Column="9" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Image Style="{DynamicResource WatchImageStyle}" Width="16" Height="16" Margin="3,0,3,0" />
                            <TextBlock Text="{DynamicResource AnnualSalesPerformanceViewRemaining}" FontWeight="Bold" Margin="5,0,0,0" />
                        </DockPanel>
                        <DockPanel Grid.Column="10" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0">
                            <TextBlock Text="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=RemainingDays}" />
                            <TextBlock Text="{DynamicResource AnnualSalesPerformanceViewDays}" Margin="3,0,5,0" />
                        </DockPanel>
                    </Grid>
                </DockPanel>

                <Button HorizontalAlignment="Right" Grid.Column="2" Height="40" Width="40" Margin="0,0,5,0"
                         Command="{Binding CommandNewActivityClick}" CommandParameter="{Binding ElementName=ActivityTableView}"
                         IsEnabled="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionEnabled}"
                    >
                    <Button.ToolTip>
                        <TextBlock Text="{DynamicResource ActivityAddViewHeader}" />
                    </Button.ToolTip>
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Style="{ DynamicResource AddButtonImageStyle}" Grid.Column="1" Height="24" Width="24" HorizontalAlignment="Right" Margin="-10" />
                            </Grid>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>

                <Button Content=" " Height="40" Width="40" Grid.Column="3" Command="{Binding RefreshActivityViewCommand}" CommandParameter="{Binding ElementName=ActivityTableView}"
                         HorizontalAlignment="Right" Margin="0,0,5,0"
                         >
                    <Button.ToolTip>
                        <TextBlock Text="{DynamicResource ButtonRefresh}" />
                    </Button.ToolTip>
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Style="{ DynamicResource RefreshButtonImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-10" />
                            </Grid>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>

                <Button Content=" " Height="40" Width="40" HorizontalAlignment="Right" Grid.Column="4" Margin="0,0,5,0"
                         Command="{Binding PrintButtonCommand}" CommandParameter="{Binding ElementName=ActivityTableView}"
                         >
                    <Button.ToolTip>
                        <TextBlock Text="{DynamicResource ButtonPrint}" />
                    </Button.ToolTip>
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Style="{ DynamicResource PrinterButtonImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-10" />
                            </Grid>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>

                <Button Content=" " Height="40" Width="40" HorizontalAlignment="Right" Grid.Column="5" Margin="0,0,5,0"
                         Command="{Binding ExportButtonCommand}" CommandParameter="{Binding ElementName=ActivityTableView}"
                         >
                    <Button.ToolTip>
                        <TextBlock Text="{DynamicResource ButtonExportToExcel}" />
                    </Button.ToolTip>
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Style="{ DynamicResource ExcelExportButtonImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-10" />
                            </Grid>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>
                
                <!--Delete-->
                <Button Content=" " Height="40" Width="40" HorizontalAlignment="Right" Grid.Column="6" Margin="0,0,5,0"
                         Visibility="{Binding IsMultipleDeleteVisible}" IsEnabled="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionEnabled}"
                    Command="{Binding DeleteSelectedRowsButtonCommand}" CommandParameter="{Binding ElementName=ActivityTableView}"
                         >
                    <Button.ToolTip>
                        <TextBlock Text="{DynamicResource ActivityDeleteButton}" />
                    </Button.ToolTip>
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Style="{ DynamicResource DeleteButtonImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-10" />
                              
                            </Grid>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>


                <dx:DropDownButton x:Name="dropdownButton" Content="Dropdown button" 
                                   HorizontalAlignment="Right" Height="40" Width="40" Grid.Column="7" Margin="0,0,5,0" VerticalAlignment="Center">
                    <dx:DropDownButton.Style>
                        <Style>
                            <Setter Property="dx:DropDownButtonBase.ArrowAlignment" Value="Right" />
                            <Setter Property="dx:DropDownButtonBase.ArrowPadding" Value="0" />
                        </Style>
                    </dx:DropDownButton.Style>
                    <Button.ToolTip>
                        <TextBlock Text="Switch View" />
                    </Button.ToolTip>
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Style="{ DynamicResource SwitchActivityGrid}" Grid.Column="0" Height="24" Width="24" Margin="-20" />
                            </Grid>
                        </DataTemplate>
                    </Button.ContentTemplate>
                    <dxb:PopupMenu>
                        <dxb:BarButtonItem Name="GridView" Content="Grid View" Glyph="{DynamicResource SwitchActivityGridview}" Command="{Binding ShowGridViewCommand}" CommandParameter="{Binding ElementName=ActivityTableView}">
                            <dxb:BarButtonItem.Style>
                                <Style>
                                    <Style.Triggers>
                                        <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="True">
                                            <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityGridviewMouseOver}" />
                                        </Trigger>
                                        <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="False">
                                            <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityGridview}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </dxb:BarButtonItem.Style>
                        </dxb:BarButtonItem>
                        <dxb:BarButtonItem Name="CalendarView" Content="Calendar View" Glyph="{DynamicResource SwitchActivityCalendar}" Command="{Binding ShowCalanderviewCommand}" CommandParameter="{Binding ElementName=SchedulerControlTimelineView}">
                            <!--<dxb:BarButtonItem.Style>
                                <Style>
                                    <Style.Triggers>
                                        <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="True">
                                            <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityCalendarMouseOver}" />
                                        </Trigger>
                                        <Trigger Property="dxb:BarButtonItem.IsMouseOver" Value="False">
                                            <Setter Property="dxb:BarButtonItem.Glyph" Value="{DynamicResource SwitchActivityGridview}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </dxb:BarButtonItem.Style>-->
                        </dxb:BarButtonItem>
                    </dxb:PopupMenu>
                </dx:DropDownButton>

            
                <!-- Filter button code -->

                <dx:DropDownButton x:Name="dropdownButton1" Content="Dropdown button" 
                                   Visibility="{Binding IsFilterSearchVisible}"
                                   HorizontalAlignment="Right" Height="40" Width="40" Grid.Column="8" Margin="0,0,5,0" VerticalAlignment="Center">
                    <dx:DropDownButton.Style>
                        <Style>
                            <Setter Property="dx:DropDownButtonBase.ArrowAlignment" Value="Right" />
                            <Setter Property="dx:DropDownButtonBase.ArrowPadding" Value="0" />
                        </Style>
                    </dx:DropDownButton.Style>
                    <Button.ToolTip>
                        <TextBlock Text="Filter" />
                    </Button.ToolTip>
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Style="{ DynamicResource AppointmentFilterImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-20" />
                            </Grid>
                        </DataTemplate>
                    </Button.ContentTemplate>

                    <dx:DropDownButton.PopupContent>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="20" />
                                <RowDefinition Height="35" />
                                <RowDefinition Height="35" />
                                <RowDefinition Height="35" />
                                <RowDefinition Height="35" />
                                <RowDefinition Height="40" />
                                <RowDefinition Height="20" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="20"></ColumnDefinition>
                                <ColumnDefinition Width="100"></ColumnDefinition>
                                <ColumnDefinition Width="200"></ColumnDefinition>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{DynamicResource ActivityTypeFilterHeader}" Width="100" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Left" />
                            <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Width="150" Grid.Column="2" Grid.Row="1" Height="30"
                                      ItemsSource="{Binding DataContext.ActivityTypeList,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5,0,0,0"
                                      DisplayMember="Value"
                                      EditValue="{Binding DataContext.SelectedActivityTask,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <dxe:ComboBoxEdit.StyleSettings>
                                    <dxe:CheckedComboBoxStyleSettings />
                                </dxe:ComboBoxEdit.StyleSettings>
                            </dxe:ComboBoxEdit>

                            <TextBlock Text="{DynamicResource ActivityStatusFilterHeader}" Width="100" Grid.Column="1" Grid.Row="2" HorizontalAlignment="Left" />
                            <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Width="150" Grid.Column="2" Grid.Row="2" Height="30"
                                      ItemsSource="{Binding DataContext.ActivityTaskStatusList,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5,0,0,0"
                                      DisplayMember="Value"
                                      EditValue="{Binding DataContext.SelectedActivityTaskStatus,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <dxe:ComboBoxEdit.StyleSettings>
                                    <dxe:CheckedComboBoxStyleSettings />
                                </dxe:ComboBoxEdit.StyleSettings>
                            </dxe:ComboBoxEdit>

                            <TextBlock Text="{DynamicResource ActivitySalesOwnerFilterHeader}" Width="100" Grid.Column="1" Grid.Row="3" HorizontalAlignment="Left" />
                            <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Width="150" Grid.Column="2" Grid.Row="3" Height="30"
                                      ItemsSource="{Binding DataContext.SalesOwnerList,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5,0,0,0"
                                      DisplayMember="User.FullName"
                                      EditValue="{Binding DataContext.SelectedSalesOwnerList,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <dxe:ComboBoxEdit.StyleSettings>
                                    <dxe:CheckedComboBoxStyleSettings />
                                </dxe:ComboBoxEdit.StyleSettings>
                                <dxmvvm:Interaction.Triggers>
                                    <dxmvvm:EventToCommand EventName="PopupClosed"
                                               Command="{Binding DataContext.CalendarSalesOwnerPopupClosedCommand, RelativeSource={RelativeSource AncestorType=dx:DropDownButton}}" 
                                               PassEventArgsToCommand="True" />
                                </dxmvvm:Interaction.Triggers>
                            </dxe:ComboBoxEdit>

                            <TextBlock Text="{DynamicResource ActivityAccountFilterHeader}" Width="100" Grid.Column="1" Grid.Row="4" HorizontalAlignment="Left" />
                            <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Width="150" Grid.Column="2" Grid.Row="4" Height="30"
                                      ItemsSource="{Binding DataContext.CompaniesList,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5,0,0,0"
                                      DisplayMember="GroupPlantName"
                                      EditValue="{Binding DataContext.SelectedCompaniesList,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <dxe:ComboBoxEdit.StyleSettings>
                                    <dxe:CheckedComboBoxStyleSettings />
                                </dxe:ComboBoxEdit.StyleSettings>
                                <dxmvvm:Interaction.Triggers>
                                    <dxmvvm:EventToCommand EventName="PopupClosed"
                                               Command="{Binding DataContext.CalendarAccountPopupClosedCommand, RelativeSource={RelativeSource AncestorType=dx:DropDownButton}}" 
                                               PassEventArgsToCommand="True" />
                                </dxmvvm:Interaction.Triggers>
                            </dxe:ComboBoxEdit>

                            <DockPanel Height="40" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="1" Grid.Row="5" Grid.ColumnSpan="2">
                                <Button Content="Ok" Width="100" Height="30" Margin="0,0,5,0"
                                        Command="{Binding DataContext.FilterActivityAcceptCommand,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}}"
                                        CommandParameter="{Binding ElementName=dropdownButton1}" />

                                <Button Content="Cancel" Width="100" Height="30" Margin="5,0,0,0" 
                                        Command="{Binding DataContext.FilterActivityCancelCommand,RelativeSource={RelativeSource AncestorType=dx:DropDownButton}}"
                                        CommandParameter="{Binding ElementName=dropdownButton1}" />
                            </DockPanel>

                        </Grid>
                    </dx:DropDownButton.PopupContent>

                </dx:DropDownButton>

                <!-- Filter button code -->

                
            
            </Grid>

            <dxg:GridControl x:Name="activityGrid" Visibility="{Binding IsGridVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                             ItemsSource="{Binding ActivityGridList,Mode=TwoWay}"
                            SelectedItem="{Binding SelectedObjectActivityGrid, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                             Width="Auto" Height="Auto" SelectionMode="Row" FilterString="{Binding MyFilterString}" ImplyNullLikeEmptyStringWhenFiltering="True">
                <dxg:GridControl.Columns>
                    <dxg:GridColumn FieldName="Subject" Header="{DynamicResource ActivitySubjectHeader}" MinWidth="550" BestFitMode="VisibleRows" 
                                    ReadOnly="True" AllowBestFit="True" 
                                    FilterPopupMode="CheckedList" 
                                    />
                    <dxg:GridColumn FieldName="ActivityType" Header="{DynamicResource ActivityTypeHeader}" AllowBestFit="True" 
                                    MinWidth="160" ReadOnly="True" BestFitMode="VisibleRows" 
                                    FilterPopupMode="CheckedList" 
                                    >
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Image Margin="5" Height="16" Width="16">
                                        <Image.Style>
                                            <Style>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityType}" Value="1">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeAppointmentImageStyleInvert}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityType}" Value="2">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeCallImageStyleInvert}" />
                                                    </DataTrigger>

                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityType}" Value="3">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeEmailImageStyleInvert}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityType}" Value="4">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeTaskImageStyleInvert}" />
                                                    </DataTrigger>

                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityType}" Value="5">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeInformationImageStyleInvert}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityType}" Value="6">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypePlannedAppointmentImageStyleInvert}" />
                                                    </DataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeAppointmentImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeAppointmentImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeAppointmentImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeAppointmentImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeAppointmentImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource AcitvityTypeAppointmentImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="2" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeCallImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="2" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeCallImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="3" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeEmailImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="3" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeEmailImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="4" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeTaskImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="4" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeTaskImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="5" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeInformationImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="5" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypeInformationImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="6" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypePlannedAppointmentImageStyle}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityType}" Value="6" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityTypePlannedAppointmentImageStyleInvert}" />
                                                    </MultiDataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                    <TextBlock Text="{Binding RowData.Row.ActivityType}" Margin="5 0" VerticalAlignment="Center" />
                                </StackPanel>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                        <dxg:GridColumn.PrintCellStyle>
                            <Style TargetType="dxe:BaseEdit" BasedOn="{StaticResource {dxgt:TableViewThemeKey ResourceKey=DefaultPrintCellStyle}}">
                                <Setter Property="dxp:ExportSettings.TargetType" Value="Image" />
                                <Setter Property="dxp:ExportSettings.TargetType" Value="Text" />
                                <Setter Property="dxp:ImageExportSettings.ForceCenterImageMode" Value="True" />
                                <Setter Property="dxp:ImageExportSettings.ImageRenderMode" Value="UseImageSource" />
                                <Setter Property="dxp:ImageExportSettings.ImageSource">
                                    <Setter.Value>
                                        <Image Source="{dx:DXImage Image={x:Null}}" Stretch="None" />
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Value}" Value="Appointment">
                                        <Setter Property="dxp:ImageExportSettings.ImageSource">
                                            <Setter.Value>
                                                <Image Source="{DynamicResource AcitvityTypeAppointmentImageStyle}" Height="16" Width="16" HorizontalAlignment="Left" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Value}" Value="Call">
                                        <Setter Property="dxp:ImageExportSettings.ImageSource">
                                            <Setter.Value>
                                                <Image Source="{DynamicResource AcitvityTypeCallImageStyle}" Height="16" Width="16" HorizontalAlignment="Left" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Value}" Value="Email">
                                        <Setter Property="dxp:ImageExportSettings.ImageSource">
                                            <Setter.Value>
                                                <Image Source="{DynamicResource AcitvityTypeEmailImageStyle}" Height="16" Width="16" HorizontalAlignment="Left" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Value}" Value="Task">
                                        <Setter Property="dxp:ImageExportSettings.ImageSource">
                                            <Setter.Value>
                                                <Image Source="{DynamicResource AcitvityTypeTaskImageStyle}" Height="16" Width="16" HorizontalAlignment="Left" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Value}" Value="Tour">
                                        <Setter Property="dxp:ImageExportSettings.ImageSource">
                                            <Setter.Value>
                                                <Image Source="{DynamicResource AcitvityTypeTourImageStyle}" Height="16" Width="16" HorizontalAlignment="Left" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Value}" Value="Information">
                                        <Setter Property="dxp:ImageExportSettings.ImageSource">
                                            <Setter.Value>
                                                <Image Source="{DynamicResource ActivityTypeInformationImageStyle}" Height="16" Width="16" HorizontalAlignment="Left" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Value}" Value="Planned Appointment">
                                        <Setter Property="dxp:ImageExportSettings.ImageSource">
                                            <Setter.Value>
                                                <Image Source="{DynamicResource AcitvityTypeAppointmentImageStyle}" Height="16" Width="16" HorizontalAlignment="Left" />
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </dxg:GridColumn.PrintCellStyle>
                    </dxg:GridColumn>
                    <dxg:GridColumn FieldName="ToDate" Header="{DynamicResource ActivityDueDateHeader}" MinWidth="120" BestFitMode="VisibleRows" 
                                    AllowBestFit="True" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    >
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <UIHelper:CellDecorator>
                                    <Border x:Name="CloseDateBorder" Background="Transparent" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                                        <dxe:DateEdit Name="PART_Editor" Mask="dd/MM/yyyy" ShowClearButton="False" IsTextEditable="False"
                                          MaskUseAsDisplayFormat="True" ShowError="False" ShowErrorToolTip="False" InvalidValueBehavior="AllowLeaveEditor"                                         
                                          MinValue="{Binding Data.ServerDate,ValidatesOnDataErrors=False}">
                                            <dxe:DateEdit.Style>
                                                <Style TargetType="{x:Type dxe:DateEdit}">
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Value="True">
                                                                    <Condition.Binding>
                                                                        <MultiBinding Converter="{UIConverter:CheckDateIsLessThanOtherDate}">
                                                                            <Binding Path="RowData.Row.ToDate" />
                                                                            <Binding Path="RowData.Row.CloseDate" />
                                                                        </MultiBinding>
                                                                    </Condition.Binding>
                                                                </Condition>
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="Foreground" Value="Red" />
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </dxe:DateEdit.Style>
                                        </dxe:DateEdit>
                                    </Border>
                                </UIHelper:CellDecorator>

                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>

                    </dxg:GridColumn>
                    <dxg:GridColumn FieldName="ActivityGridStatus" AllowBestFit="True" 
                                    Header="{DynamicResource ActivityGridStatus}" MinWidth="120" BestFitMode="VisibleRows" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    >
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Image Margin="5 2 2 2" Height="16" Width="16">
                                        <Image.Style>
                                            <Style>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding RowData.Row.ActivityGridStatus}" Value="Completed">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityCompletedStyle}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityGridStatus}" Value="2">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityStatusInProgressInvert}" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding RowData.Row.IdImageActivityGridStatus}" Value="1">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityStatusNotStartedInvert}" />
                                                    </DataTrigger>

                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityGridStatus}" Value="2" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityStatusInProgress}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityGridStatus}" Value="2" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityStatusInProgressInvert}" />
                                                    </MultiDataTrigger>

                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityGridStatus}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="None" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityStatusNotStarted}" />
                                                    </MultiDataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RowData.Row.IdImageActivityGridStatus}" Value="1" />
                                                            <Condition Binding="{Binding RowData.SelectionState}" Value="Focused" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityStatusNotStartedInvert}" />
                                                    </MultiDataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                    <TextBlock Margin="5 0 0 0" Text="{Binding Path=RowData.Row.ActivityGridStatus}" VerticalAlignment="Center" />
                                </StackPanel>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                    </dxg:GridColumn>
                    <!--<dxg:GridColumn FieldName="IsCompleted" Header="{DynamicResource ActivityGridStatus}"  MinWidth="80" Width="80" ReadOnly="True" HorizontalHeaderContentAlignment="Center">
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <Grid HorizontalAlignment="Center">
                                    <Image Margin="5" Height="16" Width="16">
                                        <Image.Style>
                                            <Style>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding RowData.Row.IsCompleted}" Value="1">
                                                        <Setter Property="Image.Source" Value="{DynamicResource ActivityCompletedStyle}"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                </Grid>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                    </dxg:GridColumn>-->
                    <dxg:GridColumn FieldName="CloseDate" Header="{DynamicResource ActivityCloseDate}" MinWidth="120" BestFitMode="VisibleRows" 
                                    AllowBestFit="True" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    />
                    <dxg:GridColumn FieldName="FullName" Header="{DynamicResource ActivityOwnerHeader}" MinWidth="150" BestFitMode="VisibleRows" 
                                    AllowBestFit="True" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    />
                    <dxg:GridColumn Binding="{Binding CustomerName}" Header="{DynamicResource ActivityGridLinkedAccountGroup}" AllowBestFit="True" 
                                    AllowSorting="True" MinWidth="400" BestFitMode="VisibleRows" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    />
                    <dxg:GridColumn Binding="{Binding CompanyName}" Header="{DynamicResource ActivityGridLinkedAccountPlant}" AllowBestFit="True" 
                                    AllowSorting="True" MinWidth="200" BestFitMode="VisibleRows" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    />
                    <dxg:GridColumn FieldName="ActivityAttendeesString" Header="{DynamicResource ActivityAttendiesHeader}" 
                                    UnboundType="String" AllowBestFit="True" 
                                    UnboundExpression="[ActivityAttendeesString]"  
                                    AllowSorting="True" MinWidth="200" BestFitMode="VisibleRows" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    ShowInColumnChooser="True" Visible="False" />
                    <dxg:GridColumn FieldName="ActivityTagsString" Header="{DynamicResource ActivityTagsHeader}" AllowBestFit="True" 
                                    UnboundType="String" UnboundExpression="[ActivityTagsString]" AllowSorting="True" MinWidth="200" BestFitMode="VisibleRows" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    ShowInColumnChooser="True" Visible="False" />
                    <dxg:GridColumn FieldName="Description" Header="{DynamicResource ActivityDescriptionHeader}" AllowBestFit="True" 
                                    AllowSorting="True" MinWidth="250" BestFitMode="VisibleRows" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    ShowInColumnChooser="True" Visible="False" />
                    <dxg:GridColumn FieldName="Location" Header="{DynamicResource ActivityLocationHeader}" AllowSorting="True" AllowBestFit="True" 
                                    MinWidth="250" BestFitMode="VisibleRows" 
                                    ReadOnly="True" FilterPopupMode="CheckedList" 
                                    ShowInColumnChooser="True" Visible="False" />
                    <dxg:GridColumn FieldName="" Header="{x:Null}" Width="*" ReadOnly="True" AllowSorting="False" AllowBestFit="True" 
                                    AllowColumnFiltering="False" AllowEditing="False" ShowInColumnChooser="False" Visible="True" AllowPrinting="False" FilterPopupMode="CheckedList" 
                                    AllowMoving="False" />
                    <dxg:GridColumn Width="40" FieldName="" MaxWidth="40" BestFitWidth="40" AllowSorting="False" HorizontalHeaderContentAlignment="Center" AllowColumnFiltering="False" Fixed="Right" ShowInColumnChooser="False" Visible="True" AllowPrinting="False" FilterPopupMode="CheckedList" 
                                    AllowMoving="False">
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <Button Name="deleteactivity" Command="{Binding DataContext.DeleteActivityCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                     CommandParameter="{Binding RowData.Row}" Content="" IsEnabled="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionEnabled}">
                                    <Button.ContentTemplate>
                                        <DataTemplate>
                                            <Image Height="16" Width="16" Source="/Emdep.Geos.Modules.Crm;component/Assets/Images/Delete.png" />
                                        </DataTemplate>
                                    </Button.ContentTemplate>
                                    <Button.ToolTip>
                                        <TextBlock HorizontalAlignment="Stretch" Text="{DynamicResource ActivityFileDelete}" />
                                    </Button.ToolTip>
                                </Button>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                    </dxg:GridColumn>
                </dxg:GridControl.Columns>

                <dxg:GridControl.TotalSummary>
                    <dxg:GridSummaryItem x:Name="summary" FieldName="Name" SummaryType="Count" DisplayFormat="Total Count: {0}" Visible="True" Alignment="Left" />
                </dxg:GridControl.TotalSummary>

                <dxmvvm:Interaction.Behaviors>
                    <UIHelper:GridSelectingBehavior />
                </dxmvvm:Interaction.Behaviors>

                <dxg:GridControl.View>
                    <dxg:TableView Name="ActivityTableView" NavigationStyle="Row" RowDetailsVisibilityMode="Visible" ShowHorizontalLines="True" ShowSearchPanelMode="Always"
                                       VerticalScrollbarVisibility="Visible" AllowFixedColumnMenu="False" IsColumnChooserVisible="{Binding IsActivityColumnChooserVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                       ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                       ShowFixedTotalSummary="True"                                      
                                       AllowGrouping="False" ShowGroupPanel="False" ShowIndicator="False" SearchPanelHorizontalAlignment="Stretch"
                                        ShowGroupedColumns="False"                                       
                                       AllowFixedGroups="False"
                                       
                        >

                        <dxg:TableView.Resources>
                            <DataTemplate x:Key="ActivityViewCustomPrintHeaderTemplate">
                                <Grid Width="{Binding UsablePageWidth}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="50" />
                                        <ColumnDefinition Width="130" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:TextEdit Text=" " Width="{Binding UsablePageWidth}" Grid.ColumnSpan="3" IsPrintingMode="True" Background="#333E5E" HorizontalAlignment="Stretch" 
                                                      VerticalAlignment="Stretch" Padding="12" Foreground="#FFFFFFFF" Style="{DynamicResource TextEdit20Style}" FontWeight="Bold" Height="50" />
                                    <dxe:TextEdit Text="Activity Report" IsPrintingMode="True" HorizontalAlignment="Stretch" 
                                                      VerticalAlignment="Stretch" Padding="12" Foreground="#FFFFFFFF" Style="{DynamicResource TextEdit20Style}" FontWeight="Bold" />
                                    <Image Source="/Emdep.Geos.Modules.Crm;component/Assets/Images/GeosReportLogo.png" Height="50" Width="80" dxp:ExportSettings.TargetType="Image" Grid.Column="2" />
                                </Grid>
                            </DataTemplate>

                            <DataTemplate x:Key="ActivityViewCustomPrintFooterTemplate">
                                <dxe:TextEdit HorizontalContentAlignment="Center" 
                                                  Width="{Binding Path=UsablePageWidth, Mode=OneWay}" 
                                                  dxp:ExportSettings.TargetType="PageNumber" 
                                                  dxp:PageNumberExportSettings.Kind="NumberOfTotal" 
                                                  dxp:PageNumberExportSettings.Format="Page {0} of {1}" />
                            </DataTemplate>
                        </dxg:TableView.Resources>
                        <Interactive:Interaction.Triggers>
                            <Interactive:EventTrigger EventName="Loaded">
                                <Behaviors:InvokeDelegateCommandAction Command="{Binding CustomCellAppearanceCommand}" 
                              CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=InvokeParameter}" />
                            </Interactive:EventTrigger>
                        </Interactive:Interaction.Triggers>
                        <dxmvvm:Interaction.Behaviors>

                            <dxmvvm:EventToCommand Command="{Binding ActivitiesGridDoubleClickCommand}"
                                                   EventName="MouseDoubleClick" CommandParameter="{Binding ElementName=ActivityTableView}"
                                                   PassEventArgsToCommand="True">
                                <dxmvvm:EventToCommand.EventArgsConverter>
                                    <dx:EventArgsToDataRowConverter />
                                </dxmvvm:EventToCommand.EventArgsConverter>
                            </dxmvvm:EventToCommand>

                            <dxmvvm:EventToCommand EventName="ShowFilterPopup"
                                                       Command="{Binding ActivityAttendeesCustomShowFilterPopup}"
                                                       PassEventArgsToCommand="True" />
                        </dxmvvm:Interaction.Behaviors>

                    </dxg:TableView>
                </dxg:GridControl.View>
            </dxg:GridControl>

            <dxsch:SchedulerControl ActiveViewType="Month" x:Name="SchedulerControlTimelineView" Visibility="{Binding IsCalendarVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">

                <dxsch:SchedulerControl.DayView>
                    <dxsch:DayView AppointmentToolTipVisibility="Standard" AppointmentToolTipContentTemplate="{StaticResource AppointmentToolTipContentTemplate}" 
                                       VerticalAppointmentContentTemplate="{StaticResource AppointmentContentTemplate}">
                        <dxsch:DayView.AppointmentDisplayOptions>
                            <dxsch:SchedulerDayViewAppointmentDisplayOptions StartTimeVisibility="Never" EndTimeVisibility="Never" ShowRecurrence="False" ShowReminder="False" />
                        </dxsch:DayView.AppointmentDisplayOptions>
                    </dxsch:DayView>
                </dxsch:SchedulerControl.DayView>

                <dxsch:SchedulerControl.MonthView>
                    <dxsch:MonthView AppointmentToolTipVisibility="Standard" AppointmentToolTipContentTemplate="{StaticResource AppointmentToolTipContentTemplate}" 
                                       HorizontalAppointmentContentTemplate="{StaticResource AppointmentContentTemplate}">
                        <dxsch:MonthView.AppointmentDisplayOptions>
                            <dxsch:SchedulerMonthViewAppointmentDisplayOptions AppointmentAutoHeight="True" StartTimeVisibility="Never" EndTimeVisibility="Never" ShowRecurrence="False" ShowReminder="False" />
                        </dxsch:MonthView.AppointmentDisplayOptions>
                    </dxsch:MonthView>
                </dxsch:SchedulerControl.MonthView>

                <dxsch:SchedulerControl.WeekView>
                    <dxsch:WeekView AppointmentToolTipVisibility="Standard" AppointmentToolTipContentTemplate="{StaticResource AppointmentToolTipContentTemplate}" 
                                       HorizontalAppointmentContentTemplate="{StaticResource AppointmentContentTemplate}">
                        <dxsch:WeekView.AppointmentDisplayOptions>
                            <dxsch:SchedulerWeekViewAppointmentDisplayOptions AppointmentAutoHeight="True" StartTimeVisibility="Never" EndTimeVisibility="Never" ShowRecurrence="False" ShowReminder="False" />
                        </dxsch:WeekView.AppointmentDisplayOptions>
                    </dxsch:WeekView>
                </dxsch:SchedulerControl.WeekView>


                <dxsch:SchedulerControl.TimelineView>
                    <dxsch:TimelineView AppointmentToolTipVisibility="Standard" AppointmentToolTipContentTemplate="{StaticResource AppointmentToolTipContentTemplate}" 
                                            HorizontalAppointmentContentTemplate="{StaticResource AppointmentContentTemplate}">
                        <dxsch:TimelineView.AppointmentDisplayOptions>
                            <dxsch:SchedulerTimelineViewAppointmentDisplayOptions AppointmentAutoHeight="True" StartTimeVisibility="Never" EndTimeVisibility="Never" ShowReminder="False" ShowRecurrence="True" />
                        </dxsch:TimelineView.AppointmentDisplayOptions>
                        <dxsch:TimelineView.Scales>
                            <dxschcore:TimeScaleCollection>
                                <UIHelper:DisplayWeekInTimelineSchedulerHelper />
                                <dxschcore:TimeScaleWeek />
                                <dxschcore:TimeScaleDay />
                            </dxschcore:TimeScaleCollection>
                        </dxsch:TimelineView.Scales>
                    </dxsch:TimelineView>
                </dxsch:SchedulerControl.TimelineView>

                <dxsch:SchedulerControl.TimeRulerMenuCustomizations>
                    <dxsch:SwitchTimeScalesCaptionBarSubItem IsVisible="False" />
                </dxsch:SchedulerControl.TimeRulerMenuCustomizations>

                <dxsch:SchedulerControl.DefaultMenuCustomizations>
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.NewAppointment}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.NewRecurringAppointment}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.SwitchToWeekView}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.SwitchTimeScale}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.SwitchToFullWeekView}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.NewRecurringAppointment}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.NewRecurringEvent}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.GotoThisDay}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.NewAllDayEvent}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="{x:Static dxsch:SchedulerMenuItemName.GotoDate}" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="TimeScaleVisible" />
                    <dxb:RemoveBarItemAndLinkAction ItemName="TimeScaleEnable" />

                    <!--<dxb:UpdateAction ElementName="{x:Static dxsch:SchedulerMenuItemName.SwitchToMonthView}" PropertyName="IsVisible" Value="{StaticResource False}"/>-->
                    <!--<dxb:UpdateAction ElementName="{x:Static dxsch:SchedulerMenuItemName.SwitchToWeekView}" PropertyName="IsVisible" Value="{StaticResource False}"/>-->
                    <dxb:UpdateAction ElementName="{x:Static dxsch:SchedulerMenuItemName.SwitchToWorkWeekView}" PropertyName="IsVisible" Value="{StaticResource False}" />
                    <dxb:UpdateAction ElementName="{x:Static dxsch:SchedulerMenuItemName.SwitchTimeScale}" PropertyName="IsVisible" Value="{StaticResource False}" />
                </dxsch:SchedulerControl.DefaultMenuCustomizations>

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Loaded">
                        <i:InvokeCommandAction Command="{Binding LoadCommand}" CommandParameter="{Binding ElementName=SchedulerControlTimelineView}" />
                    </i:EventTrigger>
                    <i:EventTrigger EventName="EditAppointmentFormShowing">
                        <behaviors:InvokeDelegateCommandAction Command="{Binding AllowEditAppointmentCommand}" >
                            <behaviors:InvokeDelegateCommandAction.CommandParameter>
                                <MultiBinding Converter="{UIConverter:ConverterForRefresh}">
                                    <Binding ElementName="SchedulerControlTimelineView" />
                                    <Binding Path="InvokeParameter" RelativeSource="{RelativeSource Self}" />
                                </MultiBinding>
                            </behaviors:InvokeDelegateCommandAction.CommandParameter>
                        </behaviors:InvokeDelegateCommandAction> <!--CommandParameter="{Binding InvokeParameter, RelativeSource={RelativeSource Self}}" />-->
                    </i:EventTrigger>
                    <i:EventTrigger EventName="PopupMenuShowing">
                        <behaviors:InvokeDelegateCommandAction Command="{Binding PopupMenuShowingCommand }" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=InvokeParameter}" />
                    </i:EventTrigger>

                </i:Interaction.Triggers>

                <dxmvvm:Interaction.Behaviors>
                    <UIHelper:CustomToolTipImage />
                </dxmvvm:Interaction.Behaviors>
                <!-- 1) Status="Status" using for show is completed image-->
                <!-- 2) Location="Tag" using for show is Activity type image-->
                <dxsch:SchedulerControl.Storage>
                    <dxsch:SchedulerStorage>

                        <dxsch:SchedulerStorage.AppointmentStorage>
                            <dxsch:AppointmentStorage DataSource="{Binding AppointmentsFilteredList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                      Labels="{Binding Labels,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                                <dxsch:AppointmentStorage.Mappings>
                                    <dxsch:AppointmentMapping AllDay="AllDay"
                                                               Start="StartTime"
                                                               End="EndTime"
                                                               Subject="Subject"
                                                               Description="Description"
                                                               Location="Tag"
                                                               Label="Label"
                                                               Status="Status"
                                                               AppointmentId="IdOffer"
                                                               RecurrenceInfo="Description"
                                                               ReminderInfo="Description"
                                                               ResourceId="ResourceId"
                                                               Type="EventType" />
                                </dxsch:AppointmentStorage.Mappings>

                                <dxsch:AppointmentStorage.CustomFieldMappings>
                                    <dxsch:SchedulerCustomFieldMapping Name="TooltipTitle" Member="TooltipTitle" ValueType="String" />
                                    <dxsch:SchedulerCustomFieldMapping Name="TooltipSubject" Member="TooltipSubject" ValueType="String" />
                                    <dxsch:SchedulerCustomFieldMapping Name="OwnerInfo" Member="Owner" ValueType="String" />
                                    <dxsch:SchedulerCustomFieldMapping Name="Picture" Member="Owner" ValueType="Object" />
                                </dxsch:AppointmentStorage.CustomFieldMappings>
                            </dxsch:AppointmentStorage>
                        </dxsch:SchedulerStorage.AppointmentStorage>

                        <!--region #ResourceMappings-->
                        <dxsch:SchedulerStorage.ResourceStorage>
                            <dxsch:ResourceStorage DataSource="{Binding ResourceStorageList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <dxsch:ResourceStorage.Mappings>
                                    <dxsch:ResourceMapping Caption="Model" Id="Id" Image="Picture" />
                                </dxsch:ResourceStorage.Mappings>
                            </dxsch:ResourceStorage>
                        </dxsch:SchedulerStorage.ResourceStorage>
                        <!--endregion #ResourceMappings-->
                    </dxsch:SchedulerStorage>
                </dxsch:SchedulerControl.Storage>
            </dxsch:SchedulerControl>

        </DockPanel>
    </Grid>
</UserControl>
