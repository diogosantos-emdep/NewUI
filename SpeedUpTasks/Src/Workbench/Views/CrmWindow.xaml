<UserControl xmlns:Views="clr-namespace:Workbench.Views"  
             x:Class="Workbench.Views.CrmWindow"
             xmlns:ViewModels="clr-namespace:Workbench.ViewModels"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d"
             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
             xmlns:Helpers="clr-namespace:Emdep.Geos.Modules.Crm.Views;assembly=Emdep.Geos.Modules.Crm"
             xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
            xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:dxn="http://schemas.devexpress.com/winfx/2008/xaml/navbar"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
             xmlns:dxa="http://schemas.devexpress.com/winfx/2008/xaml/accordion"
             xmlns:dxat="http://schemas.devexpress.com/winfx/2008/xaml/accordion/themekeys"
             xmlns:CRMCommon="clr-namespace:Emdep.Geos.Modules.Crm;assembly=Emdep.Geos.Modules.Crm"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
             d:DesignHeight="300" d:DesignWidth="300">

    <!--<Grid>
        <Views:CRMMainView />
    </Grid>-->

    <UserControl.DataContext>
        <ViewModels:CrmWindowViewModel/>
    </UserControl.DataContext>
        <Grid >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <dxdo:DockLayoutManager Name="dockManager1">

            <dxdo:LayoutGroup x:Name="rootMainGroup" Orientation="Horizontal" Grid.Column="0" BorderThickness="0" >
                <dxdo:LayoutPanel x:Name="documentGroup1" ShowCaption="False" ShowCloseButton="False">
                    <Grid Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <dxwui:PageAdornerControl Header="{Binding ModuleName }" Height="50"
                                  Grid.Row="0" Grid.RowSpan="2" Grid.Column="0"
                                  Visibility="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=TileBarVisibility}"
                                  VerticalAlignment="Top" HorizontalAlignment="Left" Padding="0,-38,0,0" >
                            <dxwui:PageAdornerControl.HeaderTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <ContentPresenter Content="{Binding}"/>

                                        <!--<StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Column="1">
                            <dxwui:NavigationButton FontSize="14" Margin="10, 0, 0, 0" Content="Workshop Assembly" NavigateTo="DashboardView"/>
                            <dxwui:NavigationButton FontSize="14" Margin="10, 0, 0, 0" Content="Desgin" NavigateTo="Workshop"/>
                        </StackPanel>-->

                                    </Grid>
                                </DataTemplate>
                            </dxwui:PageAdornerControl.HeaderTemplate>
                        </dxwui:PageAdornerControl>



                        <Button Grid.Row="0" Grid.Column="1" Content="X" Height="20"
                Command="{Binding HideTileBarButtonClickCommand}"
                VerticalAlignment="Top"
                Background="Transparent"
                BorderBrush="Transparent"
                BorderThickness="0"
                Width="20">
                            <Button.ToolTip>
                                <TextBlock Text="{Binding ShowHideMenuButtonToolTip}"/>
                            </Button.ToolTip>
                            <Button.ContentTemplate>
                                <DataTemplate>
                                    <Image Height="20"
                           Width="20"
                           Margin="-10"
                           VerticalAlignment="Stretch"
                           HorizontalAlignment="Right"
                           Style="{DynamicResource TileBarButtonImageStyle}"  />
                                </DataTemplate>
                            </Button.ContentTemplate>
                        </Button>
                        
                        <Helpers:CrmMainView Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" />



                        
                    </Grid>

                </dxdo:LayoutPanel>

            </dxdo:LayoutGroup>
            
            

            <dxdo:DockLayoutManager.AutoHideGroups>

                    <!--Create one AutoHideGroup on the right-->

                    <!--Shortcuts-->
                <dxdo:AutoHideGroup DockType="Right" AutoHideSize="300,200">
                    <dxdo:LayoutPanel Caption="{DynamicResource Shortcuts}" CaptionImage="{DynamicResource ShortcutImageImageSource}" ItemWidth="330">

                        <dxa:AccordionControl x:Name="accordionControl">                            <dxa:AccordionItem IsExpanded="True" >                                <dxa:AccordionItem.Header>                                    <StackPanel Orientation="Horizontal">
                                        <Image  Height="25" Width="25" Style="{ DynamicResource AddShortcutImageStyle}" />
                                        <TextBlock   Text="{DynamicResource Preference_Create}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" FontWeight="Bold" Margin="10,0,0,0"/>
                                    </StackPanel>                                </dxa:AccordionItem.Header>                                <dxa:AccordionItem Uid="Opportunity">                                <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Opportunity-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource OpportunityShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource ActivityOpportunity}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center">
                                                
                                            </TextBlock>
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                                Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Opportunity}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                            </Grid>                                </dxa:AccordionItem.Header>                                                                    </dxa:AccordionItem>                                <dxa:AccordionItem Uid="Contact">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Contact-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource ContactShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource CustomerContactHeader}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                 Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Contact}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                                <dxa:AccordionItem Uid="Account">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Account-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource AccountShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource ActivityAccount}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Account}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                                <dxa:AccordionItem Uid="Appointment">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Appointment-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource AppointmentShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource ShortcutAppointment}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Appointment}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                                <dxa:AccordionItem Uid="Call">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Call-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource CallShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource ShortcutCall}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Call}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                                <dxa:AccordionItem Uid="Task">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Task-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource TaskShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource ShortcutTask}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Task}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                                <dxa:AccordionItem Uid="Email">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Email-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource EmailShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource CustomerAddViewEmail}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Email}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                                <dxa:AccordionItem Uid="Action">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--Action-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource ActionShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource CommonAction}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=Action}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                            </dxa:AccordionItem>                            <dxa:AccordionItem IsExpanded="True">                                <dxa:AccordionItem.Header>                                    <StackPanel Orientation="Horizontal">
                                        <Image Height="25" Width="25" Style="{ DynamicResource SearchShortcutImageStyle}" />
                                        <TextBlock Text="{DynamicResource Preference_Search}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" FontWeight="Bold" Margin="10,0,0,0"/>
                                    </StackPanel>                                </dxa:AccordionItem.Header>                                <dxa:AccordionItem Uid="SearchOpportunityOrOrder">                                    <dxa:AccordionItem.Header>                                        <Grid>                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition Width="10"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <!--SearchOpportunityOrOrder-->
                                            <Image Grid.Row="1" Grid.Column="1" Height="25" Width="25" Style="{ DynamicResource OpportunityShortcutImageStyle}" />
                                            <TextBlock Grid.Row="1" Grid.Column="3"  Text="{DynamicResource ShortcutSearchOpportunityOrOrder}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                            <TextBlock Grid.Row="1" Grid.Column="5" 
                                            Text="{Binding Source={x:Static CRMCommon:CRMCommon.Instance}, Path=SearchOpportunityOrOrder}" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            </TextBlock>                                        </Grid>                                    </dxa:AccordionItem.Header>                                </dxa:AccordionItem>                            </dxa:AccordionItem>                            <dxmvvm:Interaction.Behaviors>                                <dxmvvm:EventToCommand EventName="MouseDoubleClick" Command="{Binding Opportunity_ClickCommand}"                                                        CommandParameter="{Binding ElementName=accordionControl}"/>                            </dxmvvm:Interaction.Behaviors>                        </dxa:AccordionControl>

                        </dxdo:LayoutPanel>
                    </dxdo:AutoHideGroup>

                </dxdo:DockLayoutManager.AutoHideGroups>
            </dxdo:DockLayoutManager>

    </Grid>

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

</UserControl>
