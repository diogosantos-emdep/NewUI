<UserControl
    
    x:Class="Emdep.Geos.Workbench.Updater.Views.SoftwareUpdateView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
    x:Name="objucNewSoftwareUpdate" 
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
    xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"      
    xmlns:local="clr-namespace:Emdep.Geos.Workbench.Downloader.ViewModels"
    xmlns:gif="http://wpfanimatedgif.codeplex.com"
    xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
    Style="{DynamicResource UserControlUpdaterBackgroundStyle}">

    <UserControl.Resources>
        <Image x:Key="MyImage" Source="/GeosWorkbenchInstaller;component/Assets/Images/Minimize.png"/>
    </UserControl.Resources>

    <Grid Margin="0,0,0,0" Height="316" Width="Auto" >
        <Grid.RowDefinitions>
            <RowDefinition Height="35"/>
            <RowDefinition Height="22"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="0"/>
            <RowDefinition Height="25"/>
            <RowDefinition Height="25"/>
            <RowDefinition Height="42"/>
            <RowDefinition Height="32"/>
            <RowDefinition Height="67"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="50*"></ColumnDefinition>
            <ColumnDefinition Width="67"></ColumnDefinition>
            <ColumnDefinition Width="200"></ColumnDefinition>
            <ColumnDefinition Width="293"></ColumnDefinition>
            <ColumnDefinition Width="50*"></ColumnDefinition>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Button Grid.Row="0" Grid.Column="4" Command="{Binding UpdaterWindowMinimizeCommand}" Height="30" Width="100" Margin="0,-42,-43,0"
                HorizontalAlignment="Right" VerticalAlignment="Top"  Visibility="Visible" >
            <Button.Template>
                <ControlTemplate>
                    <Image  Source="{DynamicResource MinimizeImageSource}" Height="16" />
                </ControlTemplate>
            </Button.Template>
            <Button.ToolTip>
                <ToolTip Content="Minimize" />
            </Button.ToolTip>
        </Button>
        <Image  Grid.RowSpan="2" Grid.Column="1" HorizontalAlignment="Stretch" Height="54"   VerticalAlignment="Top" Source="/GeosWorkbenchInstaller;component/Assets/Images/Download.png" Margin="3,0"/>
        <TextBlock  Grid.Row="0"  Style="{DynamicResource VersionTitle}" Grid.Column="2" HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,0,0,0"  Grid.ColumnSpan="2" TextWrapping="WrapWithOverflow" />
        <Label Grid.Column="2" HorizontalAlignment="Stretch" Margin="0,30,0,0" Grid.ColumnSpan="2"  Grid.RowSpan="2"  IsTabStop="False" Style="{DynamicResource labelShowUpdater}">
            <!--<Label.Resources>
                <Style TargetType="{x:Type Label}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding VersionTitle}" Value="0">
                            <Setter Property="Content" Value="{DynamicResource ShowUpdater}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding VersionTitle}" Value="1">
                            <Setter Property="Content" Value="{DynamicResource ShowUpdater}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding VersionTitle}" Value="2">
                            <Setter Property="Content" Value="{DynamicResource VersionTitleAlreadyUpdated}"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Label.Resources>-->
        </Label>
        <Label Style="{DynamicResource LabelForegroundstyle}" Grid.Column="2" Grid.Row="4"   Content="{DynamicResource InstalledVersion}" HorizontalAlignment="Right"  Width="120"  Height="25" VerticalAlignment="Top" Visibility="{Binding LabelInstalledVersionVisibility,Mode=TwoWay}" IsTabStop="False" ></Label>
        <Label Style="{DynamicResource LabelForegroundstyle}" Grid.Column="3" Grid.Row="4" Content="{Binding InstalledAssemblyVersion, Mode=TwoWay}" HorizontalAlignment="Left" Margin="3,0,0,0" Width="100" IsTabStop="False"></Label>
        <Label Style="{DynamicResource LabelForegroundstyle}" Grid.Column="2" Grid.Row="5" Content="{DynamicResource LatestVersion}" HorizontalAlignment="Right"  Width="120"  IsTabStop="False"></Label>
        <Label Style="{DynamicResource LabelForegroundstyle}" Grid.Column="3" Grid.Row="5" Content="{Binding LatestAssemblyVersion}" HorizontalAlignment="Left" Margin="3,0,0,0" Width="100"  IsTabStop="False"></Label>
        <Button  Content="{DynamicResource DownloadNow}" Height="30" Width="150"  HorizontalAlignment="Right" VerticalAlignment="Top" Grid.Column="2"  Grid.Row="7" Margin="0,0,15,0"  Command="{Binding DownloadButtonCommand, Mode=TwoWay}" HorizontalContentAlignment="Center" Visibility="{Binding DownloadNowVisibility}" Grid.RowSpan="2"  TabIndex="0" />
        <Button Content="{DynamicResource DownloadLater}" Height="30" Width="150"   HorizontalAlignment="Center" VerticalAlignment="Top"  Grid.Column="3"  Grid.Row="7" Margin="61,0,62,0" Command="{Binding DownloadLaterButtonCommand}"  HorizontalContentAlignment="Center" Visibility="{Binding DownloadLaterVisibility}" IsEnabled="{Binding DownloadLaterEnabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.RowSpan="2" TabIndex="1"/>
        <!--<Button Content="{DynamicResource VersionTitleAccept}" Height="30" Width="130" HorizontalAlignment="Center" VerticalAlignment="Center" Command="{Binding AcceptDownloadButtonCommand}"  Margin="-250,-5,0,0"  Grid.Column="2"  Grid.Row="7"  TabIndex="3" Visibility="{Binding AcceptButtonVisibility}" />-->
        <Button Content="{DynamicResource SoftwareUpdateViewRepair}" Height="30" Width="130" HorizontalAlignment="Left" VerticalAlignment="Center" Command="{Binding RepairButtonCommand}"  Margin="-200,-5,0,0"  Grid.Column="3"  Grid.Row="7"  TabIndex="3" Visibility="{Binding RepairButtonVisibility}"  />
        <Button Content="{DynamicResource SoftwareUpdateViewRestore}" Height="30" Width="130" HorizontalAlignment="Center" VerticalAlignment="Center" Command="{Binding RestoreButtonCommand}"  Margin="-250,-5,0,0"  Grid.Column="3"  Grid.Row="7"  TabIndex="3" Visibility="{Binding RestoreButtonVisibility}" />
        <Button Content="{DynamicResource SoftwareUpdateViewCancel}" Height="30" Width="130" HorizontalAlignment="Right" VerticalAlignment="Center" Command="{Binding CancelButtonCommand}"  Margin="0,-5,50,0"  Grid.Column="3"  Grid.Row="7"  TabIndex="3" Visibility="{Binding CloseButtonVisibility}" />
        <StackPanel  Grid.Column="1"  Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  Name="downloadpanel"  Grid.ColumnSpan="3" Grid.Row="6" Margin="5,0,0,0" Visibility="{Binding ProgressbarVisibility, Mode=TwoWay}" Grid.RowSpan="4" Panel.ZIndex="1"   >

            <dxe:ProgressBarEdit x:Name="progressBar" ContentDisplayMode="Value" HorizontalAlignment="Center" VerticalAlignment="Center" Width="465"
                                           EditValue="{Binding Value}" DisplayFormatString="{}{0}%" Margin="14,0" Foreground="Black" 
                                           HorizontalContentAlignment="Center"  Minimum="0" Maximum="100"  Value="{Binding ProgressBarvalue}"/>

            <Label Style="{DynamicResource LabelForegroundstyle}" Content="{Binding DownloadLogs}" Height="25"   Name="progressbarImage"  HorizontalContentAlignment="Left" VerticalContentAlignment="Top"  Margin="46,0,0,0"></Label>
            <Image  gif:ImageBehavior.RepeatBehavior="Forever"  Visibility="{Binding ProgressbarImageVisibility}" HorizontalAlignment="Center" gif:ImageBehavior.AnimatedSource="/GeosWorkbenchInstaller;component/Assets/Images/DownloadProgress.gif" Height="30"  Width="120" />

            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Orientation="Vertical" Height="31" Margin="182,20" >
                <Button x:Name="BtnDone" Content="{DynamicResource Done}"  Height="30" Width="130" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,10" Command="{Binding DoneButtonCommand}" Visibility="{Binding DoneButtonVisibility}" />
                <Button Content="{DynamicResource Cancel}" Height="30" Width="130" HorizontalAlignment="Center" VerticalAlignment="Center" Command="{Binding CancelDownloadButtonCommand}" Visibility="{Binding CancelButtonVisibility}" Margin="0,-50,0,0" IsEnabled="{Binding IsEnabledCancel}" TabIndex="3" />
            </StackPanel>
        </StackPanel>
        <Border  BorderThickness="0,1,0,0" BorderBrush="#747373"  Grid.Row="9" Grid.ColumnSpan="3" Grid.Column="1" >
            <StackPanel Margin="0,6,0,10"  Orientation="Horizontal">              
                <Button   Content="{DynamicResource ReleaseNotes}"  Command="{Binding  ReleaseNoteButtonCommand ,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"    HorizontalAlignment="Left" VerticalAlignment="Bottom" Height="30"  Width="150" Visibility="{Binding ReleaseNotesVisibility}" TabIndex="4"/>
                <Button  HorizontalAlignment="Right" Command="{Binding UserConfigurationShowWindowCommand, UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"  Visibility="{Binding ConfigurationButtonVisibility}"  >
                    <Button.Template>
                        <ControlTemplate>
                            <Image  Style="{DynamicResource SettingImagePath}" Margin="370,0,0,0" HorizontalAlignment="Right"/>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
