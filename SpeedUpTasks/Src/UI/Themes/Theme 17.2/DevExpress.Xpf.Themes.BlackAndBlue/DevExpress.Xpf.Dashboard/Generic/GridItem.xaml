<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys" xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid" xmlns:dxdash="http://schemas.devexpress.com/winfx/2008/xaml/dashboard" xmlns:dxdashi="http://schemas.devexpress.com/winfx/2008/xaml/dashboard/internal" xmlns:dxdasht="http://schemas.devexpress.com/winfx/2008/xaml/dashboard/themekeys" xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys" xmlns:dxci="http://schemas.devexpress.com/winfx/2008/xaml/core/internal" xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">

    <dxdash:GridCustomSummaryArgsConverter x:Key="customSummaryArgsConverter" />
    <dxdash:MouseButtonEventArgsConverter x:Key="mouseButtonEventArgsConverter" />

    <Style TargetType="dxg:GridColumn" x:Key="DefaultDashboardColumnStyle">
        <Setter Property="FieldName" Value="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnViewModel.DataId, RelativeSource={RelativeSource Self}}" />
        <Setter Property="Header" Value="{Binding ColumnViewModel.Caption}" />
        <Setter Property="AllowColumnFiltering" Value="{Binding AllowFiltering}" />
        <Setter Property="EditSettings" Value="{Binding Converter={dxdash:GridColumnConverter}}" />
        <Setter Property="Width">
            <Setter.Value>
                <MultiBinding>
                    <MultiBinding.Bindings>
                        <Binding Path="ColumnViewModel.FixedWidth" />
                        <Binding Path="ColumnViewModel.Weight" />
                    </MultiBinding.Bindings>
                    <MultiBinding.Converter>
                        <dxdash:GridColumnWidthConverter />
                    </MultiBinding.Converter>
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style>
    <dxdash:ColumnGeneratorTemplateSelector x:Key="ColumnGeneratorTemplateSelectorKey">
        <dxdash:ColumnGeneratorTemplateSelector.DefaultDashboardColumnTemplate>
            <DataTemplate>
                <ContentControl>
                    <dxg:GridColumn Loaded="{DXEvent Handler='OnLoaded(@sender)'}" Style="{StaticResource ResourceKey=DefaultDashboardColumnStyle}" />
                </ContentControl>
            </DataTemplate>
        </dxdash:ColumnGeneratorTemplateSelector.DefaultDashboardColumnTemplate>
        <dxdash:ColumnGeneratorTemplateSelector.HiddenColumnTemplate>
            <DataTemplate>
                <ContentControl>
                    <dxg:GridColumn Visible="False" FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnViewModel.DataId, RelativeSource={RelativeSource Self}}" />
                </ContentControl>
            </DataTemplate>
        </dxdash:ColumnGeneratorTemplateSelector.HiddenColumnTemplate>
        <dxdash:ColumnGeneratorTemplateSelector.DeltaTemplate>
            <DataTemplate>
                <ContentControl>
                    <dxg:GridColumn Style="{StaticResource ResourceKey=DefaultDashboardColumnStyle}">
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <DockPanel>
                                    <Image DockPanel.Dock="Right" Stretch="None" Width="22">
                                        <Image.Source>
                                            <MultiBinding>
                                                <MultiBinding.Bindings>
                                                    <Binding Path="RowData.RowHandle.Value" />
                                                    <Binding Path="Column" />
                                                    <Binding Path="View.Grid" />
                                                </MultiBinding.Bindings>
                                                <MultiBinding.Converter>
                                                    <dxdash:GridDeltaImageConverter />
                                                </MultiBinding.Converter>
                                            </MultiBinding>
                                        </Image.Source>
                                    </Image>
                                    <dxe:TextEdit x:Name="PART_Editor" HorizontalAlignment="Right">
                                        <dxe:TextEdit.Foreground>
                                            <MultiBinding>
                                                <Binding Path="RowData.RowHandle.Value" />
                                                <Binding Path="Column" />
                                                <Binding Path="View.Grid" />
                                                <MultiBinding.Converter>
                                                    <dxdash:GridDeltaTextColorConverter />
                                                </MultiBinding.Converter>
                                            </MultiBinding>
                                        </dxe:TextEdit.Foreground>
                                    </dxe:TextEdit>
                                </DockPanel>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                    </dxg:GridColumn>
                </ContentControl>
            </DataTemplate>
        </dxdash:ColumnGeneratorTemplateSelector.DeltaTemplate>
        <dxdash:ColumnGeneratorTemplateSelector.SparklineTemplate>
            <DataTemplate>
                <ContentControl>
                    <dxg:GridColumn Style="{StaticResource ResourceKey=DefaultDashboardColumnStyle}">
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <DockPanel>
                                    <dxe:SparklineEdit EditValue="{Binding Path=Value, Mode=OneWay}" StyleSettings="{Binding Path=Column.DataContext, Converter={dxdash:GridSparklineTypeConverter}}" />
                                </DockPanel>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                    </dxg:GridColumn>
                </ContentControl>
            </DataTemplate>
        </dxdash:ColumnGeneratorTemplateSelector.SparklineTemplate>
        <dxdash:ColumnGeneratorTemplateSelector.StartEndSparklineTemplate>
            <DataTemplate>
                <ContentControl>
                    <dxg:GridColumn Style="{StaticResource ResourceKey=DefaultDashboardColumnStyle}">
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <DockPanel>
                                    <Decorator Width="{Binding Path=Column.(dxdash:GridSparklineEditBehavior.StartElementWidth)}">
                                        <TextBlock TextAlignment="Right" Style="{DynamicResource {dxet:TextEditThemeKey ResourceKey=TextBlockInplaceStyle}}">
                                            <TextBlock.Text>
                                                <MultiBinding>
                                                    <Binding Path="RowData.RowHandle.Value" />
                                                    <Binding Path="Column" />
                                                    <MultiBinding.Converter>
                                                        <dxdash:GridSparklineStartValueConverter />
                                                    </MultiBinding.Converter>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </Decorator>
                                    <Decorator DockPanel.Dock="Right" Width="{Binding Path=Column.(dxdash:GridSparklineEditBehavior.EndElementWidth)}">
                                        <TextBlock TextAlignment="Left" DockPanel.Dock="Right" Style="{DynamicResource {dxet:TextEditThemeKey ResourceKey=TextBlockInplaceStyle}}">
                                            <TextBlock.Text>
                                                <MultiBinding>
                                                    <Binding Path="RowData.RowHandle.Value" />
                                                    <Binding Path="Column" />
                                                    <MultiBinding.Converter>
                                                        <dxdash:GridSparklineEndValueConverter />
                                                    </MultiBinding.Converter>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </Decorator>
                                    <dxe:SparklineEdit EditValue="{Binding Path=Value, Mode=OneWay}" StyleSettings="{Binding Path=Column.DataContext, Converter={dxdash:GridSparklineTypeConverter}}" />
                                </DockPanel>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                        <dxmvvm:Interaction.Behaviors>
                            <dxdash:GridSparklineEditBehavior>
                                <dxdash:GridSparklineEditBehavior.StartValueTemplate>
                                    <DataTemplate>
                                        <dxdash:GridBestFitDecorator>
                                            <TextBlock Style="{DynamicResource {dxet:TextEditThemeKey ResourceKey=TextBlockInplaceStyle}}">
                                                <TextBlock.Text>
                                                    <MultiBinding>
                                                        <Binding Path="RowData.RowHandle.Value" />
                                                        <Binding Path="Column" />
                                                        <MultiBinding.Converter>
                                                            <dxdash:GridSparklineStartValueConverter />
                                                        </MultiBinding.Converter>
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </dxdash:GridBestFitDecorator>
                                    </DataTemplate>
                                </dxdash:GridSparklineEditBehavior.StartValueTemplate>
                                <dxdash:GridSparklineEditBehavior.EndValueTemplate>
                                    <DataTemplate>
                                        <dxdash:GridBestFitDecorator>
                                            <TextBlock Style="{DynamicResource {dxet:TextEditThemeKey ResourceKey=TextBlockInplaceStyle}}">
                                                <TextBlock.Text>
                                                    <MultiBinding>
                                                        <Binding Path="RowData.RowHandle.Value" />
                                                        <Binding Path="Column" />
                                                        <MultiBinding.Converter>
                                                            <dxdash:GridSparklineEndValueConverter />
                                                        </MultiBinding.Converter>
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </dxdash:GridBestFitDecorator>
                                    </DataTemplate>
                                </dxdash:GridSparklineEditBehavior.EndValueTemplate>
                            </dxdash:GridSparklineEditBehavior>
                        </dxmvvm:Interaction.Behaviors>
                    </dxg:GridColumn>
                </ContentControl>
            </DataTemplate>
        </dxdash:ColumnGeneratorTemplateSelector.StartEndSparklineTemplate>
    </dxdash:ColumnGeneratorTemplateSelector>
    <DataTemplate x:Key="TotalSummaryGeneratorTemplateKey">
        <ContentControl>
            <dxg:GridSummaryItem SummaryType="Custom" DisplayFormat="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Total.Caption, RelativeSource={RelativeSource Self}}" FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).DataId, RelativeSource={RelativeSource Self}}" Tag="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Total.DataId, RelativeSource={RelativeSource Self}}" />
        </ContentControl>
    </DataTemplate>
    
    <DataTemplate x:Key="SimpleTemplate">
        <ContentControl>
            <dxg:FormatCondition ApplyToRow="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Rule.ApplyToRow, RelativeSource={RelativeSource Self}}" Expression="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Expression, RelativeSource={RelativeSource Self}}" FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Rule.ApplyToDataId, RelativeSource={RelativeSource Self}}" Format="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Format, RelativeSource={RelativeSource Self}}" />
        </ContentControl>
    </DataTemplate>
    <DataTemplate x:Key="BarTemplate">
        <ContentControl>
            <dxg:DataBarFormatCondition FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Rule.ApplyToDataId, RelativeSource={RelativeSource Self}}" Expression="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Expression, RelativeSource={RelativeSource Self}}" SelectiveExpression="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).SelectiveExpression, RelativeSource={RelativeSource Self}}" Format="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Format, RelativeSource={RelativeSource Self}}">
            </dxg:DataBarFormatCondition>
        </ContentControl>
    </DataTemplate>
    <dxdashi:FormatConditionGeneratorTemplateSelector x:Key="formatConditionGeneratorTemplateSelector" SimpleTemplate="{StaticResource SimpleTemplate}" BarTemplate="{StaticResource BarTemplate}" />
    
    <Style x:Key="{dxdasht:GridItemThemeKey ResourceKey=GridViewStyle}" TargetType="{x:Type dxg:TableView}">
        <Setter Property="AllowGrouping" Value="False" />
        <Setter Property="ShowGroupPanel" Value="False" />
        <Setter Property="AllowEditing" Value="False" />
        <Setter Property="AllowColumnMoving" Value="False" />
        <Setter Property="IsColumnMenuEnabled" Value="False" />
        <Setter Property="IsTotalSummaryMenuEnabled" Value="False" />
        <Setter Property="NavigationStyle" Value="{Binding NavigationStyle}" />
        <Setter Property="EnableSelectedRowAppearance" Value="{Binding IsInteractivityEnabled}" />
        <Setter Property="FormatConditionsSource" Value="{Binding FormatConditions}" />
        <Setter Property="FormatConditionGeneratorTemplateSelector" Value="{StaticResource formatConditionGeneratorTemplateSelector}" />
        <Setter Property="AllowCellMerge" Value="{Binding ViewModel.AllowCellMerge}" />
        <Setter Property="ShowHorizontalLines" Value="{Binding ViewModel.ShowHorizontalLines}" />
        <Setter Property="ShowVerticalLines" Value="{Binding ViewModel.ShowVerticalLines}" />
        <Setter Property="ShowColumnHeaders" Value="{Binding ViewModel.ShowColumnHeaders}" />
        <Setter Property="UseEvenRowBackground" Value="{Binding ViewModel.EnableBandedRows}" />
        <Setter Property="ShowTotalSummary" Value="{Binding HasTotals}" />
    </Style>

    <DataTemplate x:Key="{dxdasht:GridItemThemeKey ResourceKey=GridViewTemplate}">
        <dxg:TableView Style="{Binding Path=(dxdash:GridDashboardLayoutItem.GridViewStyle), RelativeSource={RelativeSource Self}}" />
    </DataTemplate>
    
    
    <DataTemplate x:Key="{dxdasht:GridItemThemeKey ResourceKey=Template}">
        <dxg:GridControl Style="{Binding Path=(dxdash:DashboardLayoutItem.ViewStyle), RelativeSource={RelativeSource TemplatedParent}}" />
    </DataTemplate>

    <Style x:Key="{dxdasht:GridItemThemeKey ResourceKey=ViewStyle}" TargetType="{x:Type dxg:GridControl}">
        <Setter Property="ColumnsSource" Value="{Binding Columns}" />
        <Setter Property="ItemsSource" Value="{Binding Data}" />
        <Setter Property="SelectionMode" Value="{Binding SelectionMode}" />
        <Setter Property="SelectedItems" Value="{Binding SelectedItems}" />
        <Setter Property="CurrentItem" Value="{Binding CurrentItem, Mode=TwoWay}" />
        <Setter Property="TotalSummarySource" Value="{Binding Totals}" />
        <Setter Property="AllowInitiallyFocusedRow" Value="{Binding AllowInitiallyFocusedRow}" />
        <Setter Property="TotalSummaryGeneratorTemplate" Value="{StaticResource TotalSummaryGeneratorTemplateKey}" />
        <Setter Property="ColumnGeneratorTemplateSelector" Value="{StaticResource ColumnGeneratorTemplateSelectorKey}" />
        <Setter Property="ShowBorder" Value="False" />
        <Setter Property="dxmvvm:Interaction.BehaviorsTemplate">
            <Setter.Value>
                <DataTemplate>
                    <ItemsControl>
                        <dxdash:GridItemViewGenerator GridViewTemplate="{DynamicResource {dxdasht:GridItemThemeKey ResourceKey=GridViewTemplate}}" />
                        <dxmvvm:EventToCommand EventName="CustomColumnDisplayText" Command="{Binding CustomColumnDisplayTextCommand}" PassEventArgsToCommand="True" />
                        <dxmvvm:EventToCommand EventName="CustomSummary" Command="{Binding CustomSummaryCommand}" EventArgsConverter="{StaticResource customSummaryArgsConverter}" PassEventArgsToCommand="True" />
                        <dxmvvm:EventToCommand EventName="MouseDoubleClick" Command="{Binding MouseDoubleClickCommand}" EventArgsConverter="{StaticResource mouseButtonEventArgsConverter}" PassEventArgsToCommand="True" />
                        <dxmvvm:EventToCommand EventName="MouseUp" Command="{Binding MouseUpCommand}" EventArgsConverter="{StaticResource mouseButtonEventArgsConverter}" PassEventArgsToCommand="True" />
                        <dxmvvm:EventToCommand EventName="PreviewKeyDown" Command="{Binding OnPreviewKeyDownCommand}" PassEventArgsToCommand="True" />
                        <dxmvvm:EventToCommand EventName="PreviewKeyUp" Command="{Binding OnPreviewKeyUpCommand}" PassEventArgsToCommand="True" />
                    </ItemsControl>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>