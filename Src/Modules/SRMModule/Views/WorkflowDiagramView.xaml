<dxwui:WinUIDialogWindow  x:Class="Emdep.Geos.Modules.SRM.Views.WorkflowDiagramView"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                            xmlns:local="clr-namespace:Emdep.Geos.Modules.SRM.Views"
                            xmlns:ViewModels="clr-namespace:Emdep.Geos.Modules.SRM.ViewModels"
                            xmlns:dxnav="http://schemas.devexpress.com/winfx/2008/xaml/navigation"
                            xmlns:dxn="http://schemas.devexpress.com/winfx/2008/xaml/navbar"
                            xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
                            xmlns:dxwuin="http://schemas.devexpress.com/winfx/2008/xaml/windowsui/navigation"
                            xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"  
                            xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                            xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 
                            xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                            xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                            xmlns:Converters="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                            xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
                            xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"     
                            xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                            xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
                            xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                            xmlns:dxdiag="http://schemas.devexpress.com/winfx/2008/xaml/diagram"
                            xmlns:core="http://schemas.devexpress.com/winfx/2008/xaml/core"
                            Style="{DynamicResource WinUIDialogWindowStyle}"
                            mc:Ignorable="d">

    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding CancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <dxwui:WinUIDialogWindow.TitleStyle>
        <Style TargetType="ContentControl">
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Grid ShowGridLines="False" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <TextBlock Text="{DynamicResource SRMWorkflowHeader}" Style="{DynamicResource CustomTitleStyle}"/>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </dxwui:WinUIDialogWindow.TitleStyle>
    <Grid>
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" >
            <Grid Height="{Binding DialogHeight}" Width="{Binding DialogWidth}" >

                <Grid.RowDefinitions>
                    <RowDefinition Height="120*" />
                    <RowDefinition Height="10*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100*"/>
                </Grid.ColumnDefinitions>

                <dxdiag:DiagramControl Grid.Row="0" Grid.Column="0" ShowGrid="False" ShowRulers="False" ShowPageBreaks="False" CanvasSizeMode="Fill"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <dxmvvm:Interaction.Behaviors>
                        <dxdiag:DiagramDataBindingBehavior ItemsSource="{Binding WorkflowStatusList}" 
                                                           ConnectorsSource="{Binding WorkflowTransitionList}" ConnectorFromMember="IdWorkflowStatusFrom" 
                                                       ConnectorToMember="IdWorkflowStatusTo" KeyMember="IdWorkflowStatus" LayoutKind="Tree" ClearExistingItems="False">

                            <dxdiag:DiagramDataBindingBehavior.TemplateDiagram>
                                <!--Margin="80,40,80,40"-->
                                <dxdiag:DiagramControl CanvasSizeMode="Fill" 
                                                       SelectedStencils="TemplateDesigner" 
                                                       ShowPageBreaks="false" 
                                                       AllowChangeTextHorizontalAlignment="True"
                                                       
                                                       AllowChangeTextVerticalAlignment="True">
                                    <dxdiag:DiagramContainer Anchors="Left, Bottom" 
                                                             CanCopyWithoutParent="True" 
                                                             CanAddItems="False" 
                                                             DragMode="ByHeaderAndBounds" 
                                                             Height="100" 
                                                             ItemsCanChangeParent="True" 
                                                             ItemsCanAttachConnectorEndPoint="True" 
                                                             ItemsCanAttachConnectorBeginPoint="True" 
                                                             ItemsCanSelect="True" 
                                                             ItemsCanEdit="False" 
                                                             ItemsCanCopyWithoutParent="True" 
                                                             ItemsCanMove="True" 
                                                             ItemsCanRotate="False" 
                                                             ItemsCanSnapToOtherItems="True" 
                                                             ItemsCanDeleteWithoutParent="True"
                                                             ItemsCanSnapToThisItem="True" 
                                                             ItemsCanResize="False" 
                                                             StrokeId="Black" 
                                                             CanResize="False"
                                                             ShowHeader="False" 
                                                             StrokeDashArray="0 0"  
                                                             Width="230"
                                                             HorizontalAlignment="Center"
                                                             VerticalAlignment="Center">
                                        <dxdiag:DiagramShape Anchors="Left, Bottom" Angle="0" 
                                                             FontSize="26"  CanAttachConnectorBeginPoint="True"
                                                             CanResize="False" CanEdit="False" CanCopyWithoutParent="True" 
                                                             CanChangeParent="False" CanMove="False" 
                                                             CanAttachConnectorEndPoint="True" CanSelect="False"
                                                             CanDeleteWithoutParent="True" CanRotate="False" 
                                                             ForegroundId="Black" FontWeight="Bold" FontFamily="Arial" 
                                                             StrokeThickness="0" Height="100" Width="230"
                                                             HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
                                                             TextAlignment="Center" TextOptions.TextRenderingMode="Auto">
                                            <dxdiag:DiagramShape.Bindings>
                                                <dxdiag:DiagramBinding Expression="Name" PropertyName="Content"/>
                                                <dxdiag:DiagramBinding Expression="HtmlColor" PropertyName="Background"/>
                                            </dxdiag:DiagramShape.Bindings>
                                        </dxdiag:DiagramShape>
                                        <dxdiag:DiagramContainer.Bindings>
                                            <dxdiag:DiagramBinding Expression="HtmlColor" PropertyName="Background"/>
                                            </dxdiag:DiagramContainer.Bindings>
                                    </dxdiag:DiagramContainer>
                                    <dxdiag:DiagramConnector BeginPoint="300,164" CanDragBeginPoint="False" CanChangeRoute="False" CanDragEndPoint="False" EndArrow="ClosedASMEArrow" EndArrowSize="15,15" EndPoint="390,254" Points="(Empty)" StrokeId="Black" TemplateName="ClassConnector" Type="Straight"/>
                                    <!--<dxdiag:DiagramConnector BeginPoint="500,175" CanDragBeginPoint="False" CanChangeRoute="False" CanDragEndPoint="False" EndArrow="Filled90" EndArrowSize="10,10" EndPoint="590,265" Points="(Empty)" StrokeId="Black" TemplateName="InterfaceConnector" Type="Straight"/>-->
                                </dxdiag:DiagramControl>
                            </dxdiag:DiagramDataBindingBehavior.TemplateDiagram>
                        </dxdiag:DiagramDataBindingBehavior>
                    </dxmvvm:Interaction.Behaviors>

                </dxdiag:DiagramControl>
                
                <Button Grid.Row="1" Grid.Column="0" Content="{DynamicResource Cancel}" Margin="2,2,2,2"
			        Command="{Binding CancelButtonCommand}" 
			        Height="30"
			        Width="100"
			        HorizontalAlignment="Right"/>
            </Grid>
            
            
        </ScrollViewer>
       
    </Grid>
</dxwui:WinUIDialogWindow>

