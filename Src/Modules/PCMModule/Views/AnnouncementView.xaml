<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.PCM.Views.AnnouncementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Emdep.Geos.Modules.PCM.Views"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
             xmlns:dxwuin="http://schemas.devexpress.com/winfx/2008/xaml/windowsui/navigation" 
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
             xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing"
             mc:Ignorable="d" 
             xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             d:DesignHeight="300" d:DesignWidth="300"
             xmlns:Validation="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
             xmlns:dxa="http://schemas.devexpress.com/winfx/2008/xaml/accordion" 
             Title="{DynamicResource PCMAnnouncementView}"   
             TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}"            >

    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding CancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    <Grid ShowGridLines="False">
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="5" />
            <RowDefinition Height="50" />
            <RowDefinition Height="5" />
            <RowDefinition Height="400" />
            <RowDefinition Height="5" />
            <RowDefinition Height="50" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="350" />
        </Grid.ColumnDefinitions>

        <Label Content= "{DynamicResource PCMAnnouncementViewIncludechangesfrom}" Grid.Row="0" Grid.Column="0" Margin="5 5 5 5" HorizontalAlignment="Left" VerticalAlignment="Center" Height="30" FontSize="16" />
        <dxe:DateEdit  Grid.Row="0" Grid.Column="2" Width="150" Height="30"
          Margin="5 5 5 5" HorizontalAlignment="Left" VerticalAlignment="Center"  AllowNullInput="False"                     
          >
            <dxe:DateEdit.EditValue>
                <Binding Path="StartDate" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True"  >
                    <Binding.ValidationRules>
                        <Validation:ItemWorkLogValidation FieldName="StartDate" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:DateEdit.EditValue>
            <dxmvvm:Interaction.Behaviors>
                <dxmvvm:EventToCommand EventName="SelectedIndexChanged" Command="{Binding OnDateEditValueChangingCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
            </dxmvvm:Interaction.Behaviors>
            <!--<dxe:DateEdit.LayoutTransform>
                <ScaleTransform ScaleX="2" ScaleY="2" />
            </dxe:DateEdit.LayoutTransform>-->
        </dxe:DateEdit>

        <Label Content= "{DynamicResource PCMAnnouncementViewChangeType}" Grid.Row="2" Grid.Column="0" Margin="5 5 5 5" HorizontalAlignment="Left" VerticalAlignment="Center" Height="30" FontSize="16" />
        <dxe:CheckEdit Margin="5 0 5 0" Grid.Row="2" Grid.Column="2"  Content= "New" IsThreeState="False"  FontSize="16"
                       IsChecked="{Binding DataContext.NewChangeType,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                       Command="{Binding DataContext.NewChangeTypeValueChangingCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}">
            <!--<dxe:CheckEdit.LayoutTransform>
                <ScaleTransform ScaleX="1.5" ScaleY="1.5" />
            </dxe:CheckEdit.LayoutTransform>-->
        </dxe:CheckEdit>
        <dxe:CheckEdit Margin="120 0 120 0"   Content= "Update" Grid.Row="2" Grid.Column="2"  IsThreeState="False" FontSize="16"
                       IsChecked="{Binding DataContext.UpdateChangeType,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                       Command="{Binding DataContext.UpdateChangeTypeValueChangingCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}">
            <!--<dxe:CheckEdit.LayoutTransform>
                <ScaleTransform ScaleX="1.5" ScaleY="1.5" />
            </dxe:CheckEdit.LayoutTransform>-->
        </dxe:CheckEdit>

        <Label Content= "{DynamicResource PCMAnnouncementViewEMDEPDirectory}" Grid.Row="4" Grid.Column="0" Margin="5 5 5 5" HorizontalAlignment="Left" VerticalAlignment="Center" Height="30" FontSize="16" />
        <Label Content= "{DynamicResource PCMAnnouncementViewRecipients}" Grid.Row="4" Grid.Column="4" Margin="5 5 5 5" HorizontalAlignment="Left" VerticalAlignment="Center" Height="30" FontSize="16" />
        <Grid x:Name="DetailsGrid" Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="4" FocusManager.IsFocusScope="True"
                  VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition>
                    <ColumnDefinition.Style>
                        <Style TargetType="ColumnDefinition">
                            <Setter Property="Width" Value="400" />
                            <!--<Style.Triggers>
                                <DataTrigger Binding="{Binding IsAccordionControlVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" Value="Collapsed">
                                    <Setter Property="Width" Value="0" />
                                </DataTrigger>
                            </Style.Triggers>-->
                        </Style>
                    </ColumnDefinition.Style>
                </ColumnDefinition>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!--PlantsView-->
            <!--  ChildrenPath="Employees" -->
            <Border BorderThickness="1" BorderBrush="{DynamicResource BorderBrushColor}" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="1">
                <dxa:AccordionControl x:Name="PlantSView" Grid.Row="0" Grid.Column="0" 
                                          ExpandMode="MultipleOrNone" SelectedItem="{Binding DataContext.PlantSelectedItem,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                          SelectionUnit="SubItemOrRootItem" ShowSearchControl="False"
                                          SearchControlFilterCondition="Contains"
                                          ItemsSource="{Binding DataContext.CompanyList,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                          DisplayMemberPath="{Binding Alias}"
                                          ScrollBarMode="TouchOverlap">
                    <dxmvvm:Interaction.Triggers>
                        <dxmvvm:EventToCommand EventName="SelectedItemChanged"
                          Command="{Binding DataContext.SelectedPlantCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                          PassEventArgsToCommand="True"/>
                    </dxmvvm:Interaction.Triggers>
                </dxa:AccordionControl>
            </Border>
            <!--PlantsView-->

            <!--EmployeeDepartments-->
            <!--
            ItemTemplateSelector ="{StaticResource accordianTemplateSelector}"
            Visibility="{Binding IsEmployeeDetailViewVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
             
            -->
            <Border BorderThickness="1" BorderBrush="{DynamicResource BorderBrushColor}" Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="1">
                <dxa:AccordionControl x:Name="EmployeeDetailsView" Grid.Row="0" Grid.Column="2" 
                                          ExpandMode="MultipleOrNone" SelectedItem="{Binding DepartmentSelectedItem}"
                                          SelectionUnit="SubItemOrRootItem" ShowSearchControl="True"
                                          SearchControlFilterCondition="Contains"
                                          ItemsSource="{Binding DataContext.EmployeeDepartments,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                          DisplayMemberPath="{Binding DepartmentName}"
                                          ChildrenPath="Employees"
                                          ScrollBarMode="TouchOverlap"
                                          >
                    <dxmvvm:Interaction.Triggers>
                        <!--<dxmvvm:EventToCommand EventName="SelectedItemChanged" Command="{Binding CommandDepartmentSelection}"
                                                   PassEventArgsToCommand="True"/>
                        <dxmvvm:EventToCommand Command="{Binding DataContext.CommandOnDragRecordOverEmployees, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                           EventName="DragRecordOver" PassEventArgsToCommand="True">
                        </dxmvvm:EventToCommand>

                        <dxmvvm:EventToCommand Command="{Binding DataContext.CommandCompleteRecordDragDropEmployees, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                           EventName="CompleteRecordDragDrop" PassEventArgsToCommand="True">
                        </dxmvvm:EventToCommand>-->
                        <dxmvvm:EventToCommand Command="{Binding DataContext.CommandAccordionControl_MouseDoubleClick, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                           EventName="MouseDoubleClick" PassEventArgsToCommand="True">
                        </dxmvvm:EventToCommand>
                    </dxmvvm:Interaction.Triggers>
                </dxa:AccordionControl>
            </Border>
            <!--EmployeeDepartments-->

            <Grid Grid.Row="0" Grid.Column="4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <dxg:GridControl x:Name="GridEmployees" ShowBorder="True" MaxHeight="500" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                   ItemsSource="{Binding DataContext.Employees, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                   SelectedItem="{Binding DataContext.SelectedEmployee,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
                <dxg:GridControl.Columns>
                        <dxg:GridColumn MinWidth="300" FixedWidth="False" FieldName="FullName" FilterPopupMode="CheckedList"/>
                        <dxg:GridColumn MaxWidth="50" FieldName="Delete" FixedWidth="True" AllowMoving="False" AllowColumnFiltering="false">
                            <dxg:GridColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Name="deleteRow" ToolTip="Delete Comment"
                                                                    IsEnabled="{Binding DataContext.IsDeleteComment,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"
                                                                    Command="{Binding DataContext.DeleteCommentCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                            CommandParameter="{Binding RowData.Row}" >
                                        <Button.ContentTemplate>
                                            <DataTemplate>
                                                <Image Height="16" Width="16" Source="/Emdep.Geos.Modules.PCM;component/Assets/Images/Delete.png" />
                                            </DataTemplate>
                                        </Button.ContentTemplate>
                                    </Button>
                                </DataTemplate>
                            </dxg:GridColumn.CellTemplate>
                        </dxg:GridColumn>
                    </dxg:GridControl.Columns>
                    <dxg:GridControl.View>
                        <dxg:TableView x:Name="EmployeesTableView"
                                                                       ShowGroupedColumns="True"
                                                                       HorizontalScrollbarVisibility="Hidden"
                                                                       VerticalScrollbarVisibility="Auto"
                                                                       ShowIndicator="False"
                                                                       ShowColumnHeaders="False"
                                                                       ShowGroupPanel="False" 
                                                                       AllowEditing="False"
                                                                       NavigationStyle="Row"
                                                                       ShowHorizontalLines="True" 
                                                                       ShowVerticalLines="True"
                                                                       ShowSearchPanelMode="Always"
                                                                       SearchPanelHorizontalAlignment="Stretch"
                                                                       AllowDragDrop="False"
                                                                       FocusedRow="{Binding Path=SelectedEmployee, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" >

                            <dxmvvm:Interaction.Behaviors>
                                <!--<dxmvvm:EventToCommand Command="{Binding DataContext.CommandOnDragRecordOverFamilyGrid, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                       EventName="DragRecordOver" PassEventArgsToCommand="True">
                                </dxmvvm:EventToCommand>-->
                            </dxmvvm:Interaction.Behaviors>
                        </dxg:TableView>
                    </dxg:GridControl.View>
                </dxg:GridControl>
            </Grid>
        </Grid>
        <StackPanel Grid.Row="8" 
                    HorizontalAlignment="Center"
                    VerticalAlignment="Bottom"
                    Orientation="Horizontal" 
                    Width="290" Grid.Column="0" Grid.ColumnSpan="4">

            <Button Content="{DynamicResource Send}"
                            Command="{Binding SendButtonCommand}"
                            Height="30"
                            Width="100"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Margin="10 0 0 0"
                            Style="{DynamicResource Button16Style}"/>



            <Button Content="{DynamicResource Cancel}"
                            Command="{Binding CancelButtonCommand}" 
                            Height="30"
                            Width="100"
                            Margin="30,0,0,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Style="{DynamicResource Button16Style}"/>
        </StackPanel>
    </Grid>
</dxwui:WinUIDialogWindow>
