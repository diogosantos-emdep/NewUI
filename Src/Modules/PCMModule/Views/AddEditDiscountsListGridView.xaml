<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.PCM.Views.AddEditDiscountsListGridView"
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:local="clr-namespace:Emdep.Geos.Modules.PCM.Views"
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                         xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                         xmlns:dxeh="http://schemas.devexpress.com/winfx/2008/xaml/editors/internal"
                         xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
                         xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                         xmlns:ViewModel="clr-namespace:Emdep.Geos.Modules.PCM.ViewModels"
                         xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys"
                         xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
                         xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                         xmlns:UIConverter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                         xmlns:ve="http://schemas.devexpress.com/winfx/2008/xaml/docking/visualelements"
                         xmlns:Interactive="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                         xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                         xmlns:sys="clr-namespace:System;assembly=mscorlib"
                         xmlns:Behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                         xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                         xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
                         xmlns:dxci="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"    
                         xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing"
                         xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                         xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                         xmlns:dxwuii="clr-namespace:DevExpress.Xpf.WindowsUI.Internal;assembly=DevExpress.Xpf.Controls.v19.2"
                         xmlns:dxwuin="http://schemas.devexpress.com/winfx/2008/xaml/windowsui/navigation"
                         xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
                         mc:Ignorable="d" 
                         HorizontalAlignment="Stretch"
                         HorizontalContentAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         VerticalContentAlignment="Stretch"
                         Height="{Binding SystemParameters.PrimaryScreenHeight}" 
                         Width="{Binding SystemParameters.PrimaryScreenWidth}"
                         Style="{DynamicResource WinUIDialogWindowStyle}"
                         Template="{StaticResource Maximized_DXDialogWindow}">
    <dxwui:WinUIDialogWindow.Resources>
        <Style x:Key="img" TargetType="Image">
            <Setter Property="Width" Value="24" />
            <Setter Property="Height" Value="24" />
            <Setter Property="Margin" Value="15,0,0,0"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>

        </Style>
        <Converter:MaximizedElementConverter x:Key="con"/>
        <Converter:ForegroundColorConverter x:Key="ForegroundColorConverter"/>

        <Style x:Key="myGroupBoxStyle" TargetType="{x:Type dxlc:GroupBox}">
            <Setter Property="MaximizeElementVisibility" Value="Visible" />
            <Setter Property="Width" Value="280" />
            <Setter Property="Height" Value="160" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding MaximizedElementPosition}" Value="Bottom">
                    <Setter Property="Width" Value="280" />
                    <Setter Property="Height" Value="27" />
                </DataTrigger>
                <DataTrigger Binding="{Binding MaximizedElementPosition}" Value="Top">
                    <Setter Property="Width" Value="280" />
                    <Setter Property="Height" Value="27" />
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <DataTemplate x:Key="CheckBoxColumnTemplate">
            <ContentControl>
                <dxg:GridColumn Header="{Binding HeaderText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                FieldName="{Binding ColumnFieldName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                Width="{Binding Width}"
                                Visible="{Binding Visible,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                FixedWidth="True" 
                                AllowBestFit="true" 
                                AllowCellMerge="False"
                                AllowMoving="false"
                                AllowAutoFilter="False"
                                ShowInColumnChooser="False" 
                                HorizontalHeaderContentAlignment="Center" 
                                FilterPopupMode="Default"
                                ShowCheckBoxInHeader="True"
                                MinWidth="{Binding Width}"
                                >
                    <!--<dxg:GridColumn.HeaderTemplate>
                        <DataTemplate>
                            <dxe:CheckEdit x:Name="PART_Editor"  >
                            </dxe:CheckEdit>
                        </DataTemplate>
                    </dxg:GridColumn.HeaderTemplate>-->
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:CheckEdit x:Name="PART_Editor"  >
                            </dxe:CheckEdit>
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>

        <DataTemplate x:Key="DefaultColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding ColumnFieldName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                Header="{Binding HeaderText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                Width="{Binding Width}"
                                Visible="{Binding Visible,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                AllowCellMerge="False"
                                AllowBestFit="true" 
                                AllowEditing="False" 
                                AllowAutoFilter="False"
                                ShowInColumnChooser="True" 
                                FilterPopupMode="Default"
                                ReadOnly="True"
                                IsSmart="True"
                                MinWidth="{Binding  Width}"
                                >
                    <dxg:GridColumn.HeaderTemplate>
                        <DataTemplate>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{Binding}" HorizontalAlignment="Stretch" VerticalAlignment="Top" />
                            </StackPanel>
                        </DataTemplate>
                    </dxg:GridColumn.HeaderTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>

        <DataTemplate x:Key="ReferenceColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding ColumnFieldName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                Header="{Binding HeaderText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                Width="{Binding Width}"
                                Visible="{Binding Visible,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                AllowCellMerge="False"
                                AllowBestFit="true" 
                                AllowEditing="False" 
                                AllowAutoFilter="False"
                                ShowInColumnChooser="False" 
                                AllowMoving="false"
                                FilterPopupMode="Default"
                                ReadOnly="True"
                                IsSmart="True"
                                MinWidth="{Binding  Width}"
                                >
                    <dxg:GridColumn.HeaderTemplate>
                        <DataTemplate>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{Binding}" HorizontalAlignment="Stretch" VerticalAlignment="Top" />

                            </StackPanel>
                        </DataTemplate>

                    </dxg:GridColumn.HeaderTemplate>
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock VerticalAlignment="Center" Margin="10 0 0 0">                                            
                                            <TextBlock Text="{Binding Data.Reference}"/>                               
                                       </TextBlock>
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>

        <DataTemplate x:Key="ValueColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding ColumnFieldName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                Header="{Binding HeaderText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                Width="{Binding  Width}"
                                Visible="{Binding Visible,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                AllowBestFit="true" 
                                AllowCellMerge="False"
                                AllowMoving="true"
                                AllowAutoFilter="False"
                                ShowInColumnChooser="True" 
                                HorizontalHeaderContentAlignment="Left" 
                                IsSmart="True"                                
                                MinWidth="{Binding  Width}"
                                FilterPopupMode="Default">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:SpinEdit Name="PART_Editor" AllowDefaultButton="True" MaskType="Numeric" MaskShowPlaceHolders="False" ValidateOnTextInput="True" 
                                          AllowRoundOutOfRangeValue="True" Width="100" HorizontalAlignment="Stretch" MaxValue="100" MinValue="0"                                              
                                          Mask="N1" MaskUseAsDisplayFormat="True" TabIndex="0">
                                <dxe:SpinEdit.Style>
                                    <Style TargetType="{x:Type dxe:SpinEdit}">
                                        <Setter Property="IsEnabled" Value="True"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding DataContext.InActiveStatus,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" Value="true">
                                                <Setter Property="IsEnabled" Value="False"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </dxe:SpinEdit.Style>
                                <dxmvvm:Interaction.Behaviors>
                                    <dxmvvm:EventToCommand EventName="EditValueChanged" 
                                    Command="{Binding DataContext.ChangeValueCommand, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                    CommandParameter="{Binding ColumnFieldName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxmvvm:Interaction.Behaviors>
                            </dxe:SpinEdit>
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings HorizontalContentAlignment="Right"/>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>

        <DataTemplate x:Key="DeleteColumnTemplate">
            <ContentControl>
                <dxg:GridColumn Header="{Binding HeaderText,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                FieldName="{Binding ColumnFieldName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                ShowInColumnChooser="False" AllowMoving="False"
                                Width="{Binding Width}"
                                MinWidth="{Binding Width}"
                                Visible="{Binding Visible,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ReadOnly="True" FixedWidth="True" FilterPopupMode="Default">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <Button Name="deleteRowItem" ToolTip="{DynamicResource Delete}" Command="{Binding DataContext.DeleteArticleCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                    CommandParameter="{Binding RowData.Row}">
                                <Button.ContentTemplate>
                                    <DataTemplate>
                                        <Image Height="16" Width="16" Style="{ DynamicResource DeleteStyle}" />
                                    </DataTemplate>
                                </Button.ContentTemplate>
                                <Button.Style>
                                    <Style TargetType="{x:Type Button}">
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Cursor" Value="Hand"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>

        <UIHelper:DiscountArticleColumnTempleteSelector x:Key="newColumnTemplateSelector" 
                                                   Default="{StaticResource DefaultColumnTemplate}" 
                                                   IsChecked="{StaticResource CheckBoxColumnTemplate}" 
                                                   Reference="{StaticResource ReferenceColumnTemplate}"                                                 
                                                   Value= "{StaticResource ValueColumnTemplate}" 
                                                   Delete= "{StaticResource DeleteColumnTemplate}" 
                                                         />

        <DataTemplate x:Key="BandTemplate">
            <ContentControl>
                <dxg:GridControlBand UIHelper:NameBinder.Name="{Binding BandName,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  Header="{Binding BandHeader,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                    HorizontalHeaderContentAlignment="Center" Visible="True"
                                                    ColumnsSource="{Binding Columns,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                     AllowMoving="{Binding AllowMoving,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Fixed="{Binding FixedStyle,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    ColumnGeneratorTemplateSelector="{StaticResource newColumnTemplateSelector}" OverlayHeaderByChildren="False"/>

            </ContentControl>
        </DataTemplate>
        
    </dxwui:WinUIDialogWindow.Resources>

    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding DataContext.EscapeButtonCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <dxwui:WinUIDialogWindow.TitleStyle>
        <Style TargetType="ContentControl">
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Grid ShowGridLines="False" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="5"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="5"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <TextBlock  Grid.Row="0" Text="{Binding DataContext.WindowHeader,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" Style="{DynamicResource CustomTitleStyle}" HorizontalAlignment="Left"
                                        Grid.RowSpan="2"/>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </dxwui:WinUIDialogWindow.TitleStyle>

        <Grid ShowGridLines="False"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
              Height="{Binding DialogHeight}" Width="{Binding DialogWidth}"
          ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Auto">

        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="45"/>
        </Grid.RowDefinitions>

        <dxdo:DockLayoutManager Name="dockManager1" Grid.Row="0" Margin="2,0,0,0"  >
            <dxdo:LayoutGroup x:Name="rootMainGroup" Orientation="Horizontal" HorizontalAlignment="Stretch">
                <dxdo:LayoutPanel x:Name="documentGroup1" ShowCaption="False" ShowCloseButton="False">
                    <dxlc:FlowLayoutControl x:Name="flowLayoutControl"
                                Grid.Row="0"
                                AllowLayerSizing="False"
                                AllowMaximizedElementMoving="False"
                                Background="Transparent"
                                MaximizedElementPosition="{Binding MaximizedElementPosition}"
                                Orientation="Vertical" ScrollBars="Auto"
                                Padding="5"
                                ItemSpace="5" 
                                LayerSpace="5">

                        <dxmvvm:Interaction.Behaviors>
                            <UIHelper:FlowLayoutControlForMinimiseMaximise/>
                        </dxmvvm:Interaction.Behaviors>

                        <!--INFORMATION-->
                        <dxlc:GroupBox Background="Transparent" x:Name="GeneralInformation" MaximizeElementVisibility="Visible" Style="{StaticResource myGroupBoxStyle}">
                            <dxlc:GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <DockPanel Margin="-5,0,0,0">
                                        <TextBlock VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Text="{DynamicResource GeneralInfo1}" />

                                        <!-- <dxe:TextEdit  Text="{DynamicResource GeneralInfo}" FontWeight="Bold" HorizontalAlignment="Left" VerticalAlignment="Center"  ShowBorder="False" IsReadOnly="True"                                                 >
                                            <Binding Path="DataContext.InformationError" RelativeSource="{RelativeSource AncestorType=dxlc:GroupBox}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                                                <Binding.ValidationRules>
                                                    <Validation:AddEditModuleValidation FieldName="InformationError" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </dxe:TextEdit>-->
                                    </DockPanel>
                                </DataTemplate>
                            </dxlc:GroupBox.HeaderTemplate>
                            <dxlc:GroupBox.ContentTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                        </Grid.RowDefinitions>
                                        <Label Content="{DynamicResource ControlTempleteName}" Grid.Row="0" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold" />
                                        <TextBlock Grid.Row="0" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.Name, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.Name,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                        <Label Content="{DynamicResource ControlTempleteScope}" Grid.Row="1" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.SelectedScope.Value, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.SelectedScope.Value,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                        <Label Content="{DynamicResource ControlTempletePlatform}" Grid.Row="2" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.SelectedPlatform.Value, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.SelectedPlatform.Value,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                        <Label Content="{DynamicResource ControlTempleteValue}" Grid.Row="3" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="3" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.Value, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.Value,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                    </Grid>
                                </DataTemplate>
                            </dxlc:GroupBox.ContentTemplate>
                            <dxlc:GroupBox.MaximizedContentTemplate >
                                <DataTemplate>
                                    <ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Auto">
                                        <Grid ShowGridLines="False" MaxHeight="1500" MaxWidth="2000" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="5"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>

                                            <Grid  ShowGridLines="False" Grid.Row="0">

                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                    <RowDefinition Height="30" />
                                                    <RowDefinition Height="5" />
                                                </Grid.RowDefinitions>

                                                <Grid.ColumnDefinitions>
                                                    <!--Scope-->
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="5"/>
                                                    <ColumnDefinition Width="15*" MaxWidth="200"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <!--Platform-->
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="5"/>
                                                    <ColumnDefinition Width="15*" MaxWidth="200"/>

                                                    <ColumnDefinition Width="500"/>
                                                    <!--5-->
                                                    <ColumnDefinition Width="5"/>
                                                    <!--Language-->
                                                    <ColumnDefinition Width="37"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <!--InUse-->
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="5"/>
                                                    <ColumnDefinition Width="15*" MaxWidth="200"/>
                                                    <ColumnDefinition Width="5"/>
                                                </Grid.ColumnDefinitions>
                                                <!--<Name>-->
                                                <TextBlock Grid.Row="0" Grid.Column="0" 
                                                           VerticalAlignment="Center"
                                                           Text="{DynamicResource DiscountColName}" 
                                                           Style="{StaticResource TextBlock14Style}" />
                                                <dxe:TextEdit Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="6"
                                                              HorizontalAlignment="Stretch" ShowNullText="True"
                                                              NullText="Name" ShowNullTextForEmptyValue="True"
                                                              IsReadOnly="False" IsEnabled="True" 
                                                          Text="{Binding DataContext.Name,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" >
                                                    <dxe:TextEdit.EditValue>
                                                        <Binding Path="DataContext.Name" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                                                            <Binding.ValidationRules>
                                                                <Validation:AddEditBasePriceValidation FieldName="Name" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                                                            </Binding.ValidationRules>
                                                        </Binding>
                                                    </dxe:TextEdit.EditValue>
                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand 
                                                                EventName="EditValueChanged" Command="{Binding DataContext.ChangeNameCommand, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"/>
                                                    </dxmvvm:Interaction.Behaviors>
                                                </dxe:TextEdit>

                                                <!--<Discription>-->
                                                <TextBlock Grid.Row="2" Grid.Column="0" Text="{DynamicResource DiscountColDescription}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                                <dxe:TextEdit Grid.Row="2" Grid.Column="2" Grid.RowSpan="9" Grid.ColumnSpan="6" 
                                                                  VerticalContentAlignment="Top" TextWrapping="Wrap"  HorizontalAlignment="Stretch"
                                                          Text="{Binding DataContext.Description,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" 
                                                  ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                                                                  AcceptsReturn="True" NullText="Description">
                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand 
                                                            EventName="EditValueChanged" Command="{Binding DataContext.ChangeDescriptionCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                                    </dxmvvm:Interaction.Behaviors>
                                                </dxe:TextEdit>

                                                <!--Scope-->
                                                <TextBlock Grid.Row="12" Grid.Column="0"  Text="{DynamicResource DiscountColScope}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                                <dxe:ComboBoxEdit Grid.Row="12" Grid.Column="2"
                                                                    Name="CbeScope" 
                                                                    Style="{DynamicResource ComboBoxEditStyle}" 
                                                                    HorizontalAlignment="Stretch"
                                                                    VerticalAlignment="Stretch"
                                                                    IsTextEditable="False"
                                                                    DisplayMember="Value"
                                                                    ItemsSource="{Binding DataContext.ScopeList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                                                    SelectedItem="{Binding DataContext.SelectedScope, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}">

                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand 
                                                        EventName="SelectedIndexChanged" Command="{Binding DataContext.ChangeScopeCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                                            PassEventArgsToCommand="True"/>
                                                    </dxmvvm:Interaction.Behaviors>


                                                </dxe:ComboBoxEdit>

                                                <!--PlatForm-->
                                                <TextBlock Grid.Row="12" Grid.Column="4"  Text="{DynamicResource DiscountColPlatform}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                                <dxe:ComboBoxEdit Grid.Row="12" Grid.Column="6"
                                                                    Name="CbePlatform" 
                                                                    Style="{DynamicResource ComboBoxEditStyle}" 
                                                                    HorizontalAlignment="Stretch"
                                                                    VerticalAlignment="Stretch"
                                                                    IsTextEditable="False"
                                                              DisplayMember="Value"
                                                              ItemsSource="{Binding DataContext.PlatformList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                                              SelectedItem="{Binding DataContext.SelectedPlatform, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}">>

                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand 
                                                        EventName="SelectedIndexChanged" Command="{Binding DataContext.ChangePlatformCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                                            PassEventArgsToCommand="True"/>
                                                    </dxmvvm:Interaction.Behaviors>
                                                </dxe:ComboBoxEdit>

                                                <!--Plant-->
                                                <TextBlock Grid.Row="14" Grid.Column="0"  Text="{DynamicResource DiscountColPlant}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                                <dxe:ComboBoxEdit Grid.Row="14" Grid.Column="2"
                                                                    Name="CbePlant" 
                                                                    Style="{DynamicResource ComboBoxEditStyle}" 
                                                                    HorizontalAlignment="Stretch"
                                                                    VerticalAlignment="Stretch"
                                                                    IsTextEditable="False"
                                                                    DisplayMember="Name"
                                                                    ItemsSource="{Binding DataContext.PlantList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                                                    EditValue="{Binding DataContext.SelectedPlant, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}">
                                                    <dxe:ComboBoxEdit.StyleSettings>
                                                        <dxe:CheckedComboBoxStyleSettings />
                                                    </dxe:ComboBoxEdit.StyleSettings>
                                                    <dxmvvm:Interaction.Triggers>
                                                        <dxmvvm:EventToCommand 
                                                            EventName="PopupClosed" Command="{Binding DataContext.ChangePlantCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" PassEventArgsToCommand="True"/>
                                                    </dxmvvm:Interaction.Triggers>
                                                </dxe:ComboBoxEdit>

                                                <!--Value-->
                                                <TextBlock Grid.Row="14" Grid.Column="4" Text="{DynamicResource DiscountValue}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" HorizontalAlignment="Left"
                                                       Visibility="{Binding DataContext.ReadOnlyAndValueFieldVisbility, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
                                                <dxe:SpinEdit Mask="P1" AllowRoundOutOfRangeValue="True" MaskUseAsDisplayFormat="True" MinValue="0" MaxValue="100" Increment="1" MaskType="Numeric" IsFloatValue="True" Grid.Row="14" 
                                                          Grid.Column="6" IsReadOnly="False" Value="{Binding DataContext.Value,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}" 
                                                          Visibility="{Binding DataContext.ReadOnlyAndValueFieldVisbility, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                          VerticalContentAlignment="Center" IsEnabled="{Binding DataContext.IsEnabledValue, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" 	>
                                                </dxe:SpinEdit>

                                                <!--Languages-->
                                                <dxe:ListBoxEdit Name="listBoxLanguage" Grid.Row="0" Grid.Column="9" Grid.RowSpan="9" 
                                                     HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                     DisplayMember="TwoLetterISOLanguage" ValueMember="IdLanguage" 
                                                     VerticalContentAlignment="Center"
                                                     HorizontalContentAlignment="Center"
                                                     ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                                     ItemsSource="{Binding DataContext.Languages, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged ,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"
                                                     SelectedItem="{Binding DataContext.LanguageSelected, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged ,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}">
                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand 
                                                            EventName="SelectedIndexChanged" Command="{Binding DataContext.ChangeLanguageCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                                    </dxmvvm:Interaction.Behaviors>
                                                </dxe:ListBoxEdit>

                                                <!--InUse-->
                                                <TextBlock Grid.Row="0" Grid.Column="11" Text="{DynamicResource DiscountInUse}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                                <dxe:ToggleSwitch x:Name="chkInUse" Grid.Row="0" Grid.Column="13"  HorizontalAlignment="Left" VerticalAlignment="Center" ContentPlacement="Inside"
                                            CheckedStateContent="Yes" UncheckedStateContent="No" ToggleSwitchWidth="50" ToggleSwitchHeight="22" IsThreeState="False" 
                                            IsChecked="{Binding DataContext.IsInUse,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}">
                                                </dxe:ToggleSwitch>

                                                <!--Start Date-->
                                                <TextBlock Grid.Row="2" Grid.Column="11" Text="{DynamicResource DiscountStartDate}" VerticalAlignment="Center"/>
                                                <dxe:DateEdit Grid.Row="2" Grid.Column="13" TabIndex="5"
                                                       HorizontalAlignment="Stretch">
                                                    <dxe:DateEdit.EditValue>
                                                        <Binding Path="DataContext.StartDate" RelativeSource="{RelativeSource AncestorType=dxlc:GroupBox}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                                                        </Binding>
                                                    </dxe:DateEdit.EditValue>
                                                    <dxmvvm:Interaction.Triggers>
                                                        <dxmvvm:EventToCommand 	
                                                        EventName="EditValueChanged" Command="{Binding DataContext.ChangeStartDateCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                                    </dxmvvm:Interaction.Triggers>
                                                </dxe:DateEdit>

                                                <!--End Date-->
                                                <TextBlock Grid.Row="4" Grid.Column="11" Text="{DynamicResource DiscountEndDate}" VerticalAlignment="Center"/>
                                                <dxe:DateEdit Grid.Row="4" Grid.Column="13" HorizontalAlignment="Stretch" >
                                                    <dxe:DateEdit.EditValue>
                                                        <Binding Path="DataContext.EndDate" RelativeSource="{RelativeSource AncestorType=dxlc:GroupBox}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                                                        </Binding>
                                                    </dxe:DateEdit.EditValue>
                                                    <dxmvvm:Interaction.Triggers>
                                                        <dxmvvm:EventToCommand 	
                                                        EventName="EditValueChanged" Command="{Binding DataContext.ChangeEndDateCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                                    </dxmvvm:Interaction.Triggers>
                                                </dxe:DateEdit>

                                                <!--<Last Update>-->
                                                <TextBlock Grid.Row="6" Grid.Column="11" Text="{DynamicResource GridColLastUpdate}" VerticalAlignment="Center"/>
                                                <dxe:TextEdit Grid.Row="6" Grid.Column="13" Text="{Binding DataContext.LastUpdated,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},StringFormat=d,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" HorizontalAlignment="Stretch" IsReadOnly="True">
                                                </dxe:TextEdit>

                                                <!--Read Only-->

                                                <dxe:CheckEdit Grid.Row="16"  Grid.Column="6" IsChecked="{Binding DataContext.IsCheckedReadOnly, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}" 
                                                           IsReadOnly="False" HorizontalAlignment="Left" VerticalAlignment="Top" Visibility="{Binding DataContext.ReadOnlyAndValueFieldVisbility, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand 	
                                                        EventName="Checked" Command="{Binding DataContext.IsCheckedReadOnlyCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                                        <dxmvvm:EventToCommand 	
                                                        EventName="Unchecked" Command="{Binding DataContext.IsCheckedReadOnlyCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                                    </dxmvvm:Interaction.Behaviors>
                                                </dxe:CheckEdit>
                                                <TextBlock Grid.Row="16" Grid.Column="6" Text="{DynamicResource DiscountReadOnly}" Style="{StaticResource TextBlock14Style}" 
                                                       VerticalAlignment="Top" HorizontalAlignment="Left" Margin="20,0,0,0" Visibility="{Binding DataContext.ReadOnlyAndValueFieldVisbility, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>

                                            </Grid>

                                            <Grid ShowGridLines="False" Grid.Row="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <Grid ShowGridLines="False" Grid.Column="0" Grid.Row="2">
                                                    <dx:DXTabControl AllowMerging="True" TabContentCacheMode="None" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" SelectedIndex="0"
                                                                 Visibility="{Binding DataContext.ArticleGridVisibility, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
                                                        <dx:DXTabItem Header="{DynamicResource Article}" HorizontalAlignment="Stretch">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="*" />
                                                                </Grid.RowDefinitions>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <UIHelper:MyGridControl x:Name="grid" DockPanel.Dock="Top" Grid.Row="2" Height="Auto" 
                                                                         AutoGenerateColumns="None"  
                                                                         ScrollViewer.HorizontalScrollBarVisibility="Visible"   
                                                                         ItemsSource="{Binding DataContext.DtArticle,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" 
                                                                         BandsSource="{Binding DataContext.Bands,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                         BandTemplate="{StaticResource BandTemplate}" 
                                                                         SelectionMode="Cell" ImplyNullLikeEmptyStringWhenFiltering="True" >

                                                                    <dxmvvm:Interaction.Behaviors>
                                                                        <UIHelper:GridSelectingBehavior />
                                                                    </dxmvvm:Interaction.Behaviors>

                                                                    <dxg:GridControl.TotalSummary>
                                                                        <dxg:GridSummaryItem x:Name="summery" FieldName="" SummaryType="Count" DisplayFormat="Total Count : {0}" Visible="True" Alignment="Left"/>
                                                                    </dxg:GridControl.TotalSummary>

                                                                    <dxg:GridControl.View>
                                                                        <dxg:TableView x:Name="DiscountArticleTableView" 
                                                                                   NavigationStyle="Cell"
                                                                                   AllowHorizontalScrollingVirtualization="True" 
                                                                                   RowDetailsVisibilityMode="Visible"
                                                                                   ShowHorizontalLines="True"
                                                                                   ShowColumnHeaders="True"
                                                                                   ShowSearchPanelMode="Always"
                                                                                   VerticalScrollbarVisibility="Auto" 
                                                                                   HorizontalScrollbarVisibility="Auto"
                                                                                   AllowFixedColumnMenu="False"
                                                                                   AutoWidth="False"
                                                                                   ShowSearchPanelCloseButton="True"
                                                                                   SearchPanelHorizontalAlignment="Stretch"
                                                                                   IsColumnChooserVisible="{Binding DataContext.IsArticleColumnChooserVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                                   ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                                                                   AllowGrouping="True"
                                                                                   ShowGroupPanel="False"
                                                                                   ShowIndicator="False" 
                                                                                   AllowColumnFiltering="True"
                                                                                   FilterEditorShowOperandTypeIcon="True"
                                                                                   AllowDragDrop="True"
                                                                                   AllowEditing="True"
                                                                                   AllowColumnMoving="True"
                                                                                   EnableImmediatePosting="True"
                                                                                   GroupRowCheckBoxFieldName="IsChecked"  
                                                                                   EditorShowMode="MouseUp"
                                                                                   AllowPaging="False"
                                                                                   ShowFixedTotalSummary="True"
                                                                                   ImmediateUpdateRowPosition="True" AllowConditionalFormattingMenu="True"
                                                                                   ContinueRecordDrag="ArticleTableView_ContinueRecordDrag">

                                                                            <dxg:TableView.FormatConditions>
                                                                                <dxg:FormatCondition FieldName="IsChecked" ValueRule="Equal" Value1="True" ApplyToRow="True">
                                                                                    <dxg:FormatCondition.Format>
                                                                                        <dx:Format Foreground="Gray"/>
                                                                                    </dxg:FormatCondition.Format>
                                                                                </dxg:FormatCondition>

                                                                                <dxg:FormatCondition FieldName="Value" Expression="[Value] Is Not Null">
                                                                                    <dxg:FormatCondition.Format>
                                                                                        <dx:Format Background="#FF9ACCFF" Foreground="#FF00008B" FontWeight="Bold"/>
                                                                                    </dxg:FormatCondition.Format>
                                                                                </dxg:FormatCondition>

                                                                                <dxg:FormatCondition FieldName="Value" Expression="[Value] Is Null">
                                                                                    <dxg:FormatCondition.Format>
                                                                                        <dx:Format Background="#FF9ACCFF"/>
                                                                                    </dxg:FormatCondition.Format>
                                                                                </dxg:FormatCondition>

                                                                            </dxg:TableView.FormatConditions>
                                                                            <dxmvvm:Interaction.Behaviors>
                                                                                <!--<dxmvvm:EventToCommand EventName="Loaded"
                                                                                     Command="{Binding DataContext.ArticleGridControlLoadedCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                    PassEventArgsToCommand="True"
                                                                                     CommandParameter="{Binding ElementName=grid}" >
                                                                            </dxmvvm:EventToCommand>-->
                                                                                <dxmvvm:EventToCommand Command="{Binding DataContext.CommandOnDragRecordOverArticleGrid, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                       EventName="DragRecordOver" PassEventArgsToCommand="True">
                                                                                </dxmvvm:EventToCommand>
                                                                                <dxmvvm:EventToCommand Command="{Binding DataContext.CommandDropRecordArticleGrid, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                       EventName="DropRecord" PassEventArgsToCommand="True">
                                                                                </dxmvvm:EventToCommand>

                                                                                <dxmvvm:EventToCommand Command="{Binding DataContext.CommandCompleteRecordDragDropArticleGrid, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                                   EventName="CompleteRecordDragDrop" PassEventArgsToCommand="True">
                                                                                </dxmvvm:EventToCommand>

                                                                                <dxmvvm:EventToCommand EventName="CellValueChanged" 
                                                                                    Command="{Binding DataContext.ChangeValueCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                    PassEventArgsToCommand="True"
                                                                                    CommandParameter="{Binding DataContext.RowData.Row}"/>
                                                                            </dxmvvm:Interaction.Behaviors>

                                                                            <!--<dxmvvm:Interaction.Behaviors>-->



                                                                            <!-- <dxmvvm:EventToCommand EventName="CellValueChanged" 
                                                                                    Command="{Binding DataContext.RuleValueChangedCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                    PassEventArgsToCommand="True"
                                                                                                       CommandParameter="{Binding DataContext.RowData.Row}"/>

                                                                            <dxmvvm:EventToCommand EventName="CellValueChanging" 
                                                                                    Command="{Binding DataContext.RuleValueChangedCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                    PassEventArgsToCommand="True"
                                                                                                       CommandParameter="{Binding DataContext.RowData.Row}"/>

                                                                            <dxmvvm:EventToCommand Command="{Binding DataContext.ShowingEditorCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                   EventName="ShowingEditor"
                                                                                   PassEventArgsToCommand="True" />

                                                                            <dxmvvm:EventToCommand EventName="Loaded"
                                                                                     Command="{Binding DataContext.ArticleGridControlLoadedCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                    PassEventArgsToCommand="True"
                                                                                     CommandParameter="{Binding ElementName=grid}" >
                                                                            </dxmvvm:EventToCommand>-->

                                                                            <!--<dxmvvm:EventToCommand EventName="PastingFromClipboard"
                                                                                 Command="{Binding DataContext.PastingFromClipBoardCommond, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                    PassEventArgsToCommand="True" >
                                                                            </dxmvvm:EventToCommand>

                                                                            <dxmvvm:EventToCommand EventName="Unloaded"
                                                                                     Command="{Binding DataContext.ArticleGridControlUnloadedCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                    PassEventArgsToCommand="True"
                                                                                     CommandParameter="{Binding ElementName=grid}" >
                                                                            </dxmvvm:EventToCommand>-->

                                                                            <!--<dxmvvm:EventToCommand SourceObject="{Binding ElementName=ArticleTableView, Path=FormatConditions}" 
                                                                                                   EventName="CollectionChanged" 
                                                                                                   Command="{Binding DataContext.ArticleGridControlUnloadedCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                                   CommandParameter="{Binding ElementName=grid}"/>

                                                                            <dxmvvm:KeyToCommand Event="PreviewKeyDown" KeyGesture="Ctrl+V" Command="{Binding DataContext.PasteInSearchControlCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}" CommandParameter="{Binding ElementName=grid}" MarkRoutedEventsAsHandled="True"/>-->

                                                                            <!--</dxmvvm:Interaction.Behaviors>-->

                                                                            <Interactive:Interaction.Triggers>
                                                                                <!--<i:EventTrigger EventName="CellValueChanging">
                                                                                <behaviors:InvokeDelegateCommandAction Command="{Binding DataContext.CheckBoxCellValueChangingCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                                                           CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
                                                                            </i:EventTrigger>-->


                                                                            </Interactive:Interaction.Triggers>
                                                                        </dxg:TableView>
                                                                    </dxg:GridControl.View>
                                                                </UIHelper:MyGridControl>
                                                            </Grid>
                                                        </dx:DXTabItem>
                                                    </dx:DXTabControl>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </ScrollViewer>
                                </DataTemplate>
                            </dxlc:GroupBox.MaximizedContentTemplate>
                        </dxlc:GroupBox>

                        <!--Customers-->
                        <dxlc:GroupBox x:Name="Customers" MaximizeElementVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible" Style="{StaticResource myGroupBoxStyle}">
                            <dxlc:GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <DockPanel Margin="-5,0,0,0">
                                        <TextBlock  VerticalAlignment="Center"
                                                    FontWeight="Bold"
                                                    Text="{DynamicResource CustomersWithColon}" />
                                        <TextBlock Width="50"
                                                   Margin="5,1,0,0"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Name="CustomersListCount"
                                                   Text="{Binding DataContext.DiscountCustomers.Count, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                    </DockPanel>
                                </DataTemplate>
                            </dxlc:GroupBox.HeaderTemplate>
                            <dxlc:GroupBox.ContentTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <Label Content="{DynamicResource ControlTempleteGroup}" Grid.Row="0" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold" />
                                        <TextBlock Grid.Row="0" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.CustomerGroup, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.CustomerGroup,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                        <Label Content="{DynamicResource ControlTempleteRegion}" Grid.Row="1" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.CustomerRegion, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.CustomerRegion,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                        <Label Content="{DynamicResource ControlTempleteCountry}" Grid.Row="2" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.CustomerCountry, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.CustomerCountry,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                        <Label Content="{DynamicResource ControlTempletePlant}" Grid.Row="3" Grid.Column="0" Margin="2" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="3" Grid.Column="1" Margin="2" Padding="2"  Text="{Binding DataContext.CustomerPlant, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextTrimming="WordEllipsis"  ToolTip="{Binding DataContext.CustomerPlant,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                    </Grid>
                                </DataTemplate>
                            </dxlc:GroupBox.ContentTemplate>

                            <dxlc:GroupBox.MaximizedContentTemplate>
                                <DataTemplate>
                                    <Grid ShowGridLines="False" MaxHeight="1500" MaxWidth="2000" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="5"/>
                                            <RowDefinition Height="40"/>
                                        </Grid.RowDefinitions>

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>


                                        <!--<Table>-->
                                        <dxg:GridControl x:Name="gridCustomers" ShowBorder="True" MaxHeight="1500" MaxWidth="2000" Grid.Row="0" 
                                                         HorizontalAlignment="Stretch" VerticalAlignment="Stretch" SelectionMode="Row"
                                                         ItemsSource="{Binding DataContext.DiscountCustomers, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"                                                         
                                                         ImplyNullLikeEmptyStringWhenFiltering="True">
                                            <!--<dxg:GridControl.Resources>
                                                <dx:ListOfObjectToIEnumerableOfStringConverter x:Key="listConverter"/>
                                                <dx:EditorStringIdConverter x:Key="EditorStringIdConverter" />
                                                <dx:BoolInverseConverter x:Key="boolInverseConverter"/>
                                                <dx:VisibilityToBoolInverseConverter x:Key="visibilityToBoolInverseConverter"/>
                                                <dx:StringToVisibilityConverter x:Key="stringToVisibilityConverter"/>
                                                <Style x:Key="{dxet:SearchControlThemeKey ResourceKey=FindButtonStyle}" TargetType="{x:Type Button}">
                                                    <Setter Property="Margin" Value="0,0,6,0"/>
                                                    <Setter Property="dx:FocusHelper2.Focusable" Value="False" />
                                                    <Setter Property="Content" Value="{Binding Path=IsTabStop, RelativeSource={RelativeSource Self}, ConverterParameter=LookUpFind, Converter={StaticResource EditorStringIdConverter}}" />
                                                </Style>
                                                <Style x:Key="{dxet:SearchControlThemeKey ResourceKey=CloseButtonStyle}" TargetType="{x:Type Button}">
                                                    <Setter Property="dx:FocusHelper2.Focusable" Value="False" />
                                                    <Setter Property="Content" Value="{Binding Path=IsTabStop, RelativeSource={RelativeSource Self}, ConverterParameter=LookUpClose, Converter={StaticResource EditorStringIdConverter}}" />
                                                </Style>
                                                <dx:BoolToObjectConverter x:Key="NullValueButtonPlacementConverter">
                                                    <dx:BoolToObjectConverter.TrueValue>EditBox</dx:BoolToObjectConverter.TrueValue>
                                                    <dx:BoolToObjectConverter.FalseValue>None</dx:BoolToObjectConverter.FalseValue>
                                                </dx:BoolToObjectConverter>
                                                <dx:BooleanToVisibilityConverter x:Key="boolToVisibilityConverter" />

                                                <ControlTemplate x:Key="{dxet:SearchControlThemeKey ResourceKey=Template, IsThemeIndependent=true}">
                                                    <ContentControl dx:FocusHelper2.Focusable="False" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="2" />
                                                                <ColumnDefinition Width="45" />
                                                            </Grid.ColumnDefinitions>

                                                            <dxe:ComboBoxEdit MinHeight="22" Grid.Column="0" HorizontalAlignment="Stretch" 
                                                            ImmediatePopup="{Binding Path= SearchControlPropertyProvider.ActualImmediateMRUPopup, RelativeSource={RelativeSource TemplatedParent}}"
                                                            x:Name="editor" AllowDefaultButton="False"
                                                            ShowNullText="{Binding Path=SearchControlPropertyProvider.ActualShowFindButton, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource boolInverseConverter}}"
                                                            dxeh:MVVMFocusBehavior.IsFocused="{Binding Path=IsKeyboardFocusWithin, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"
                                                            ItemsSource="{Binding Path=MRU, RelativeSource={RelativeSource TemplatedParent}}"
                                                            Margin="0"
                                                            ValidateOnEnterKeyPressed="True"
                                                            IncrementalFiltering="False"
                                                            IsCaseSensitiveSearch="True"
                                                            EditValuePostDelay="{Binding Path=SearchTextPostDelay, RelativeSource={RelativeSource TemplatedParent}}"
                                                            EditValuePostMode="{Binding Path=SearchControlPropertyProvider.ActualPostMode, RelativeSource={RelativeSource TemplatedParent}}"
                                                            EditValue="{Binding Path=SearchText, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                            IsTabStop="{Binding IsEditorTabStop, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}">
                                                                <dxe:ComboBoxEdit.NullText>
                                                                    <MultiBinding>
                                                                        <Binding Path="NullText" RelativeSource="{RelativeSource TemplatedParent}" />
                                                                        <Binding Path="IsTabStop" RelativeSource="{RelativeSource Self}" Converter="{StaticResource EditorStringIdConverter}" ConverterParameter="LookUpSearch" />
                                                                        <MultiBinding.Converter>
                                                                            <dx:SearchControlNullTextConverter />
                                                                        </MultiBinding.Converter>
                                                                    </MultiBinding>
                                                                </dxe:ComboBoxEdit.NullText>

                                                                <dxe:ComboBoxEdit.StyleSettings>
                                                                    <dxe:SearchControlStyleSettings/>
                                                                </dxe:ComboBoxEdit.StyleSettings>

                                                                <dxe:ComboBoxEdit.Buttons>
                                                                    <dxe:ButtonInfo GlyphKind="Custom" x:Name="buttonClear"
                                                                                Command="{Binding Path=SearchControlPropertyProvider.ClearSearchTextCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                                                                Visibility="{Binding Path=SearchControlPropertyProvider.ActualShowClearButton, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource boolToVisibilityConverter}}">
                                                                        <dxe:ButtonInfo.Template>
                                                                            <DataTemplate>
                                                                                <dxe:ButtonClose Command="{Binding Command}" Visibility="{Binding Visibility}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="2,0" />
                                                                            </DataTemplate>
                                                                        </dxe:ButtonInfo.Template>
                                                                    </dxe:ButtonInfo>
                                                                    <dxe:ButtonInfo GlyphKind="DropDown"
                                                                                Command="{Binding Path=OpenPopupCommand, ElementName=editor}"
                                                                                Visibility="{Binding Path=ShowMRUButton, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource boolToVisibilityConverter}}" />
                                                                </dxe:ComboBoxEdit.Buttons>
                                                            </dxe:ComboBoxEdit>

                                                            <Button Name="ExporttoExcel" ToolTip="{DynamicResource ButtonExportToExcel}"  Grid.Column="3"
                                                                Command="{Binding DataContext.ExportToExcelCustomersCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                CommandParameter="{Binding ElementName=CustomerTableView}" Height="30" Width="30"
                                                                    Visibility="{Binding DataContext.IsExportVisible, UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}">
                                                                <Button.ContentTemplate>
                                                                    <DataTemplate>
                                                                        <Image Style="{DynamicResource PCMExportToExcelButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                                                                    </DataTemplate>

                                                                </Button.ContentTemplate>
                                                                <Button.Style>
                                                                    <Style TargetType="{x:Type Button}">
                                                                        <Style.Triggers>
                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                <Setter Property="Cursor" Value="Hand"/>
                                                                            </Trigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                            </Button>
                                                        </Grid>
                                                    </ContentControl>
                                                </ControlTemplate>
                                            </dxg:GridControl.Resources>-->
                                            <dxg:GridControl.Columns>
                                                <dxg:GridColumn Header="{DynamicResource Group}" FieldName="GroupName" MinWidth="250" Width="*" FixedWidth="True" FilterPopupMode="Default"  ReadOnly="True" />
                                                <dxg:GridColumn Header="{DynamicResource Region}" FieldName="RegionName" MinWidth="120" Width="*"  FixedWidth="True" FilterPopupMode="Default"  ReadOnly="True" />
                                                <dxg:GridColumn Header="{DynamicResource Country}" FieldName="Country.Name" MinWidth="120" Width="*"  FixedWidth="True" FilterPopupMode="Default"  ReadOnly="True" />
                                                <dxg:GridColumn Header="{DynamicResource Plant}" FieldName="Plant.Name" MinWidth="200" Width="*"  FixedWidth="True" FilterPopupMode="CheckedList"  ReadOnly="True" />
                                                <dxg:GridColumn Header="{Binding HeaderText}" 
                                                                FieldName="{Binding ColumnFieldName}" 
                                                                Width="{Binding  Width}"
                                                                Visible="{Binding Visible}" ReadOnly="True" FixedWidth="True" FilterPopupMode="Default">
                                                    <dxg:GridColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Button Name="deleteRowItem" ToolTip="{DynamicResource Delete}" Command="{Binding DataContext.DeleteCustomerCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                    CommandParameter="{Binding RowData.Row}">
                                                                <Button.ContentTemplate>
                                                                    <DataTemplate>
                                                                        <Image Height="16" Width="16" Style="{ DynamicResource DeleteStyle}" />
                                                                    </DataTemplate>
                                                                </Button.ContentTemplate>
                                                                <Button.Style>
                                                                    <Style TargetType="{x:Type Button}">
                                                                        <Style.Triggers>
                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                <Setter Property="Cursor" Value="Hand"/>
                                                                            </Trigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                            </Button>
                                                        </DataTemplate>
                                                    </dxg:GridColumn.CellTemplate>
                                                </dxg:GridColumn>
                                            </dxg:GridControl.Columns>
                                            <dxg:GridControl.TotalSummary>
                                                <dxg:GridSummaryItem x:Name="summary" FieldName="" SummaryType="Count" DisplayFormat="Total Count : {0}" Visible="True" Alignment="Left" />
                                            </dxg:GridControl.TotalSummary>
                                            <dxg:GridControl.View>
                                                <dxg:TableView x:Name="CustomerTableView"
                                                               NavigationStyle="Row"
                                                           AllowHorizontalScrollingVirtualization="True" 
                                                           RowDetailsVisibilityMode="Visible"
                                                           ShowHorizontalLines="True"
                                                           ShowSearchPanelMode="Always"
                                                           ShowColumnHeaders="True"
                                                           VerticalScrollbarVisibility="Auto" 
                                                           HorizontalScrollbarVisibility="Auto"
                                                           AllowFixedColumnMenu="False"
                                                           AutoWidth="False"
                                                           ShowFixedTotalSummary="True"
                                                           ShowSearchPanelCloseButton="True"
                                                           SearchPanelHorizontalAlignment="Stretch"
                                                           ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                                           AllowGrouping="True"
                                                           ShowGroupPanel="False"
                                                           ShowIndicator="False"
                                                           AllowColumnMoving="True"
                                                              >
                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand Command="{Binding DataContext.EditCustomerCommand, RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"
                                                                               EventName="MouseDoubleClick"
                                                                               CommandParameter="{Binding ElementName=CustomerTableView}">
                                                            <dxmvvm:EventToCommand.EventArgsConverter>
                                                                <dx:EventArgsToDataRowConverter />
                                                            </dxmvvm:EventToCommand.EventArgsConverter>
                                                        </dxmvvm:EventToCommand>
                                                    </dxmvvm:Interaction.Behaviors>
                                                </dxg:TableView>
                                            </dxg:GridControl.View>
                                        </dxg:GridControl>

                                        <!--<Add button>-->
                                        <Button Content=" " Grid.Row="2" Height="40" Width="40" HorizontalAlignment="Right"
                                                Command="{Binding DataContext.AddCustomerCommand, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"
                                                CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Grid}}">
                                            <Button.ToolTip>
                                                <TextBlock Text="{DynamicResource ButtonAdd}"/>
                                            </Button.ToolTip>
                                            <Button.ContentTemplate>
                                                <DataTemplate>
                                                    <Image Style="{ DynamicResource PCMAddButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                                                </DataTemplate>
                                            </Button.ContentTemplate>
                                        </Button>
                                    </Grid>
                                </DataTemplate>

                            </dxlc:GroupBox.MaximizedContentTemplate>

                        </dxlc:GroupBox>

                        <!--[Sudhir.Jangra][GEOS2-4935]-->
                        <!--Comments-->
                        <dxlc:GroupBox x:Name="Comments" Style="{StaticResource myGroupBoxStyle}" MaximizeElementVisibility="Visible">
                            <dxlc:GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <DockPanel Margin="-5,0,0,0">
                                        <TextBlock Margin="5,0,0,0"
                                           Text="{DynamicResource ContactsEditViewComment}"
                                           FontWeight="Bold"
                                           VerticalAlignment="Center"/>
                                        <TextBlock x:Name="CommentsCount" 
                                           Text="{Binding DataContext.CommentsList.Count, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" 
                                           Width="50" 
                                           HorizontalAlignment="Left" 
                                           VerticalAlignment="Center"
                                           FontWeight="Bold"
                                           Margin="5,1,0,0" />
                                    </DockPanel>
                                </DataTemplate>
                            </dxlc:GroupBox.HeaderTemplate>

                            <dxlc:GroupBox.ContentTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <!--<Grid.Style>
                                            <Style>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding DataContext.CommentsList.Count,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" Value="0">
                                                        <Setter Property="Grid.Visibility" Value="Hidden"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Grid.Style>-->
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <Label Content="{DynamicResource DateUserWithColon}" Grid.Row="0" Grid.Column="0" Margin="3,0,0,0" Padding="2"  FontWeight="Bold" />
                                        <TextBlock Grid.Row="0" Grid.Column="1" Margin="3,0,0,0" Padding="2"  Text="{Binding DataContext.CommentDateTimeText, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox},StringFormat=g,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}"/>
                                        <Label Content="{DynamicResource UserWithColon}" Grid.Row="1" Grid.Column="0" Margin="3,0,0,0" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" Margin="3,0,0,0" Padding="2"  Text="{Binding DataContext.CommentFullNameText, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextWrapping="WrapWithOverflow"
                                             ToolTip="{Binding DataContext.CommentFullNameText,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"  Width="Auto" TextTrimming="CharacterEllipsis"       
                                                   />
                                        <Label Content="{DynamicResource PCMCommentWithColon}" Grid.Row="2" Grid.Column="0" Margin="3,0,0,0" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" Margin="3,0,0,0" Padding="2"  Text="{Binding DataContext.CommentText, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextWrapping="WrapWithOverflow"
                                             ToolTip="{Binding DataContext.CommentText,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"  Width="Auto" TextTrimming="CharacterEllipsis"       
                                                  
                                                   />
                                    </Grid>
                                </DataTemplate>
                            </dxlc:GroupBox.ContentTemplate>

                            <dxlc:GroupBox.MaximizedContentTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="40" />
                                        </Grid.RowDefinitions>
                                        <dxg:GridControl Grid.Row="0" x:Name="gcComments" 
                                                 HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                 SelectionMode="Row"  MaxHeight="1500" MaxWidth="2000"                                         
                                                 ItemsSource="{Binding DataContext.CommentsList,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                 ImplyNullLikeEmptyStringWhenFiltering="True"
                                                 SelectedItem="{Binding DataContext.SelectedComment, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         >
                                            <dxg:GridControl.Columns>


                                                <dxg:GridColumn Width="170" FieldName="People.FullName"
                                            FixedWidth="True"
                                            Header="{DynamicResource SupplierCommentUser}" FilterPopupMode="CheckedList">
                                                    <dxg:GridColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <dxe:TextEdit DisplayFormatString="g" Name="PART_Editor" FontWeight="Bold" />
                                                        </DataTemplate>
                                                    </dxg:GridColumn.CellTemplate>
                                                </dxg:GridColumn>


                                                <dxg:GridColumn Width="1330"
                                               Binding="{Binding Datetime,StringFormat=g, ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}"
                                            FixedWidth="True"
                                            Header="{DynamicResource SupplierCommentDate}" FilterPopupMode="CheckedList">
                                                    <dxg:GridColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <dxe:TextEdit DisplayFormatString="g" Name="PART_Editor" FontWeight="Bold" />
                                                        </DataTemplate>
                                                    </dxg:GridColumn.CellTemplate>
                                                </dxg:GridColumn>
                                                <!--<dxg:GridColumn FieldName="Comment" Visible="False" ShowInColumnChooser="False" />-->
                                                <dxg:GridColumn FieldName="Comments" Visible="False"  Width="*" IsEnabled="False" AllowColumnFiltering="False" ShowInColumnChooser="False"/>

                                                <dxg:GridColumn Fixed="Right" Width="40" FieldName="" FixedWidth="True" FilterPopupMode="CheckedList" AllowMoving="False" AllowColumnFiltering="false" >
                                                    <dxg:GridColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Button Name="deleteRowComment"
                                                            Command="{Binding DataContext.DeleteCommentRowCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                            CommandParameter="{Binding RowData.Row}"
                                                            Content="">
                                                                <Button.ContentTemplate>
                                                                    <DataTemplate>
                                                                        <Image Height="16" Width="16"
                                                                       Source="/Emdep.Geos.Modules.Crm;component/Assets/Images/Delete.png" />
                                                                    </DataTemplate>
                                                                </Button.ContentTemplate>
                                                            </Button>
                                                        </DataTemplate>
                                                    </dxg:GridColumn.CellTemplate>
                                                </dxg:GridColumn>

                                            </dxg:GridControl.Columns>


                                            <dxmvvm:Interaction.Behaviors>
                                                <UIHelper:GridSelectingBehavior />
                                            </dxmvvm:Interaction.Behaviors>
                                            <dxg:GridControl.View>
                                                <dxg:TableView x:Name="commentTable"
                                                     NavigationStyle="Cell"
                                                           AllowHorizontalScrollingVirtualization="True" 
                                                           RowDetailsVisibilityMode="Visible"
                                                           ShowHorizontalLines="True"
                                                           ShowColumnHeaders="True"
                                                           VerticalScrollbarVisibility="Auto" 
                                                           HorizontalScrollbarVisibility="Auto"
                                                           AllowFixedColumnMenu="False"
                                                           AutoWidth="False"
                                                           ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                                           AllowGrouping="True"
                                                           ShowGroupPanel="False"
                                                           ShowIndicator="False" 
                                                           AllowColumnMoving="False"
                                                       ShowSearchPanelMode="Always"
                                                       SearchPanelHorizontalAlignment="Stretch"
                                                       FocusedRow="{Binding DataContext.SelectedComment, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                       SearchColumns="People.FullName;Comments"
                                                   >
                                                    <dxg:TableView.RowDetailsTemplate>
                                                        <DataTemplate>
                                                            <dx:DXExpander IsExpanded="{Binding Path=RowState.(UIHelper:ShowDetailBehavior.ShowDetail)}" HorizontalExpand="None" VerticalExpand="FromTopToBottom" >
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="50" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <dxe:ImageEdit ShowLoadDialogOnClickMode="Never" ShowMenu="False" Source="{Binding Row.People.OwnerImage}" Stretch="UniformToFill" Width="50" Height="45" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                                                    <!--<UIHelper:BindableRichTextBox x:Name="BindableRichTextBox_Editor1" HorizontalScrollBarVisibility="Auto" 
                                                                           Document="{Binding Row.Comments,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={UIConverter:RtfToFlowDocumentConverter}}" IsReadOnly="True" Grid.Column="1" Grid.Row="0" ScrollViewer.VerticalScrollBarVisibility="Auto" Style="{DynamicResource RichTextBoxStyle}"
                                                                        >
                                                                    </UIHelper:BindableRichTextBox>-->
                                                                    <TextBlock Grid.Row="0" Grid.Column="1" Padding="2"  Text="{Binding Row.Comments,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TextWrapping="WrapWithOverflow"
                                              Width="Auto" TextTrimming="CharacterEllipsis"      
                                                   />


                                                                </Grid>
                                                            </dx:DXExpander>
                                                        </DataTemplate>
                                                    </dxg:TableView.RowDetailsTemplate>
                                                    <dxmvvm:Interaction.Behaviors>
                                                        <dxmvvm:EventToCommand Command="{Binding DataContext.CommentsGridDoubleClickCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                                                       EventName="MouseDoubleClick"
                                                                       PassEventArgsToCommand="True">
                                                            <dxmvvm:EventToCommand.EventArgsConverter>
                                                                <dx:EventArgsToDataRowConverter />
                                                            </dxmvvm:EventToCommand.EventArgsConverter>
                                                        </dxmvvm:EventToCommand>
                                                        <UIHelper:ShowDetailBehavior />
                                                    </dxmvvm:Interaction.Behaviors>
                                                    <dxg:TableView.RowStyle>
                                                        <Style TargetType="dxg:RowControl">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding RowData.Row.IsEnabled}" Value="False">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </dxg:TableView.RowStyle>
                                                </dxg:TableView>
                                            </dxg:GridControl.View>
                                        </dxg:GridControl>

                                        <!--Open Add or Edit comment window-->
                                        <Button Grid.Row="1"
                                    Height="32" Width="32"
                                    Margin="0,5,-5,-5"
                                    VerticalAlignment="Bottom" HorizontalAlignment="Right"
                                    Command="{Binding AddCommentsCommand}"
                                    CommandParameter="{Binding ElementName=gcComments}"
                                    ToolTip="Add Comment"
                                    DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                    >
                                            <Button.ContentTemplate>
                                                <DataTemplate>
                                                    <Image Style="{DynamicResource AddButtonImageStyle}" Grid.Column="1" Height="24" Width="24" HorizontalAlignment="Right" Margin="-10" />
                                                </DataTemplate>
                                            </Button.ContentTemplate>
                                        </Button>
                                    </Grid>
                                </DataTemplate>
                            </dxlc:GroupBox.MaximizedContentTemplate>
                        </dxlc:GroupBox>


                        <!--Change Logs-->
                        <dxlc:GroupBox x:Name="ChangLog" MaximizeElementVisibility="Visible" Style="{StaticResource myGroupBoxStyle}">
                            <dxlc:GroupBox.HeaderTemplate>
                                <DataTemplate>
                                    <DockPanel Margin="-5,0,0,0">
                                        <TextBlock VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Text="{DynamicResource ChangeLog}" />
                                        <TextBlock Width="50"
                                                   Margin="5,1,0,0"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Name="DiscountChangeLogListCount"
                                                   Text="{Binding DataContext.DiscountChangeLogList.Count, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                    </DockPanel>
                                </DataTemplate>
                            </dxlc:GroupBox.HeaderTemplate>

                            <dxlc:GroupBox.ContentTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <Label Content="{DynamicResource DateUserWithColon}" Grid.Row="0" Grid.Column="0" Margin="3,0,0,0" Padding="2"  FontWeight="Bold" />
                                        <TextBlock Grid.Row="0" Grid.Column="1" Margin="3,0,0,0" Padding="2"  Text="{Binding DataContext.DiscountChangeLogList[0].Datetime, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox},StringFormat=d,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" ToolTip="{Binding DataContext.DiscountChangeLogList[0].Datetime, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                        <Label Content="{DynamicResource UserWithColon}" Grid.Row="1" Grid.Column="0" Margin="3,0,0,0" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" Margin="3,0,0,0" Padding="2"  Text="{Binding DataContext.DiscountChangeLogList[0].UserName, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" TextWrapping="Wrap" ToolTip="{Binding DataContext.DiscountChangeLogList[0].UserName, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"/>
                                        <Label Content="{DynamicResource ActionWithColon}" Grid.Row="2" Grid.Column="0" Margin="3,0,0,0" Padding="2"  FontWeight="Bold"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" Margin="3,0,0,0" Padding="2"  Text="{Binding DataContext.DiscountChangeLogList[0].Comments, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" ToolTip="{Binding DataContext.DiscountChangeLogList[0].Comments, RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}"  TextWrapping="WrapWithOverflow" Width="Auto" TextTrimming="CharacterEllipsis"/>
                                    </Grid>
                                </DataTemplate>

                            </dxlc:GroupBox.ContentTemplate>

                            <dxlc:GroupBox.MaximizedContentTemplate>
                                <DataTemplate>
                                    <dxg:GridControl VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
                                                     ItemsSource="{Binding DataContext.DiscountChangeLogList,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType={x:Type dxlc:GroupBox}}}" SelectionMode="Row"
                                                     ImplyNullLikeEmptyStringWhenFiltering="True">


                                        <dxg:GridControl.Resources>
                                            <dx:ListOfObjectToIEnumerableOfStringConverter x:Key="listConverter"/>
                                            <dx:EditorStringIdConverter x:Key="EditorStringIdConverter" />
                                            <dx:BoolInverseConverter x:Key="boolInverseConverter"/>
                                            <dx:VisibilityToBoolInverseConverter x:Key="visibilityToBoolInverseConverter"/>
                                            <dx:StringToVisibilityConverter x:Key="stringToVisibilityConverter"/>
                                            <Style x:Key="{dxet:SearchControlThemeKey ResourceKey=FindButtonStyle}" TargetType="{x:Type Button}">
                                                <Setter Property="Margin" Value="0,0,6,0"/>
                                                <Setter Property="dx:FocusHelper2.Focusable" Value="False" />
                                                <Setter Property="Content" Value="{Binding Path=IsTabStop, RelativeSource={RelativeSource Self}, ConverterParameter=LookUpFind, Converter={StaticResource EditorStringIdConverter}}" />
                                            </Style>
                                            <Style x:Key="{dxet:SearchControlThemeKey ResourceKey=CloseButtonStyle}" TargetType="{x:Type Button}">
                                                <Setter Property="dx:FocusHelper2.Focusable" Value="False" />
                                                <Setter Property="Content" Value="{Binding Path=IsTabStop, RelativeSource={RelativeSource Self}, ConverterParameter=LookUpClose, Converter={StaticResource EditorStringIdConverter}}" />
                                            </Style>
                                            <dx:BoolToObjectConverter x:Key="NullValueButtonPlacementConverter">
                                                <dx:BoolToObjectConverter.TrueValue>EditBox</dx:BoolToObjectConverter.TrueValue>
                                                <dx:BoolToObjectConverter.FalseValue>None</dx:BoolToObjectConverter.FalseValue>
                                            </dx:BoolToObjectConverter>
                                            <dx:BooleanToVisibilityConverter x:Key="boolToVisibilityConverter" />

                                            <ControlTemplate x:Key="{dxet:SearchControlThemeKey ResourceKey=Template, IsThemeIndependent=true}">
                                                <ContentControl dx:FocusHelper2.Focusable="False" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="2" />
                                                            <ColumnDefinition Width="45" />
                                                        </Grid.ColumnDefinitions>

                                                        <dxe:ComboBoxEdit MinHeight="22" Grid.Column="0" HorizontalAlignment="Stretch" 
                                                            ImmediatePopup="{Binding Path= SearchControlPropertyProvider.ActualImmediateMRUPopup, RelativeSource={RelativeSource TemplatedParent}}"
                                                            x:Name="editor" AllowDefaultButton="False"
                                                            ShowNullText="{Binding Path=SearchControlPropertyProvider.ActualShowFindButton, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource boolInverseConverter}}"
                                                            dxeh:MVVMFocusBehavior.IsFocused="{Binding Path=IsKeyboardFocusWithin, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}"
                                                            ItemsSource="{Binding Path=MRU, RelativeSource={RelativeSource TemplatedParent}}"
                                                            Margin="0"
                                                            ValidateOnEnterKeyPressed="True"
                                                            IncrementalFiltering="False"
                                                            IsCaseSensitiveSearch="True"
                                                            EditValuePostDelay="{Binding Path=SearchTextPostDelay, RelativeSource={RelativeSource TemplatedParent}}"
                                                            EditValuePostMode="{Binding Path=SearchControlPropertyProvider.ActualPostMode, RelativeSource={RelativeSource TemplatedParent}}"
                                                            EditValue="{Binding Path=SearchText, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                            IsTabStop="{Binding IsEditorTabStop, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}">
                                                            <dxe:ComboBoxEdit.NullText>
                                                                <MultiBinding>
                                                                    <Binding Path="NullText" RelativeSource="{RelativeSource TemplatedParent}" />
                                                                    <Binding Path="IsTabStop" RelativeSource="{RelativeSource Self}" Converter="{StaticResource EditorStringIdConverter}" ConverterParameter="LookUpSearch" />
                                                                    <MultiBinding.Converter>
                                                                        <dx:SearchControlNullTextConverter />
                                                                    </MultiBinding.Converter>
                                                                </MultiBinding>
                                                            </dxe:ComboBoxEdit.NullText>

                                                            <dxe:ComboBoxEdit.StyleSettings>
                                                                <dxe:SearchControlStyleSettings/>
                                                            </dxe:ComboBoxEdit.StyleSettings>

                                                            <dxe:ComboBoxEdit.Buttons>
                                                                <dxe:ButtonInfo GlyphKind="Custom" x:Name="buttonClear"
                                                                                Command="{Binding Path=SearchControlPropertyProvider.ClearSearchTextCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                                                                Visibility="{Binding Path=SearchControlPropertyProvider.ActualShowClearButton, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource boolToVisibilityConverter}}">
                                                                    <dxe:ButtonInfo.Template>
                                                                        <DataTemplate>
                                                                            <dxe:ButtonClose Command="{Binding Command}" Visibility="{Binding Visibility}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="2,0" />
                                                                        </DataTemplate>
                                                                    </dxe:ButtonInfo.Template>
                                                                </dxe:ButtonInfo>
                                                                <dxe:ButtonInfo GlyphKind="DropDown"
                                                                                Command="{Binding Path=OpenPopupCommand, ElementName=editor}"
                                                                                Visibility="{Binding Path=ShowMRUButton, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource boolToVisibilityConverter}}" />
                                                            </dxe:ComboBoxEdit.Buttons>
                                                        </dxe:ComboBoxEdit>

                                                        <Button Name="ExporttoExcel" ToolTip="{DynamicResource ExporttoExcel}"  Grid.Column="3"
                                                                Command="{Binding DataContext.ExportToExcelDiscountLogsCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                CommandParameter="{Binding ElementName=ChangeLogTableView}" Height="30" Width="30" >
                                                            <Button.ContentTemplate>
                                                                <DataTemplate>
                                                                    <Image Style="{DynamicResource PCMExportToExcelButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                                                                </DataTemplate>

                                                            </Button.ContentTemplate>
                                                            <Button.Style>
                                                                <Style TargetType="{x:Type Button}">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Cursor" Value="Hand"/>
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Button.Style>
                                                        </Button>
                                                    </Grid>
                                                </ContentControl>
                                            </ControlTemplate>
                                        </dxg:GridControl.Resources> 

                                        <dxg:GridColumn Header="{DynamicResource User}" FieldName="UserName" MinWidth="100" Width="180" ReadOnly="True" FixedWidth="True"  UnboundType="String" FilterPopupMode="CheckedList">
                                        </dxg:GridColumn>
                                        <dxg:GridColumn Header="{DynamicResource DateUser}" FieldName="Datetime"  MinWidth="100" Width="250"  ReadOnly="True" FixedWidth="True" FilterPopupMode="CheckedList">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:DateEditSettings DisplayFormat="g" Name="changeLogTime" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn Header="{DynamicResource Action}" FieldName="Comments"  MinWidth="100" Width="*" ReadOnly="True" FixedWidth="True" FilterPopupMode="CheckedList"/>

                                        <dxg:GridControl.TotalSummary>
                                            <dxg:GridSummaryItem x:Name="summary" FieldName="" SummaryType="Count" DisplayFormat="Total Count : {0}" Visible="True" Alignment="Left" />
                                        </dxg:GridControl.TotalSummary>

                                        <dxg:GridControl.View>
                                            <dxg:TableView x:Name="ChangeLogTableView"
                                                           NavigationStyle="Row"
                                                           AllowHorizontalScrollingVirtualization="True" 
                                                           RowDetailsVisibilityMode="Visible"
                                                           ShowHorizontalLines="True"
                                                           ShowSearchPanelMode="Always"
                                                           ShowColumnHeaders="True"
                                                           VerticalScrollbarVisibility="Auto" 
                                                           HorizontalScrollbarVisibility="Auto"
                                                           AllowFixedColumnMenu="False"
                                                           AutoWidth="False"
                                                           ShowFixedTotalSummary="True"
                                                           ShowSearchPanelCloseButton="True"
                                                           SearchPanelHorizontalAlignment="Stretch"
                                                           ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                                           AllowGrouping="True"
                                                           AllowColumnMoving="True"
                                                           ShowGroupPanel="False"
                                                           ShowIndicator="False"
                                                           AllowConditionalFormattingMenu="True">
                                            </dxg:TableView>
                                        </dxg:GridControl.View>
                                    </dxg:GridControl>
                                </DataTemplate>
                            </dxlc:GroupBox.MaximizedContentTemplate>
                        </dxlc:GroupBox>

                    </dxlc:FlowLayoutControl>
                </dxdo:LayoutPanel>
            </dxdo:LayoutGroup>
            <!--Article-->
            <dxdo:DockLayoutManager.AutoHideGroups>
                <!--Article-->
                <dxdo:AutoHideGroup DockType="Left" AutoHideSize="300,200">
                    <dxdo:LayoutPanel Caption="{DynamicResource Article}" ItemWidth="290"  AllowClose="False">

                        <!--<dxdo:LayoutPanel.ControlBoxContentTemplate>
                            <DataTemplate>
                                <dx:DropDownButton x:Name="dropdownButton" Content="Dropdown button"
                                                                                   HorizontalAlignment="Right" Height="24" Width="24" Grid.Row="0" Grid.Column="4" Margin="0,0,0,0" VerticalAlignment="Center">
                                    <Button.ToolTip>
                                        <TextBlock Text="Switch View"></TextBlock>
                                    </Button.ToolTip>

                                    <Button.ContentTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <Image Style="{DynamicResource PCMArticleSwitchViewButtonImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-20" />
                                            </Grid>
                                        </DataTemplate>
                                    </Button.ContentTemplate>
                                    <Button.Style>
                                        <Style TargetType="{x:Type Button}">
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Cursor" Value="Hand"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>

                                    <dxb:PopupMenu HorizontalAlignment="Stretch">
                                        <dxb:BarButtonItem Name="ReferenceView"  Content="Reference View" Command="{Binding DataContext.ShowReferenceViewCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                                           CommandParameter="{Binding ElementName=GridArticleMenuList}">
                                        </dxb:BarButtonItem>

                                        <dxb:BarButtonItem Name="DescriptionView" Content="Name View" Command="{Binding DataContext.ShowDescriptionViewCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                                           CommandParameter="{Binding ElementName=GridArticleMenuList}">
                                        </dxb:BarButtonItem>
                                    </dxb:PopupMenu>
                                </dx:DropDownButton>
                            </DataTemplate>
                        </dxdo:LayoutPanel.ControlBoxContentTemplate>-->

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>


                            <dxg:TreeListControl x:Name="GridArticleMenuList" Grid.Row="0" MaxHeight="1000"
                                                 HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                 SelectionMode="Row"
                                                 ItemsSource="{Binding DataContext.ArticleMenuList, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                 SelectedItem="{Binding DataContext.SelectedArticle,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >

                                <dxg:TreeListControl.Columns>
                                    <dxg:TreeListColumn Width="*" FieldName="Name" CellToolTipBinding="{Binding}" FixedWidth="True" ReadOnly="True">
                                        <!-- Defines cell tooltip template for the current column -->
                                        <dxg:TreeListColumn.CellToolTipTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Vertical">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock FontWeight="Bold" Text="Name: " />
                                                        <TextBlock Text="{Binding Description}" />
                                                    </StackPanel>
                                                </StackPanel>
                                            </DataTemplate>
                                        </dxg:TreeListColumn.CellToolTipTemplate>
                                    </dxg:TreeListColumn>

                                </dxg:TreeListControl.Columns>
                                <dxg:TreeListControl.View>
                                    <dxg:TreeListView Name="ArticleCategoryTreeListView" 
                                                            ShowTotalSummary="False"
                                                            AllowRecursiveNodeChecking="False"
                                                            ShowSearchPanelMode="Always"
                                                            ShowColumnHeaders="False"
                                                            ShowIndicator="False"
                                                            VerticalScrollbarVisibility="Visible"
                                                            ParentFieldName="ParentName" 
                                                            KeyFieldName="KeyName"
                                                            FilterMode="Extended"
                                                            SearchPanelHorizontalAlignment="Stretch"
                                                            AutoExpandAllNodes="True"
                                                            AllowDragDrop="True"
                                                            NavigationStyle="Row"
                                                            CompleteRecordDragDrop="ArticleMenutreeListView_CompleteRecordDragDrop"
                                                      >
                                        <!-- Defines cell tooltip template for the entire view -->
                                        <dxg:TreeListView.CellToolTipTemplate>
                                            <DataTemplate>
                                                <Border Background="LightGray" BorderThickness="0" Padding="10,2">
                                                    <Label Content="{Binding}" />
                                                </Border>
                                            </DataTemplate>
                                        </dxg:TreeListView.CellToolTipTemplate>
                                        <dxg:TreeListView.RowStyle>
                                            <Style TargetType="dxg:RowControl">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Row.IsBPLArticle_Current}" Value="true">
                                                        <Setter Property="Foreground" Value="Gray"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </dxg:TreeListView.RowStyle>
                                    </dxg:TreeListView>
                                </dxg:TreeListControl.View>
                            </dxg:TreeListControl>
                        </Grid>
                    </dxdo:LayoutPanel>
                </dxdo:AutoHideGroup>
            </dxdo:DockLayoutManager.AutoHideGroups>
        </dxdo:DockLayoutManager>
        <Grid Background="Transparent" ShowGridLines="False" Grid.Row="2" VerticalAlignment="Center"  HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Row="3" Grid.Column="0"
                    Style="{DynamicResource Button16Style}"
                    HorizontalAlignment="Right"
                    Content="{DynamicResource AddCatalogueAcceptButton}"
                    Command="{Binding DataContext.AcceptButtonCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                    IsEnabled="{Binding DataContext.IsEnabledAcceptButton, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"                    
                    Height="30"
                    Width="100"/>

            <Button Grid.Row="3" Grid.Column="2"
                    Style="{DynamicResource Button16Style}"
                    HorizontalAlignment="Left"
                    Content="{DynamicResource AddCatalogueCancelButton}"
                    Command="{Binding DataContext.CancelButtonCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                    Height="30"
                    Width="100" />
        </Grid>
    </Grid>
</dxwui:WinUIDialogWindow>
