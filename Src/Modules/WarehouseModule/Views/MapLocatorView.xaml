<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.Warehouse.Views.MapLocatorView"
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:dxm="http://schemas.devexpress.com/winfx/2008/xaml/map"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:local="clr-namespace:Emdep.Geos.Modules.Warehouse.Views"
                         xmlns:WmsApplication="clr-namespace:Emdep.Geos.Modules.Warehouse"
                         mc:Ignorable="d" 
                         Height="500"
                         TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}" 
                         Style="{DynamicResource WinUIDialogWindowStyle}" >
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding MapLocatorViewCancelCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="50" />
            <!--<RowDefinition Height="*" />-->
        </Grid.RowDefinitions>

        <dxm:MapControl Name="mapControl" Height="{Binding DataContext.ScreenHeight, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">

            <!--<dxm:MapControl.ScalePanelOptions>
                <dxm:ScalePanelOptions Visible="False" />
            </dxm:MapControl.ScalePanelOptions>
            <dxm:MapControl.ZoomTrackbarOptions>
                <dxm:ZoomTrackbarOptions Visible="False" />
            </dxm:MapControl.ZoomTrackbarOptions>
            <dxm:MapControl.ScrollButtonsOptions>
                <dxm:ScrollButtonsOptions Visible="False" />
            </dxm:MapControl.ScrollButtonsOptions>
            <dxm:MapControl.CoordinatesPanelOptions>
                <dxm:CoordinatesPanelOptions Visible="False" />
            </dxm:MapControl.CoordinatesPanelOptions>-->

            <dxm:MapControl.MapEditor>
                <!--MapItemCreating="{DXEvent 'ApplyColors(@args.Item)'}"-->
                <dxm:MapEditor x:Name="Editor" ActiveLayer="{Binding ElementName=DataLayer}" >
                    <dxm:MapEditor.Mode>
                        <dxm:MapEditorEditMode/>
                    </dxm:MapEditor.Mode>
                    <dxmvvm:Interaction.Behaviors>
                        <dxmvvm:EventToCommand EventName="MapItemCreating" Command="{Binding MapItemCreatingCommand}"
                                           PassEventArgsToCommand="True"  />
                        <dxmvvm:EventToCommand EventName="MapItemEdited" Command="{Binding MapItemEditedCommand}"
                                           PassEventArgsToCommand="True"  />
                    </dxmvvm:Interaction.Behaviors>
                </dxm:MapEditor>
            </dxm:MapControl.MapEditor>

            <dxm:VectorLayer x:Name="DataLayer" EnableSelection="false">
                <dxm:SvgFileDataAdapter FileUri="{Binding SvgUri, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                        BoundaryPoint1="3.0549583994941538,-176.15739521873573" 
                                        BoundaryPoint2="84.893298751861167,4.9498408125624227"/>
                <dxmvvm:Interaction.Behaviors>
                    <dxmvvm:EventToCommand EventName="DataLoaded" Command="{Binding VectorLayerDataLoadedCommand}"
                                           CommandParameter="{Binding ElementName=mapControl}" />
                </dxmvvm:Interaction.Behaviors>
            </dxm:VectorLayer>

            <!--<dxm:VectorLayer x:Name="vectorLayer">

                <dxm:ListSourceDataAdapter DataSource="{Binding MapItems, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                    <dxmvvm:Interaction.Behaviors>
                        <dxmvvm:EventToCommand EventName="CustomizeMapItem" Command="{Binding CustomizeMapItemCommand}" PassEventArgsToCommand="True" />
                    </dxmvvm:Interaction.Behaviors>

                    <dxm:ListSourceDataAdapter.Mappings>
                        <dxm:MapItemMappingInfo Latitude="Latitude" Longitude="Longitude" />
                    </dxm:ListSourceDataAdapter.Mappings>

                    <dxm:ListSourceDataAdapter.ItemSettings>
                        <dxm:MapRectangleSettings />
                    </dxm:ListSourceDataAdapter.ItemSettings>
                </dxm:ListSourceDataAdapter>
            </dxm:VectorLayer>-->

        </dxm:MapControl>

        <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                    HorizontalAlignment="Center" 
                    Orientation="Horizontal"
                    Margin="20,10,0,0"
                    Width="290">

            <Button Content="{DynamicResource CustomerAddViewAccept}"
                    Command="{Binding MapLocatorViewAcceptCommand}"
                    Height="30"
                    Width="100"
                    Margin="0,0,30,0"
                    VerticalAlignment="Bottom"
                    IsEnabled="{Binding Source={x:Static WmsApplication:WarehouseCommon.Instance}, Path=IsPermissionEnabled}" />

            <Button Content="{DynamicResource CustomerAddViewCancel}"
                    Command="{Binding MapLocatorViewCancelCommand}"
                    Height="30"
                    Width="100"
                    Margin="30,0,0,0"
                    VerticalAlignment="Bottom"
                    />
        </StackPanel>


    </Grid>
</dxwui:WinUIDialogWindow>
