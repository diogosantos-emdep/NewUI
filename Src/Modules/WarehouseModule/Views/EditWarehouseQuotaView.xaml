<dxwui:WinUIDialogWindow xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 
                        x:Class="Emdep.Geos.Modules.Warehouse.Views.EditWarehouseQuotaView"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                        xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
                        xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                        xmlns:WarehouseCommon ="clr-namespace:Emdep.Geos.Modules.Warehouse"
                        xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                        xmlns:CrmApplication="clr-namespace:Emdep.Geos.Modules.Warehouse"
                        xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                        xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
                        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                        xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                        xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                        mc:Ignorable="d" 
                        xmlns:Validation="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                        xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
                        xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                        Title="{Binding WindowHeader,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"            
                        TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}" 
                        Style="{DynamicResource WinUIDialogWindowStyle}"
                        xmlns:local="clr-namespace:Emdep.Geos.Modules.Warehouse.Views"
                        
                        >
    <dxwui:WinUIDialogWindow.Resources>
      

    </dxwui:WinUIDialogWindow.Resources>
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding EditWarehouseQuotaViewCancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    <Grid>
        <Grid.Resources>
            <Style TargetType="GroupBox">
                <Setter Property="Margin" Value="4 2"/>
                <Setter Property="HeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" FontWeight="Medium"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="TabItemStyle" TargetType="dx:DXTabItem">
                <Setter Property="Header" Value="{Binding Year}"/>
                <Setter Property="Content" Value="{Binding}"/>
            </Style>
            <DataTemplate x:Key="TabItemHeaderTemplate">
                <TextBlock Text="{Binding}" FontWeight="Medium"/>
            </DataTemplate>
            <DataTemplate x:Key="TabItemContentTemplate">
         
            </DataTemplate>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="79*"/>
            <RowDefinition Height="5*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="1*"/>
                <RowDefinition Height="5*"/>
                <RowDefinition Height="5*"/>
                <RowDefinition Height="5*"/>
            </Grid.RowDefinitions>
            <Label Content="{DynamicResource EditWarehouseQuotaYear}" Grid.Row="0" Grid.Column="0"  Height="30" FontSize="16" Margin="5" Width="70" HorizontalAlignment="Left"/>
            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding EditYear}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" HorizontalAlignment="Stretch" FontSize="16" Visibility="{Binding Isexist ,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"  />


            <DockPanel  Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Height="30" Visibility="{Binding IsNew ,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" >
                <TextBlock Text="{DynamicResource EditWarehouseQuotaName}"  Margin="5" VerticalAlignment="Bottom"  />
            </DockPanel>

            <dxe:ComboBoxEdit Name="CbeWareHouse" Style="{DynamicResource ComboBoxEditStyle}" Grid.Row="1" Grid.Column="1"  Width="100" Height="30" Visibility="{Binding IsNew ,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                                      Margin="5" VerticalAlignment="Bottom" HorizontalAlignment="Right" IsTextEditable="False"
                                      ItemsSource ="{Binding Source={x:Static WarehouseCommon:WarehouseCommon.Instance}, Path=WarehouseList ,UpdateSourceTrigger=PropertyChanged , Mode=TwoWay}"
                                      SelectedItem="{Binding Source={x:Static WarehouseCommon:WarehouseCommon.Instance}, Path=Selectedwarehouse,UpdateSourceTrigger=PropertyChanged}"
                                      DisplayMember="Name" ShowError="False" ShowErrorToolTip="False" >

                <dxmvvm:Interaction.Triggers>
                    <dxmvvm:EventToCommand EventName="EditValueChanged"
                                               Command="{Binding CommandWarehouseEditValueChanged}" CommandParameter="{Binding ElementName=CbeWareHouse,Path=SelectedItem}"
                                              />
                </dxmvvm:Interaction.Triggers>
            </dxe:ComboBoxEdit>
            
            
            <dxe:ComboBoxEdit  Grid.Row="0" Grid.Column="1"   HorizontalAlignment="Left" VerticalAlignment="Center" Height="30" Width="100" Visibility="{Binding IsNew ,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                                        Margin="5" ItemsSource="{Binding AddyearsList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                        SelectedItem="{Binding EditYear ,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  >

              
            </dxe:ComboBoxEdit>

            <!--Edit EditWarehouseQuotaCurrency-->
            <!--<ComboBox Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" Height="30" Width="70" SelectedItem="{Binding Year}" ItemsSource="{Binding Years}" Margin="5" />-->
            <Label Content="{DynamicResource EditWarehouseQuotaCurrency}" Grid.Row="1" Grid.Column="0"  Height="30" FontSize="16" Margin="5" Width="70" HorizontalAlignment="Left" Visibility="{Binding Isexist}"/>
            <dxe:ComboBoxEdit  Grid.Row="1" Grid.Column="1"   HorizontalAlignment="Left" VerticalAlignment="Center" Height="30" Width="100" Visibility="{Binding Isexist}"
                                       DisplayMember="Name" Margin="5" ItemsSource="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=Currencies,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                       SelectedItem="{Binding EditSelectedCurrency ,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  >

                
            </dxe:ComboBoxEdit>

            <!--Add EditWarehouseQuotaCurrency-->
            <Label Content="{DynamicResource EditWarehouseQuotaCurrency}" Grid.Row="2" Grid.Column="0"  Height="30" FontSize="16" Margin="5" Width="70" HorizontalAlignment="Left" Visibility="{Binding IsNew}"/>
            <dxe:ComboBoxEdit  Grid.Row="2" Grid.Column="1"   HorizontalAlignment="Left" VerticalAlignment="Center" Height="30" Width="100" Visibility="{Binding IsNew}"
                                       DisplayMember="Name" Margin="5" ItemsSource="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=Currencies,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                       SelectedItem="{Binding EditSelectedCurrency ,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  >


            </dxe:ComboBoxEdit>

            <!--Edit EditWarehouseQuotsAmount-->
            <Label Content="{DynamicResource EditWarehouseQuotsAmount}" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Margin="5" HorizontalAlignment="Stretch" Visibility="{Binding Isexist}"/>

            <dxe:TextEdit Mask="###,###,###,###,###,###,###,##0.00;" MaskUseAsDisplayFormat="True" MaskType="Numeric" Text="{Binding DataContext.EditargetAmount ,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" 
                                              Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="1" Visibility="{Binding Isexist}"
                                              HorizontalAlignment="Stretch"
                                              VerticalScrollBarVisibility="Disabled"
                                              VerticalContentAlignment="Stretch" Width="100"
                                              HorizontalContentAlignment="Left" MaxLength="70"       
                                              ToolTip="{Binding EditargetAmount}"
                                              Height="30" Margin="5"
                                             
                                              >
                

                <Binding Path="DataContext.EditargetAmount" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay"
                         ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:RequiredValidationRule FieldName="EditargetAmount" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>


            </dxe:TextEdit>


            <!--Add EditWarehouseQuotsAmount-->
            <Label Content="{DynamicResource EditWarehouseQuotsAmount}" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Margin="5" HorizontalAlignment="Stretch" Visibility="{Binding IsNew}"/>

            <dxe:TextEdit  Mask="###,###,###,###,###,###,###,##0.00;" MaskUseAsDisplayFormat="True" MaskType="Numeric" Text="{Binding DataContext.EditargetAmount , Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" 
                                              Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="1" Visibility="{Binding IsNew}"
                                              HorizontalAlignment="Stretch"
                                              VerticalScrollBarVisibility="Disabled"
                                              VerticalContentAlignment="Stretch" Width="100"
                                              HorizontalContentAlignment="Right" MaxLength="70"       
                                              ToolTip="{Binding Path=Text, RelativeSource={RelativeSource Self}}"  
                                              Height="30" Margin="5"
                                             
                                              >

                <!--<dxe:TextEdit.Style>
                    <Style TargetType="dxe:TextEdit">
                        <Setter Property="Validation.ErrorTemplate">
                            <Setter.Value>
                                <ControlTemplate>
                                    <DockPanel>
                                        <Border BorderBrush="Red" BorderThickness="1" Margin="0,0,4,0">
                                            <AdornedElementPlaceholder/>
                                        </Border>
                                        <TextBlock Text="!" Foreground="Red" VerticalAlignment="Center"/>
                                    </DockPanel>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </dxe:TextEdit.Style>-->

                <Binding Path="DataContext.EditargetAmount" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay"
                         ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:RequiredValidationRule FieldName="EditargetAmount" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
                
                

            </dxe:TextEdit>



            <!--Edit Buttons -->
            <Button Content="{DynamicResource EditWarehouseQuotsViewAccept}"  FontSize="16" Height="30" Grid.Column="0" Grid.Row="4" Visibility="{Binding Isexist}"
                            Width="100"    Command="{Binding  DataContext.EditWarehouseQuotaViewAcceptButtonCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                            HorizontalAlignment="Right" Margin="0,10,30,0"   >

                <Button.Style>

                    <Style TargetType="{x:Type Button}">
                        <Setter Property="FontSize" Value="16" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionReadOnly}" Value="True">
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionReadOnly}" Value="False">
                                <Setter Property="IsEnabled" Value="True"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>

            </Button>
            <Button Content="{DynamicResource EditWarehouseQuotsViewCancel}" Grid.Column="1" Grid.Row="4"
                     HorizontalAlignment="Left" Visibility="{Binding Isexist}"
                     FontSize="16" Command="{Binding EditWarehouseQuotaViewCancelButtonCommand}"
                     Height="30" Grid.ColumnSpan="3" Margin="0,10,30,0" 
                     Width="100"
                     Style="{DynamicResource Button16Style}"/>

        </Grid>

        
        <!--Add Buttons-->
        <Button Content="{DynamicResource EditWarehouseQuotsViewAccept}"  FontSize="16" Height="30" Grid.Column="0" Grid.Row="1" Visibility="{Binding IsNew}"
                            Width="100"    Command="{Binding  DataContext.EditWarehouseQuotaViewAcceptButtonCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                            HorizontalAlignment="Right" Margin="0,10,30,0"   >

            <Button.Style>

                <Style TargetType="{x:Type Button}">
                    <Setter Property="FontSize" Value="16" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionReadOnly}" Value="True">
                            <Setter Property="IsEnabled" Value="False"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionReadOnly}" Value="False">
                            <Setter Property="IsEnabled" Value="True"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>

        </Button>
        <Button Content="{DynamicResource EditWarehouseQuotsViewCancel}" Grid.Column="1" Grid.Row="1"
                     HorizontalAlignment="Left" Visibility="{Binding IsNew}"
                     FontSize="16" Command="{Binding EditWarehouseQuotaViewCancelButtonCommand}"
                     Height="30" Grid.ColumnSpan="3" Margin="0,10,30,0" 
                     Width="100"
                     Style="{DynamicResource Button16Style}"/>


    </Grid>

    <!--<i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>-->

</dxwui:WinUIDialogWindow>
