<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.OTM.Views.SystemSettingsView"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"    
xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
xmlns:ViewModels="clr-namespace:Emdep.Geos.Modules.OTM.ViewModels"
xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
            xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
            xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
mc:Ignorable="d" 
d:DesignHeight="400" d:DesignWidth="900"
                         Title="{DynamicResource OTMSystemSettings}"
TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}">
    <!--[Rahul.Gadhave][[GEOS2-9281][Date:05-09-2025]-->
    <dxwui:WinUIDialogWindow.Resources>
        <Style x:Key="TextBlock14Style" BasedOn="{ StaticResource TextBlockStyle}" TargetType="{x:Type TextBlock}">
            <Setter Property="FontSize" Value="14" />
        </Style>
    </dxwui:WinUIDialogWindow.Resources>
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding MyPreferencesViewCancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="10"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="10"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="10"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <dx:DXTabControl Grid.Row="1" Width="750">

            <dx:DXTabItem Header="{DynamicResource SettingJobDescription}" Width="180" Height="60">
                <dx:DXTabItem.HeaderTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Height="20" Width="20" Style="{ DynamicResource ShortcutImageStyle}" />
                            <TextBlock Text="{DynamicResource SettingJobDescriptionTitle}" Margin="3,0,0,0" FontWeight="Bold"/>
                        </StackPanel>
                    </DataTemplate>
                </dx:DXTabItem.HeaderTemplate>

                <dx:DXTabItem.ContentTemplate>
                    <DataTemplate>
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <Grid ShowGridLines="False" Margin="10">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="35"/>
                                    <RowDefinition Height="35"/>
                                    <RowDefinition Height="35"/>
                                    <RowDefinition Height="10"/>
                                    <RowDefinition Height="*"/>

                                </Grid.RowDefinitions>

                                <!-- Label + Dropdown + Add Button -->

                                <TextBlock Grid.Row="1" Text="{DynamicResource SelectSettingJobDescription}"
                               VerticalAlignment="Center"
                               Margin="10,0,10,0"
                               Style="{StaticResource TextBlock14Style}"/>
                                <dxe:ComboBoxEdit x:Name="editor1" Width="450" HorizontalAlignment="Left"
                                                Margin="11,0,0,0"
                                                Grid.Row="2"
                                                IsTextEditable="True"
                                                AutoComplete="True"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                FilterCondition="Contains"
                                               AllowNullInput="True"
                                                  EditValue="{Binding DataContext.SelectedJobDescriptions,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,ValidatesOnDataErrors=True}"
                                                 ItemsSource="{Binding DataContext.JobDescriptionsList,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                   AllowUpdateTwoWayBoundPropertiesOnSynchronization="True" FocusPopupOnOpen="False" ValidateOnTextInput="False" PopupOpening="ComboBoxEdit_PopupOpening"
                                        PopupClosing="ComboBoxEdit_PopupClosing" 
                                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                 DisplayMember="JobDescriptionTitle"
                                                    AllowDefaultButton="True" 
                                                    NullText="Job Description"
                                                     Style="{DynamicResource ComboBoxEditStyle}">
                                    <dxe:ComboBoxEdit.StyleSettings>
                                        <dxe:CheckedComboBoxStyleSettings />
                                    </dxe:ComboBoxEdit.StyleSettings>
                                </dxe:ComboBoxEdit>
                                <Button Visibility="Visible"  Width="38" Height="33" Grid.Row="2"  
                                          Command="{Binding DataContext.AddJobDescriptonInGrid, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                          CommandParameter="{Binding ElementName=JobDescriptionTableView}" Margin="470,0,6,-1">
                                    <!--<Button.ToolTip>
                                            <TextBlock Text="{DynamicResource AddNewOtRequestTemplates}"/>
                                        </Button.ToolTip>-->
                                    <Button.ContentTemplate>
                                        <DataTemplate>
                                            <Image Style="{DynamicResource AddNewButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                                        </DataTemplate>
                                    </Button.ContentTemplate>
                                </Button>
                                <!-- Grid for Selected Job Descriptions -->
                                <!--<dxg:GridControl Grid.Row="6"
                                       ItemsSource="{Binding DataContext.AddedJobDescriptionsList,
                                        RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                         AutoGenerateColumns="None"
                                         Height="250"
                                         Width="500"
                                         ShowBorder="True">
                                    <dxg:GridControl.View>
                                        <dxg:TableView ShowGroupPanel="False"
                                                       AllowGrouping="False"
                                                       AllowSorting="False"
                                                       AllowColumnFiltering="False"
                                                       ShowHorizontalLines="True"
                                                       ShowVerticalLines="True"
                                                       AutoWidth="False"
                                                       ShowTotalSummary="True"
                                                       NavigationStyle="Row"/>
                                    </dxg:GridControl.View>
                                    <dxg:GridControl.Columns>
                                         Job Description column 
                                        <dxg:GridColumn Header="{DynamicResource SettingJobDescription}" FieldName="JobDescriptionTitle" Width="*" ReadOnly="True"  AllowBestFit="true"/>

                                         Remove button column 
                                        <dxg:GridColumn  Header="{DynamicResource SettingRemove}"  Width="70" MinWidth="70" MaxWidth="70" ReadOnly="True"  AllowBestFit="true">
                                            <dxg:GridColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Button Command="{Binding DataContext.RemoveJobDescriptionCommand, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                        CommandParameter="{Binding}"
                                                        Width="70"
                                                        Height="30"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        ToolTip="Remove">
                                                        <Button.ContentTemplate>
                                                            <DataTemplate>
                                                                <Image Height="16" Width="16" Style="{ DynamicResource DeleteStyle}" />
                                                            </DataTemplate>
                                                        </Button.ContentTemplate>
                                                        <Button.Style>
                                                            <Style TargetType="{x:Type Button}">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="Cursor" Value="Hand"/>
                                                                    </Trigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>
                                                </DataTemplate>
                                            </dxg:GridColumn.CellTemplate>
                                        </dxg:GridColumn>
                                    </dxg:GridControl.Columns>

                                     Total Count footer 
                                    <dxg:GridControl.TotalSummary>
                                        <dxg:GridSummaryItem FieldName="JobDescriptionTitle" SummaryType="Count" DisplayFormat="Total Count: {0}"/>
                                    </dxg:GridControl.TotalSummary>
                                </dxg:GridControl>-->


                                <dxg:GridControl DockPanel.Dock="Right" Name="gridControl" SelectionMode="Row" Grid.Row="6" ScrollViewer.VerticalScrollBarVisibility="Auto"
                                    Height="250"
                                    Width="500" 
                                    
                                     ShowBorder="True" 
                                    ItemsSource="{Binding DataContext.AddedJobDescriptionsList,
                                     RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                     ImplyNullLikeEmptyStringWhenFiltering="True">

                                    <dxg:GridColumn Header="{DynamicResource SettingJobDescription}" FieldName="JobDescriptionTitle" Width="*" ReadOnly="True"  AllowBestFit="true"/>

                                    <dxg:GridColumn  Header="{DynamicResource SettingRemove}"  Width="70" MinWidth="70" MaxWidth="70" ReadOnly="True"  AllowBestFit="true">
                                        <dxg:GridColumn.CellTemplate>
                                            <DataTemplate>
                                                <Button Command="{Binding DataContext.RemoveJobDescriptionCommand, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                        CommandParameter="{Binding}"
                                                        Width="70"
                                                        Height="30"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        ToolTip="Remove">
                                                    <Button.ContentTemplate>
                                                        <DataTemplate>
                                                            <Image Height="16" Width="16" Style="{ DynamicResource DeleteStyle}" />
                                                        </DataTemplate>
                                                    </Button.ContentTemplate>
                                                    <Button.Style>
                                                        <Style TargetType="{x:Type Button}">
                                                            <Style.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Cursor" Value="Hand"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Button.Style>
                                                </Button>
                                            </DataTemplate>
                                        </dxg:GridColumn.CellTemplate>
                                    </dxg:GridColumn>

                                    <dxg:GridControl.View>
                                        <dxg:TableView x:Name="EmployeeExpenseTableView"
                                              NavigationStyle="Row"
                                              RowDetailsVisibilityMode="Visible"
                                              ShowHorizontalLines="True"
                                              ShowSearchPanelMode="Never"
                                              ShowFixedTotalSummary="True"
                                              ShowColumnHeaders="True"
                                              VerticalScrollbarVisibility="Auto" 
                                              HorizontalScrollbarVisibility="Auto"
                                              AllowFixedColumnMenu="False"
                                              SearchPanelHorizontalAlignment="Stretch"
                                              EnableImmediatePosting="True"
                                              ImmediateUpdateRowPosition="True"
                                              AllowEditing="True"
                                              ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                              AllowGrouping="True"
                                              AllowBestFit="True"
                                              ShowGroupPanel="False"
                                              ShowIndicator="False"       
                                              UseLegacyFilterEditor="True">
                                        </dxg:TableView>
                                    </dxg:GridControl.View>
                                    <dxg:GridControl.TotalSummary>
                                        <dxg:GridSummaryItem FieldName="JobDescriptionTitle"   Alignment="Left" SummaryType="Count" DisplayFormat="Total Count: {0}"/>
                                    </dxg:GridControl.TotalSummary>
                                </dxg:GridControl>
                            </Grid>
                        </ScrollViewer>
                    </DataTemplate>
                </dx:DXTabItem.ContentTemplate>
            </dx:DXTabItem>
            <dx:DXTabControl.View>
                <dx:TabControlScrollView HeaderLocation="Left" HeaderOrientation="Horizontal" />
            </dx:DXTabControl.View>
        </dx:DXTabControl>
        <StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2"
                    HorizontalAlignment="Center" 
                    Orientation="Horizontal"
                    Margin="20,0,0,0"
                    Width="290">

            <Button Content="{DynamicResource MyPreferencesViewAccept}"
                    Command="{Binding MyPreferencesViewAcceptButtonCommand}" 
                    Height="30"
                    Width="100" 
                    Margin="0,0,30,0"
                    Style="{DynamicResource Button16Style}"
                    VerticalAlignment="Bottom" />

            <Button Content="{DynamicResource MyPreferencesViewCancel}"
                    Command="{Binding MyPreferencesViewCancelButtonCommand}" 
                    Height="30"
                    Width="100"
                    Margin="30,0,0,0"
                    Style="{DynamicResource Button16Style}"
                    VerticalAlignment="Bottom" />

        </StackPanel>
    </Grid>
    <!--<i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>-->

</dxwui:WinUIDialogWindow>
