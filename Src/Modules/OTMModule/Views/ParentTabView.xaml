<UserControl x:Class="Emdep.Geos.Modules.OTM.Views.ParentTabView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:local="clr-namespace:Emdep.Geos.Modules.OTM.Views"
             xmlns:Viewmodel="clr-namespace:Emdep.Geos.Modules.OTM.ViewModels"              
             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking" 
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars" 
             xmlns:Converters="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             xmlns:dxnav="http://schemas.devexpress.com/winfx/2008/xaml/navigation"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"


             xmlns:dxcn="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <Converters:ForegroundColorConverter x:Key="ForegroundColorConverter"/>
        <Converters:ImageConverterByModule x:Key="ImageConverterByModule"/>
        <DataTemplate x:Key="TabControlBackground">
            <dxcn:TabBorder ViewInfo="{Binding}" BorderBrush="#808080" BorderThickness="1" BackgroundMode="BorderBackground" BorderMode="BorderBrush"/>
        </DataTemplate>
        <DataTemplate x:Key="TabItemNormalBackground">
            <dxcn:TabBorder ViewInfo="{Binding}" BackgroundMode="BorderBackground" BorderMode="BorderBrush" BorderThickness="1,1,1,0" BorderMargin="0,0,1,0" HoldBorderThickness="2" HoldBorderMargin="0,0,2,2"/>
        </DataTemplate>
        <DataTemplate x:Key="TabItemHoverBackground">
            <dxcn:TabBorder ViewInfo="{Binding}" BackgroundMode="BorderBackground" BorderMode="BorderBrush" BorderThickness="1,1,1,0" BorderMargin="0,0,1,0" HoldBorderThickness="2" HoldBorderMargin="0,0,2,2"/>
        </DataTemplate>
        <DataTemplate x:Key="TabItemSelectedBackground">
            <dxcn:TabBorder ViewInfo="{Binding}" BorderBrush="Orange" BackgroundMode="BorderBackground" BorderMode="BorderBrush" BorderThickness="1,3,1,0" BorderMargin="0,-1,1,-1" HoldBorderThickness="2" HoldBorderMargin="0,0,2,2"/>
        </DataTemplate>
        <DataTemplate x:Key="TabItemFocusedBackground">
            <dxcn:TabBorder ViewInfo="{Binding}" BorderBrush="Orange" BorderThickness="1,3,1,0"  HoldBorderThickness="0,2,0,0" HoldBorderMargin="0,0,2,2" />
        </DataTemplate>
        <DataTemplate x:Key="ConfiguredItemSelectedBackground">
            <dxcn:TabBorder ViewInfo="{Binding}" BorderBrush="#c7bfe6" BackgroundMode="BorderBackground" BorderMode="BorderBrush" BorderThickness="1,3,1,0" BorderMargin="0,-1,1,-1" HoldBorderThickness="2" HoldBorderMargin="0,0,2,2"/>
        </DataTemplate>
        <DataTemplate x:Key="ConfiguredTabItemFocusedBackground">
            <dxcn:TabBorder ViewInfo="{Binding}" BorderBrush="#c7bfe6" BorderThickness="1,3,1,0"  HoldBorderThickness="0,2,0,0" HoldBorderMargin="0,0,2,2" />
        </DataTemplate>
        <DataTemplate DataType="{x:Type Viewmodel:OTMImportTemplateViewModel}">
            <local:OTMImportTemplateView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type Viewmodel:PORegisterViewModel}">
            <local:PORegisterView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type Viewmodel:PORequestsViewModel}">
            <local:PORequestsView />
        </DataTemplate>
    </UserControl.Resources>
    <Grid>
        <dx:DXTabControl ItemsSource="{Binding Tabs}"   SelectedItem="{Binding SelectedTab, Mode=TwoWay}" TabContentCacheMode="CacheAllTabs" >
            <dx:DXTabControl.ItemContainerStyle>
                <Style TargetType="dx:DXTabItem">
                    <Setter Property="Header" Value="{DXBinding Expr='TabName'}" />
                    <Setter Property="CloseCommand" Value="{Binding RelativeSource={RelativeSource AncestorType=dx:DXTabControl}, Path=DataContext.CancelButtonCommand}"/>
                    <Setter Property="CloseCommandParameter" Value="{Binding}"/>
                    <Setter Property="HoverBackgroundTemplate" Value="{StaticResource TabItemHoverBackground}"/>
                    <Setter Property="NormalBackgroundTemplate" Value="{StaticResource TabItemNormalBackground}"/>
                    <Setter Property="SelectedBackgroundTemplate" Value="{StaticResource TabItemSelectedBackground}"/>
                    <Setter Property="FocusedBackgroundTemplate" Value="{StaticResource TabItemFocusedBackground}"/>
                    <!--<Style.Triggers>
                        <DataTrigger Binding="{Binding Position}" Value="3">
                            <Setter Property="SelectedBackgroundTemplate" Value="{StaticResource ConfiguredItemSelectedBackground}" />
                            <Setter Property="FocusedBackgroundTemplate" Value="{StaticResource ConfiguredTabItemFocusedBackground}" />
                        </DataTrigger>
                    </Style.Triggers>-->
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding TabName}" Value="PO Request Templates">
                            <Setter Property="SelectedBackgroundTemplate" Value="{StaticResource ConfiguredItemSelectedBackground}" />
                            <Setter Property="FocusedBackgroundTemplate" Value="{StaticResource ConfiguredTabItemFocusedBackground}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding TabName}" Value="PO Solicitar plantillas">
                            <Setter Property="SelectedBackgroundTemplate" Value="{StaticResource ConfiguredItemSelectedBackground}" />
                            <Setter Property="FocusedBackgroundTemplate" Value="{StaticResource ConfiguredTabItemFocusedBackground}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </dx:DXTabControl.ItemContainerStyle>
            <dx:DXTabControl.View>
                <dx:TabControlScrollView HideButtonShowMode="InAllTabs" SingleTabItemHideMode="Hide" NewButtonShowMode="NoWhere" NewTabCommand="{Binding AddNewTabCommand}" />
            </dx:DXTabControl.View>
        </dx:DXTabControl>
    </Grid>
</UserControl>
