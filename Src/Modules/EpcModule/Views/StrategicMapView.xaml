<UserControl x:Class="Emdep.Geos.Modules.Epc.Views.StrategicMapView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:local="clr-namespace:Emdep.Geos.Modules.Epc.Views"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    
    <UserControl.Resources>
        <dxmvvm:ObjectToObjectConverter x:Key="TrendToImageConverter">
            <dxmvvm:MapItem Source="1">
                <dxmvvm:MapItem.Target>
                    <BitmapImage UriSource="/Emdep.Geos.Modules.Epc;component/Images/Task/DownArrow.png"/>
                </dxmvvm:MapItem.Target>
            </dxmvvm:MapItem>
            <dxmvvm:MapItem Source="2">
                <dxmvvm:MapItem.Target>
                    <BitmapImage UriSource="/Emdep.Geos.Modules.Epc;component/Images/Task/SideArrow.png"/>
                </dxmvvm:MapItem.Target>
            </dxmvvm:MapItem>
            <dxmvvm:MapItem Source="3">
                <dxmvvm:MapItem.Target>
                    <BitmapImage UriSource="/Emdep.Geos.Modules.Epc;component/Images/Task/UpArrow.png"/>
                </dxmvvm:MapItem.Target>
            </dxmvvm:MapItem>
        </dxmvvm:ObjectToObjectConverter>

        <UIHelper:ColumnTemplateSelector x:Key="ColumnTemplateSelector"/>

        <Style x:Key="ColumnStyle" TargetType="dxg:GridColumn">
            <Setter Property="FilterPopupMode" Value="CheckedList"/>
        </Style>
        <DataTemplate x:Key="DefaultColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding FieldName}" Header="{Binding HeaderText}" AllowCellMerge="{Binding AllowCellMerge}"  FixedWidth="{Binding FixedWidth}"   AllowBestFit="true" Width="{Binding  Width}" AllowEditing="False" AllowAutoFilter="False"/>
            </ContentControl>
        </DataTemplate>

        <DataTemplate x:Key="ArrayColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=FieldName}" UIHelper:ColumnBindingHelper.BindingPath="{Binding FieldName}" Header="{Binding HeaderText}" AllowCellMerge="{Binding AllowCellMerge}"  FixedWidth="{Binding FixedWidth}"  AllowBestFit="true" Width="{Binding  Width}"  AllowEditing="False"  />
            </ContentControl>
        </DataTemplate>
        <UIHelper:CellTemplateSelector x:Key="templateSelector"/>
        <DataTemplate x:Key="evenValueTemplate">
            <TextBlock Background="{Binding Path=Value.BackgroundColor}" Text="{Binding Path=Value.TextValue}"
                       TextAlignment="{Binding Value.TextAlignment}" Foreground="{Binding Path=Value.ForegroundColor}" />
        </DataTemplate>

        <DataTemplate x:Key="ArrowImageContactDataTemplate" >
            <Image  Width="16" Height="16"      Source="{Binding Path=Data.Trend, Converter={StaticResource TrendToImageConverter}}"></Image>
        </DataTemplate>
        <DataTemplate x:Key="ArrowImageColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding FieldName}" AllowCellMerge="{Binding AllowCellMerge}" Width="{Binding  Width}"  FixedWidth="{Binding FixedWidth}" CellTemplate="{StaticResource ArrowImageContactDataTemplate}" AllowEditing="False"/>
            </ContentControl>
        </DataTemplate>

        <DataTemplate x:Key="TextColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding FieldName}" AllowCellMerge="{Binding AllowCellMerge}"  Width="{Binding  Width}" FixedWidth="{Binding FixedWidth}"  AllowEditing="False"  >
                    <dxg:GridColumn.CellTemplateSelector>
                        <UIHelper:CellTemplateSelector/>
                    </dxg:GridColumn.CellTemplateSelector>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="ImageColumnTemplate" >
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding FieldName, Converter={StaticResource TrendToImageConverter}}" Width="{Binding  Width}" FixedWidth="{Binding FixedWidth}" AllowCellMerge="{Binding AllowCellMerge}" AllowEditing="{Binding AllowEditing}"  >
                    <dxg:GridColumn.EditSettings>
                        <dxe:ImageEditSettings/>
                    </dxg:GridColumn.EditSettings>

                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="ChartColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding FieldName}"   Width="{Binding  Width}" FixedWidth="{Binding FixedWidth}"   AllowCellMerge="{Binding AllowCellMerge}" AllowEditing="{Binding AllowEditing}">
                    <dxg:GridColumn.EditSettings>
                        <dxe:SparklineEditSettings>
                            <dxe:SparklineEditSettings.StyleSettings>
                                <dxe:BarSparklineStyleSettings />
                            </dxe:SparklineEditSettings.StyleSettings>
                        </dxe:SparklineEditSettings>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition  />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Label Style="{StaticResource LabelStyle}">Strategic Map</Label>
        <Button HorizontalAlignment="Right" Grid.Column="1" Height="40" Width="40">
            <Button.ContentTemplate>
                <DataTemplate>
                    <Image Style="{ DynamicResource PrinterButtonImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-10" />
                </DataTemplate>
            </Button.ContentTemplate>
        </Button>
        <dxg:GridControl ItemsSource="{Binding Source}" x:Name="grid" 
                         ColumnsSource="{Binding Columns}"                        
                         ColumnGeneratorTemplateSelector="{StaticResource ColumnTemplateSelector}"         
                         DockPanel.Dock="Bottom" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="2">
            <dxg:GridControl.View>
                <dxg:TableView x:Name="view" NavigationStyle="Cell" AutoWidth="True" AllowCellMerge="True"
                               AllowPerPixelScrolling="True" ShowTotalSummary="False" AllowSorting="False"
                               IsTotalSummaryMenuEnabled="False" ShowGroupPanel="False" AllowColumnFiltering="False" />
            </dxg:GridControl.View>

        </dxg:GridControl>

    </Grid>
</UserControl>
