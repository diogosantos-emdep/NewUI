<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.Hrm.Views.EmployeeExpensePhotosView"
                             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
                             xmlns:sys="clr-namespace:System;assembly=mscorlib"
                             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                             xmlns:local="clr-namespace:Emdep.Geos.Modules.Hrm.Views"                            
                             xmlns:dxa="http://schemas.devexpress.com/winfx/2008/xaml/accordion"
                             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                             xmlns:dxeh="http://schemas.devexpress.com/winfx/2008/xaml/editors/internal"
                             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
                             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                             xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                             xmlns:ViewModel="clr-namespace:Emdep.Geos.Modules.Hrm.ViewModels"
                             xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys"
                             xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
                             xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                             xmlns:ve="http://schemas.devexpress.com/winfx/2008/xaml/docking/visualelements"
                             xmlns:Interactive="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                             xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                             xmlns:Behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                             xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
                             xmlns:dxci="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"    
                             xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing"
                             xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                             xmlns:dxwuii="clr-namespace:DevExpress.Xpf.WindowsUI.Internal;assembly=DevExpress.Xpf.Controls.v19.2"
                             xmlns:dxwuin="http://schemas.devexpress.com/winfx/2008/xaml/windowsui/navigation"
                             xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
                             mc:Ignorable="d"
                             HorizontalAlignment="Stretch"
                             HorizontalContentAlignment="Stretch"
                             VerticalAlignment="Stretch"
                             VerticalContentAlignment="Stretch"
                             Style="{DynamicResource WinUIDialogWindowStyle}"
                             Height="{Binding SystemParameters.PrimaryScreenHeight}" 
                             Width="{Binding SystemParameters.PrimaryScreenWidth}">
    <dxwui:WinUIDialogWindow.Resources>
        <Style x:Key="img" TargetType="Image">
            <Setter Property="Width" Value="100" />
            <Setter Property="Height" Value="100" />
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>
        <DataTemplate x:Key="PhotoTemplate">
            <Border Background="Transparent">
                <Image Source="{Binding ExpenseImage}" Stretch="Uniform" Height="120" Width="120" />
            </Border>
        </DataTemplate>
    </dxwui:WinUIDialogWindow.Resources>
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding DataContext.EscapeButtonCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <dxwui:WinUIDialogWindow.TitleStyle>
        <Style TargetType="ContentControl">
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Grid ShowGridLines="False" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="5"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="5"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <TextBlock  Grid.Row="0" Text="{Binding DataContext.EmployeeExpensePhotosHeader,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" Style="{DynamicResource CustomTitleStyle}" HorizontalAlignment="Center"
                                        Grid.RowSpan="2"/>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </dxwui:WinUIDialogWindow.TitleStyle>
    <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
          ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Auto">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Row="0" Grid.ColumnSpan="2" >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock Grid.Row="0" Text ="{Binding SelectedPhotoType,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            <Image Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  RenderTransformOrigin=".5,.5" MinHeight="800" MaxHeight="800" MaxWidth="800"
                       Source="{Binding SelectedPhoto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,5,0,5" >
                <dxmvvm:Interaction.Behaviors>
                    <dxmvvm:EventToCommand Command="{Binding DataContext.Image_MouseDownCommand, RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}" EventName="MouseDown"
                            PassEventArgsToCommand="True">
                    </dxmvvm:EventToCommand>
                </dxmvvm:Interaction.Behaviors>
            </Image>
        </Grid>
        <dxe:ListBoxEdit Grid.Row="1"
                         Grid.ColumnSpan="2"  
                         dx:ScrollBarExtensions.ScrollBarMode="TouchOverlap"
                         ScrollViewer.HorizontalScrollBarVisibility="Visible"
                         ScrollViewer.CanContentScroll="True"
                         ItemTemplate="{StaticResource PhotoTemplate}"
                         ItemsSource="{Binding DataContext.Photos,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                         ShowBorder="False"                
                         SelectedItem="{Binding SelectedPhoto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}">
            <dxmvvm:Interaction.Behaviors>
                <dxmvvm:EventToCommand EventName="SelectedIndexChanged"
                                       Command="{Binding DataContext.ChangeImageCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                       PassEventArgsToCommand="True"/>
            </dxmvvm:Interaction.Behaviors>
            <dxe:ListBoxEdit.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </dxe:ListBoxEdit.ItemsPanel>
        </dxe:ListBoxEdit>
    </Grid>
</dxwui:WinUIDialogWindow>
