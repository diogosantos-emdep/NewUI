<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.Hrm.Views.AddEditAccommodationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Emdep.Geos.Modules.Hrm.Views"
             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
              xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
             mc:Ignorable="d"
             Style="{DynamicResource WinUIDialogWindowStyle}"
             Title="{Binding WindowHeader}"
             TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}">

    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding EscapeButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <!--[shweta.thube][GEOS2-7989][18-09-2025] https://helpdesk.emdep.com/browse/GEOS2-7989-->
    <Grid ShowGridLines="False">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="60"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="2"/>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="2"/>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition Width="2"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" Grid.Column="0" Text="{DynamicResource AccommodationType}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <!--IsEnabled="{Binding DataContext.IsControlsEnable,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"-->
        <dxe:ComboBoxEdit   Grid.Row="0" Grid.Column="2"
                               MinWidth="70"
                               Style="{DynamicResource ComboBoxEditStyle}" 
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               IsTextEditable="False"
                               DisplayMember="Value"
                               ValueMember="Value"
                               ApplyItemTemplateToSelectedItem="True"
                               IsSynchronizedWithCurrentItem="True"                             
                               AllowUpdateTwoWayBoundPropertiesOnSynchronization="True"                                              
                               ItemsSource="{Binding DataContext.AccommodationTypeList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                               >
            <dxe:ComboBoxEdit.SelectedItem>
                <Binding  Path="DataContext.SelectedAccommodationType" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
                              UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:TripAccommodationValidation FieldName="SelectedAccommodationType" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.SelectedItem>
        </dxe:ComboBoxEdit>
        <TextBlock Grid.Row="2" Grid.Column="0" Text="{DynamicResource AccommodationName}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
        <dxe:TextEdit Name="AccommodationName" Grid.Column="2" Grid.Row="2"  HorizontalAlignment="Stretch" VerticalAlignment="Center"
    Height="25" MinWidth="70" TextWrapping="Wrap" MaxWidth="270" AcceptsReturn="True" VerticalContentAlignment="Top" 
    Visibility="{Binding IsVisibleName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
    Text="{Binding DataContext.AccommodationName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.AccommodationName" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:TripAccommodationValidation FieldName="AccommodationName" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <dxe:ComboBoxEdit   Grid.Row="2" Grid.Column="2"
                       MinWidth="70"
                       Style="{DynamicResource ComboBoxEditStyle}" 
                       HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        IsTextEditable="False"
                        DisplayMember="PublicIdentifier"
                        ValueMember="IdAsset"
                        ApplyItemTemplateToSelectedItem="True"
                        IsSynchronizedWithCurrentItem="True"
                        Visibility="{Binding DataContext.IsVisibleApartment,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                       AllowUpdateTwoWayBoundPropertiesOnSynchronization="True"                                              
                       ItemsSource="{Binding DataContext.AccommodationAssetList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                       >
            <dxe:ComboBoxEdit.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding PublicIdentifier}" />
                </DataTemplate>
            </dxe:ComboBoxEdit.ItemTemplate>
            <dxe:ComboBoxEdit.SelectedItem>
                <Binding  Path="DataContext.SelectedAccommodationApartment" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
                  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True" >
                    <Binding.ValidationRules>
                        <Validation:TripAccommodationValidation FieldName="SelectedAccommodationApartment" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.SelectedItem>
        </dxe:ComboBoxEdit>
       

        <TextBlock Grid.Row="4" Grid.Column="0" Text="{DynamicResource AccommodationCheckInDate}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:DateEdit  Grid.Row="4" Grid.Column="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                       AllowNullInput="True" 
                       GotFocus="DateEdit_GotFocus"
                       IsEnabled="{Binding DataContext.IsControlsEnable,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
           
            <dxe:DateEdit.EditValue>
                <Binding Path="DataContext.AccommodationCheckInDate" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:TripAccommodationValidation FieldName="AccommodationCheckInDate" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:DateEdit.EditValue>

            <dxmvvm:Interaction.Behaviors>
                <dxmvvm:EventToCommand EventName="EditValueChanging" Command="{Binding DataContext.OnDateEditValueChangingCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
            </dxmvvm:Interaction.Behaviors>
        </dxe:DateEdit>
        <!-- time -->
        <TextBlock Grid.Row="4" Grid.Column="4" Margin="0,0,20,0" Text="{DynamicResource AccommodationCheckInTime}" Style="{StaticResource TextBlock14Style}" HorizontalAlignment="Right" VerticalAlignment="Center" />
        <dxe:TextEdit Grid.Row="4" Grid.Column="6"   Mask="hh:mm" HorizontalAlignment="Stretch" VerticalAlignment="Center" AllowNullInput="True" 

              MaskType="TimeSpan" MaskUseAsDisplayFormat="True" EditValueChanging="DepTime_EditValueChanging"              
              Text="{Binding DataContext.AccommodationCheckInTime,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.AccommodationCheckInTime" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="AccommodationCheckInTime" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>



        <TextBlock Grid.Row="6" Grid.Column="0" Text="{DynamicResource AccommodationCheckOutDate}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:DateEdit  Grid.Row="6" Grid.Column="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" AllowNullInput="True"
                       GotFocus="DateEdit_GotFocus1"
                       IsEnabled="{Binding DataContext.IsCheckOutDateEnabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:DateEdit.EditValue>
                <Binding Path="DataContext.AccommodationCheckOutDate" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:TripAccommodationValidation FieldName="AccommodationCheckOutDate" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:DateEdit.EditValue>

            <dxmvvm:Interaction.Behaviors>
                <dxmvvm:EventToCommand EventName="EditValueChanging" Command="{Binding DataContext.OnDateEditValueChangingCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
            </dxmvvm:Interaction.Behaviors>
        </dxe:DateEdit>


        <TextBlock Grid.Row="6" Grid.Column="4" Margin="0,0,10,0" Text="{DynamicResource AccommodationCheckOutTime}" Style="{StaticResource TextBlock14Style}" HorizontalAlignment="Right" VerticalAlignment="Center" />

        <!-- time -->
        <!--IsReadOnly="{Binding DataContext.IsAllControlDisabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"-->

        <dxe:TextEdit Grid.Row="6" Grid.Column="6"   Mask="hh:mm" HorizontalAlignment="Stretch" VerticalAlignment="Center" AllowNullInput="True" 
     
      MaskType="TimeSpan" MaskUseAsDisplayFormat="True" EditValueChanging="DepTime_EditValueChanging"
      
      IsEnabled="{Binding DataContext.IsCheckOutDateEnabled, 
                        Mode=TwoWay, 
                        UpdateSourceTrigger=PropertyChanged, 
                        RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"   Text="{Binding DataContext.AccommodationCheckOutTime,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.AccommodationCheckOutTime" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="AccommodationCheckOutTime" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>
        <TextBlock Grid.Row="8" Grid.Column="0" Text="{DynamicResource AccommodationAddress}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:TextEdit Name="Address" Grid.Row="8" Grid.Column="2"  Grid.ColumnSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextWrapping="Wrap"
            Text="{Binding DataContext.AccommodationAddress,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.AccommodationAddress" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:TripAccommodationValidation FieldName="AccommodationAddress" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <TextBlock Grid.Row="10" Grid.Column="0" Text="{DynamicResource AccommodationCoordinates}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:TextEdit Name="Coordinates" Grid.Row="10"  Grid.Column="2"  Grid.ColumnSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextWrapping="Wrap"
    Text="{Binding DataContext.AccommodationCoordinates,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.AccommodationCoordinates" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>


        <TextBlock Grid.Row="12" Grid.Column="0" Text="{DynamicResource TransfersRemarks}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />


        <dxe:TextEdit
                Grid.Row="12" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                Grid.Column="2"
                Grid.ColumnSpan="3"               
                VerticalContentAlignment="Top"
                AcceptsReturn="True"
                Text="{Binding DataContext.Remarks,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                AllowNullInput="True"                                          
                TextWrapping="Wrap" >

            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.Remarks" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <Grid Grid.Row="14" ShowGridLines="True" Grid.ColumnSpan="3" Grid.Column="2" >


            <Button  HorizontalAlignment="Left"
             Style="{DynamicResource Button16Style}"
             VerticalAlignment="Top"
             Content="{DynamicResource AddEditAccommodationAcceptButton}"
             Command="{Binding AddEditAccommodationAcceptButtonCommand}"
             Height="30"
             Width="100" />

            <Button  HorizontalAlignment="Right"
 Style="{DynamicResource Button16Style}"
 VerticalAlignment="Top" Margin="30,0,0,0"
 Content="{DynamicResource AddEditAccommodationCanceltButton}"
 Command="{Binding CancelButtonCommand}"
 Height="30"
 Width="100" />
        </Grid>


    </Grid>

</dxwui:WinUIDialogWindow>
