<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.Hrm.Views.AddEditTransferView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Emdep.Geos.Modules.Hrm.Views"
             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
              xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
             mc:Ignorable="d"
             Style="{DynamicResource WinUIDialogWindowStyle}"
             Title="{Binding WindowHeader}"
             TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}">

    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding EscapeButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <!--[pramod.misal][GEOS2-7989][17-09-2025]https://helpdesk.emdep.com/browse/GEOS2-7989-->
    <Grid ShowGridLines="False">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="60"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="2"/>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="2"/>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition Width="2"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" Grid.Column="0" Text="{DynamicResource TransfersOrigin}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <!--IsEnabled="{Binding DataContext.IsControlsEnable,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"-->
        <dxe:ComboBoxEdit   Grid.Row="0" Grid.Column="2"
                               MinWidth="70"
                               Style="{DynamicResource ComboBoxEditStyle}" 
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch"
                               IsTextEditable="False"
                               DisplayMember="Value"
                               ValueMember="Value"
                               ApplyItemTemplateToSelectedItem="True"
                               IsSynchronizedWithCurrentItem="True"
                              
                               AllowUpdateTwoWayBoundPropertiesOnSynchronization="True"                                              
                               ItemsSource="{Binding DataContext.OriginList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                               >
            <dxe:ComboBoxEdit.SelectedItem>
                <Binding Path="DataContext.SelectedOrigin" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
                            ValidatesOnDataErrors="True"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="SelectedOrigin" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.SelectedItem>
        </dxe:ComboBoxEdit>

        <TextBlock Grid.Row="0" Grid.Column="4" Text="{DynamicResource TransfersDestination}"  HorizontalAlignment="Right" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
        
        <dxe:ComboBoxEdit   Grid.Row="0" Grid.Column="6"
                       MinWidth="70"
                       Style="{DynamicResource ComboBoxEditStyle}" 
                       HorizontalAlignment="Stretch"
                       VerticalAlignment="Stretch"
                       IsTextEditable="False"
                       DisplayMember="Value"
                       ValueMember="Value"
                       ApplyItemTemplateToSelectedItem="True"
                       IsSynchronizedWithCurrentItem="True"
                       AllowUpdateTwoWayBoundPropertiesOnSynchronization="True"                                              
                       ItemsSource="{Binding DataContext.DestinationList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                       >
            <dxe:ComboBoxEdit.SelectedItem>
                <Binding Path="DataContext.Selecteddestination" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
                    ValidatesOnDataErrors="True"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="Selecteddestination" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.SelectedItem>
        </dxe:ComboBoxEdit>

        <TextBlock Grid.Row="2" Grid.Column="0" Text="{DynamicResource TransfersDate}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:DateEdit  Grid.Row="2" Grid.Column="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" AllowNullInput="True"
                       IsEnabled="{Binding DataContext.IsControlsEnable,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
            <dxe:DateEdit.EditValue>
                <Binding Path="DataContext.TransferDate" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="TransferDate" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:DateEdit.EditValue>

            <dxmvvm:Interaction.Behaviors>
                <dxmvvm:EventToCommand EventName="EditValueChanging" Command="{Binding DataContext.OnDateEditValueChangingCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
            </dxmvvm:Interaction.Behaviors>
        </dxe:DateEdit>


        <TextBlock Grid.Row="2" Grid.Column="4" Text="{DynamicResource TransfersTime}" Style="{StaticResource TextBlock14Style}" HorizontalAlignment="Right" VerticalAlignment="Center" />

        <!-- time -->
        <!--IsReadOnly="{Binding DataContext.IsAllControlDisabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"-->
        <dxe:TextEdit Grid.Row="2" Grid.Column="6"   Mask="hh:mm" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" AllowNullInput="True" 
              MaskType="TimeSpan" MaskUseAsDisplayFormat="True" EditValueChanging="TextEdit_EditValueChanging"
Text="{Binding DataContext.TransferTime,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.TransferTime" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="TransferTime" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <TextBlock Grid.Row="4" Grid.Column="0" Text="{DynamicResource TransfersTransportMethod}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:ComboBoxEdit   Grid.Row="4" Grid.Column="2"
                        MinWidth="70"
                        Style="{DynamicResource ComboBoxEditStyle}" 
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        IsTextEditable="False"
                        DisplayMember="Value"
                        ValueMember="Value"
                        ApplyItemTemplateToSelectedItem="True"
                        IsSynchronizedWithCurrentItem="True"
                        AllowUpdateTwoWayBoundPropertiesOnSynchronization="True"                                              
                        ItemsSource="{Binding DataContext.TransportList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                        >
            <dxe:ComboBoxEdit.SelectedItem>
                <Binding Path="DataContext.SelectedTransport" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
                     ValidatesOnDataErrors="True"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="SelectedTransport" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.SelectedItem>
        </dxe:ComboBoxEdit>

        <TextBlock Grid.Row="6" Grid.Column="0" Text="{DynamicResource TransfersProvider}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:ComboBoxEdit   Grid.Row="6" Grid.Column="2"
                MinWidth="70"
                Style="{DynamicResource ComboBoxEditStyle}" 
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                IsTextEditable="False"
                DisplayMember="Value"
                ValueMember="Value"
                ApplyItemTemplateToSelectedItem="True"
                IsSynchronizedWithCurrentItem="True"
                AllowUpdateTwoWayBoundPropertiesOnSynchronization="True"                                              
                ItemsSource="{Binding DataContext.ProviderList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                >
            <dxe:ComboBoxEdit.SelectedItem>
                <Binding Path="DataContext.SelectedProvider" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
             ValidatesOnDataErrors="True"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="SelectedProvider" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.SelectedItem>
        </dxe:ComboBoxEdit>

        <TextBlock Grid.Row="8" Grid.Column="0" Text="{DynamicResource TransfersContactperson}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:TextEdit Name="Contactperson" Grid.Row="8" MaskType="RegEx"  Mask="[a-zA-Z]+" Grid.Column="2" Grid.ColumnSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextWrapping="Wrap"
            Text="{Binding DataContext.Contactperson,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.Contactperson" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="Contactperson" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <TextBlock Grid.Row="10" Grid.Column="0" Text="{DynamicResource TransfersContactNumber}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <dxe:TextEdit Name="ContactNumber" Grid.Row="10" MaskType="RegEx" Mask="\d{0,10}"  NullText=" " Grid.Column="2"  Grid.ColumnSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextWrapping="Wrap"
            Text="{Binding DataContext.ContactNumber,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.ContactNumber" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="ContactNumber" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <TextBlock Grid.Row="12" Grid.Column="0" Text="{DynamicResource TransfersEstimatedDuration}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <!--<dxe:TextEdit Grid.Row="12" Grid.Column="2" MaskType="RegEx" Mask="\d{0,10}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" AllowNullInput="True" 
         EditValue="{Binding DataContext.EstimatedDuration,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
        </dxe:TextEdit>-->

        <dxe:TextEdit  Grid.Row="12" Grid.Column="2" MaskType="RegEx" Mask="\d{0,10}"  NullText=" "  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" TextWrapping="Wrap"
                Text="{Binding DataContext.EstimatedDuration,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.EstimatedDuration" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="EstimatedDuration" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>



        <TextBlock Grid.Row="12" Grid.Column="4" Text="{DynamicResource TransfersMinutes}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

        <TextBlock Grid.Row="14" Grid.Column="0" Text="{DynamicResource TransfersRemarks}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />

 
        <dxe:TextEdit
                Grid.Row="14" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                Grid.Column="2"
                Grid.ColumnSpan="3"               
                VerticalContentAlignment="Top"
                AcceptsReturn="True"
                Text="{Binding DataContext.Remarks,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                AllowNullInput="True"                                          
                TextWrapping="Wrap" >

            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.Remarks" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                    <Binding.ValidationRules>
                        <Validation:AddEditTripValidations FieldName="Remarks" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>







        <Grid Grid.Row="16" ShowGridLines="False" Grid.ColumnSpan="5" HorizontalAlignment="Left" Grid.Column="2" VerticalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            


            <Button  HorizontalAlignment="Right"
             Style="{DynamicResource Button16Style}"
             VerticalAlignment="Top"
             Content="{DynamicResource AddEditTransferViewAcceptButton}"
             Command="{Binding AddEditTransferViewAcceptButton}"
             Height="30"
             Width="100" />

            <Button Grid.Row="10" Grid.Column="2"
               HorizontalAlignment="Left"
               Style="{DynamicResource Button16Style}"
               VerticalAlignment="Top"
               Content="{DynamicResource AddEditTransferViewCanceltButton}"
               Command="{Binding CancelButtonCommand }"
               Height="30"
                Width="100" />

            <Button Grid.Row="10" Grid.Column="4"
               HorizontalAlignment="Left"
                    Visibility="{Binding IsDuplicateBtnVisible}"
               Style="{DynamicResource Button16Style}"
               VerticalAlignment="Top"
               Content="{DynamicResource AddEdittrasferDuplicateButton}"
               Command="{Binding AddEditTransferViewDuplicateCommand }"
               Height="30"
                Width="100" />
        </Grid>


    </Grid>

</dxwui:WinUIDialogWindow>
