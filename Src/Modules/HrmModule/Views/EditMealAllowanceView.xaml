<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.Hrm.Views.EditMealAllowanceView"
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:local="clr-namespace:Emdep.Geos.Modules.Hrm.Views"
                         xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
                         xmlns:dxnav="http://schemas.devexpress.com/winfx/2008/xaml/navigation"
                         xmlns:dxn="http://schemas.devexpress.com/winfx/2008/xaml/navbar"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
                         xmlns:dxwuin="http://schemas.devexpress.com/winfx/2008/xaml/windowsui/navigation"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 
                         xmlns:ViewModels="clr-namespace:Emdep.Geos.Modules.Hrm.ViewModels"
                         xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                         xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                         xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys"
                         xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                         xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                         xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                         xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
                         xmlns:HrmApplication="clr-namespace:Emdep.Geos.Modules.Hrm"
                         xmlns:HrmCommon="clr-namespace:Emdep.Geos.Modules.Hrm;assembly=Emdep.Geos.Modules.Hrm"
                         xmlns:system="clr-namespace:System;assembly=mscorlib"
                         xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                         xmlns:ve="http://schemas.devexpress.com/winfx/2008/xaml/docking/visualelements"
                         xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                         xmlns:core="http://schemas.devexpress.com/winfx/2008/xaml/core" 
                         xmlns:dxci="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"  
                         xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars" 
                         xmlns:Validation="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                         mc:Ignorable="d" 
                         d:DesignHeight="300" d:DesignWidth="300"
                         Style="{DynamicResource WinUIDialogWindowStyle}"
                         Title="{Binding WindowHeader}"
                         TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}">
    <!--[rdixit][GEOS2-4181][20.03.2023]-->
    <dxwui:WinUIDialogWindow.Resources>
        <dxmvvm:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <Converter:GroupboxBackroundColorConvertor x:Key="GroupboxBackroundColorConvertor" />
        <Converter:ForegroundColorConverter x:Key="ForegroundColorConverter" />
    </dxwui:WinUIDialogWindow.Resources>
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding CancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <Grid ShowGridLines="False">
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="45"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>

            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="15"/>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="110"/>
        </Grid.ColumnDefinitions>
        
        <!--Meal Company-->
        <TextBlock  Text="{DynamicResource EditMealAllowanceMealCompany}" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,5,0" ></TextBlock>
        <Label Grid.Column="1" HorizontalAlignment="Left" Margin="5,0,0,0" Content="{Binding DataContext.SelectedCompany,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}" VerticalAlignment="Center" />

        <!--Meal Currency-->
        <TextBlock Grid.Row="0" Grid.Column="3"  Text="{DynamicResource EditMealAllowanceMealCurrency}" Style="{StaticResource TextBlock14Style}" Margin="0,0,5,0" HorizontalAlignment="Right" VerticalAlignment="Center" />
        <dxe:ComboBoxEdit Grid.Row="0" Grid.Column="4" Name="CbeCurrency" Style="{DynamicResource ComboBoxEditStyle}" MinWidth="100"
                          HorizontalAlignment="Left" Margin="5,0,0,0" VerticalAlignment="Center" IsTextEditable="False" DisplayMember="Name" AllowUpdateTwoWayBoundPropertiesOnSynchronization="True"
                          ItemsSource="{Binding DataContext.CurrencyList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                          SelectedItem="{Binding DataContext.SelectedCurrency, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
        <!--Meal Grid-->
        <dxg:GridControl x:Name="GridControlMealAllowance" VerticalAlignment="Stretch" HorizontalAlignment="Center" Grid.Row="2" Grid.ColumnSpan="5" 
                         ImplyNullLikeEmptyStringWhenFiltering="True" AllowLiveDataShaping="True" ItemsSource="{Binding MealAllowanceList,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                         SelectedItem="{Binding Path=SelectedGridRow,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" SelectionMode="Cell" Width="Auto" Height="Auto">

            <dxg:GridColumn Header="{DynamicResource EditMealAllowanceEmployeeProfile}" Width="150" FieldName="EmployeeProfile" FilterPopupMode="CheckedList"   ReadOnly="True" FixedWidth="True"/>
            <dxg:GridColumn Header="{DynamicResource EditMealAllowanceAmount}"  FieldName="Amount" FilterPopupMode="CheckedList" ReadOnly="False" MinWidth="150"  FixedWidth="True">
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <dxe:TextEdit Name="PART_Editor" ShowBorder="False" Text="{Binding RowData.Row.Amount, ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture},UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" ShowNullText="True" NullText="0" MaxWidth="150"
                                                            Mask="###,###,###,###,###,###,##0.00;" IsReadOnly="False" MaskUseAsDisplayFormat="True" MaskType="Numeric" VerticalAlignment="Stretch" HorizontalAlignment="Left" />
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>
            </dxg:GridColumn>
            
            <dxg:GridControl.View>
                <dxg:TableView x:Name="MealAllowanceTableView"
                                   NavigationStyle="Cell"
                                   RowDetailsVisibilityMode="Visible"
                                   ShowHorizontalLines="True"
                                   ShowSearchPanelMode="Never"
                                   ShowColumnHeaders="True"
                                   VerticalScrollbarVisibility="Auto" 
                                   HorizontalScrollbarVisibility="Auto"
                                   AllowFixedColumnMenu="False"
                                   ShowTotalSummary="False"
                                   ShowFixedTotalSummary="False"                                                             
                                   EnableImmediatePosting="True"                               				
                                   AllowEditing="True"
                                   ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                   AllowGrouping="True"
                                   ShowGroupPanel="False"
                                   ShowIndicator="False"                                   
                                   FocusedRow="{Binding Path=SelectedGridRow,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                   RowDetailsTemplate="{Binding SelectedItem.DetailTemplate,ElementName=rowTemplateComboBox}"
                                   RowStyle="{Binding SelectedItem.RowStyle,ElementName=rowTemplateComboBox}"                      
                                   AllowColumnMoving="True"                                      
                                   AllowConditionalFormattingMenu="True" 
                                   AutoWidth="False">
                 
                </dxg:TableView>
            </dxg:GridControl.View>
        </dxg:GridControl>
        <!--Accept and Cancel Buttons-->
        <Grid Grid.Row="4" ShowGridLines="False" Grid.ColumnSpan="5" VerticalAlignment="Center" HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
   
            <Button  HorizontalAlignment="Right"
                     Style="{DynamicResource Button16Style}"
                     VerticalAlignment="Top"
                     Content="{DynamicResource AcceptButton}"
                     Command="{Binding AcceptActionCommand}"                     
                     TabIndex="4"
                     Height="30"
                     Width="100" />

            <Button Grid.Row="10" Grid.Column="2"
                    HorizontalAlignment="Left"
                    Style="{DynamicResource Button16Style}"
                    VerticalAlignment="Top"
                    Content="{DynamicResource CancelButton}"
                    Command="{Binding CancelButtonCommand }"
                    TabIndex="5"
                    Height="30"
                    Width="100" />
        </Grid>
    </Grid>

</dxwui:WinUIDialogWindow>
