<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.SCM.Views.AddSubFamilyView"            
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:local="clr-namespace:Emdep.Geos.Modules.SCM.Views"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
                         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
                         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:Interactive="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                         xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                         xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                         xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
                          
                         xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                         xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                         mc:Ignorable="d" 
                         d:DesignHeight="300" d:DesignWidth="300"
                         Title="{Binding WindowHeader}"
                         TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}">
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding AddCustomPropertyViewCancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" >
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Grid.RowDefinitions >
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="50"/>
            </Grid.RowDefinitions>
            <!--[rdixit][GEOS2-5160][12.01.2024 Removed dxlc:LayoutGroup -->
            <Grid Margin="5" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <dxlc:LayoutGroup>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="450" />
                            <ColumnDefinition Width="3" />
                            <ColumnDefinition Width="1250"/>
                        </Grid.ColumnDefinitions>
                            <Grid Grid.Row="0" Grid.Column="0" >
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30"/>
                                    <RowDefinition Height="5"/>
                                    <RowDefinition Height="45"/>
                                    <RowDefinition Height="5"/>
                                    <RowDefinition Height="25"/>
                                    <RowDefinition Height="5"/>
                                    <RowDefinition Height="30"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="70"/>
                                    <ColumnDefinition Width="5"/>
                                    <ColumnDefinition Width="310"/>
                                    <ColumnDefinition Width="5"/>
                                    <ColumnDefinition Width="40"/>
                                </Grid.ColumnDefinitions>
                                <!--Name-->
                                <TextBlock Grid.Column="0" Grid.Row="0" Text="{DynamicResource AddCustomPropertyName}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center"/>
                                <dxe:TextEdit Grid.Column="2" Grid.Row="0" Text="{Binding Name,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"                                            
                                             IsEnabled="{Binding DataContext.IsSCMEditFamiliesManagerBtn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
                                    <Binding Path="DataContext.Name" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" ValidatesOnDataErrors="True">
                                        <Binding.ValidationRules>
                                            <Validation:AddEditConnectorFamilyValidation FieldName="Name" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                                        </Binding.ValidationRules>
                                    </Binding>


                                    <dxmvvm:Interaction.Behaviors>
                                        <dxmvvm:EventToCommand 
                                           EventName="EditValueChanged" Command="{Binding DataContext.ChangeNameCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
                                    </dxmvvm:Interaction.Behaviors>
                                </dxe:TextEdit>
                                <!--LanguageList-->
                                <dxe:ListBoxEdit Name="listBoxLanguage" Grid.Row="0" Grid.Column="4" Grid.RowSpan="7"
                                                     ItemsSource="{Binding DataContext.Languages, Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                     SelectedItem="{Binding DataContext.SelectedLanguage,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"  
                                                     HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                     DisplayMember="TwoLetterISOLanguage" ValueMember="IdLanguage" 
                                                     VerticalContentAlignment="Center"
                                                     HorizontalContentAlignment="Center"
                                                     ScrollViewer.VerticalScrollBarVisibility="Hidden">
                                    <dxmvvm:Interaction.Behaviors>
                                        <dxmvvm:EventToCommand 
                                                            EventName="SelectedIndexChanged" Command="{Binding DataContext.ChangeLanguageCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
                                    </dxmvvm:Interaction.Behaviors>
                                </dxe:ListBoxEdit>
                                <!--Description-->
                                <TextBlock Grid.Column="0" Grid.Row="2" Text="{DynamicResource AddCustomPropertyDescription}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center"/>
                                <dxe:TextEdit Grid.Column="2" Grid.Row="2" Text="{Binding Description,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                              IsEnabled="{Binding DataContext.IsSCMEditFamiliesManagerBtn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
                                    <dxmvvm:Interaction.Behaviors>
                                        <dxmvvm:EventToCommand 
                                        EventName="EditValueChanged" Command="{Binding DataContext.ChangeDescriptionCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
                                    </dxmvvm:Interaction.Behaviors>
                                </dxe:TextEdit>
                                <!--Copy Name And Description-->
                                <dxe:CheckEdit Grid.Row="4" Grid.Column="2" IsChecked="{Binding IsCheckedCopyDescription,Mode=TwoWay ,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow,Mode=FindAncestor}, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" VerticalAlignment="Stretch"
                                               IsReadOnly="{Binding DataContext.IsSCMEditFamiliesManager,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
                                    <dxmvvm:Interaction.Behaviors>
                                        <dxmvvm:EventToCommand 	
                                                        EventName="Checked" Command="{Binding DataContext.CheckedCopyNameDescriptionCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
                                        <dxmvvm:EventToCommand 	
                                                        EventName="Loaded" Command="{Binding DataContext.LoadedCopyNameDescriptionCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
                                        <dxmvvm:EventToCommand 	
                                                        EventName="Unchecked" Command="{Binding DataContext.UnCheckedCopyNameDescriptionCommand,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
                                    </dxmvvm:Interaction.Behaviors>
                                </dxe:CheckEdit>
                                <TextBlock Grid.Row="4" Grid.Column="2" Margin="20 0 0 0" Text="{DynamicResource CopyNameDescription}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center" />
                                <!--ISInUse-->
                                <TextBlock Grid.Column="0" Grid.Row="6" Text="{DynamicResource SCMAddFamilyInUse}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Top"/>
                                <StackPanel Orientation="Horizontal" Grid.Row="6" Grid.Column="2">
                                    <dxe:ToggleSwitch VerticalAlignment="Center" HorizontalAlignment="Center" CheckedStateContent="Yes" UncheckedStateContent="No"  ContentPlacement="Inside" 
                                                       IsReadOnly="{Binding DataContext.IsSCMEditFamiliesManager,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                     Height="30" Width="88" IsChecked="{Binding DataContext.IsInUse,Mode=TwoWay ,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow,Mode=FindAncestor}, UpdateSourceTrigger=PropertyChanged}">
                                    </dxe:ToggleSwitch>
                                </StackPanel>
                            </Grid>
                        <dxlc:LayoutGroup Grid.Row="0" Grid.Column="2"  Height="600"    View="GroupBox">
                                <dxlc:LayoutGroup.HeaderTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <DockPanel Margin="-5,0,0,0">
                                                <TextBlock VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Text="{DynamicResource ImagesWithColon}" />
                                                <TextBlock Width="50"
                                                   Margin="5,1,0,0"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   FontWeight="Bold"
                                                   Name="ImagesListCount"
                                                   Text="{Binding DataContext.SubFamilyImageList.Count, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" />
                                            </DockPanel>

                                            <Grid  ShowGridLines="False" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="40"/>
                                                    <ColumnDefinition Width="5"/>
                                                    <ColumnDefinition Width="40"/>
                                                    <ColumnDefinition Width="5"/>
                                                    <ColumnDefinition Width="40"/>
                                                </Grid.ColumnDefinitions>

                                                <Button Content=" " 
                                        Background="Gray" Grid.Row="1" Grid.Column="6" 
                                        HorizontalContentAlignment="Center"
                                        Command="{Binding DataContext.AddImageButtonCommand, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow, Mode=FindAncestor}}"
                                        IsEnabled="{Binding DataContext.IsSCMEditFamiliesManagerBtn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"               
                                        
                                         >
                                                    <Button.ToolTip>
                                                        <TextBlock Text="{DynamicResource ButtonAddImage}"/>
                                                    </Button.ToolTip>
                                                    <Button.ContentTemplate>
                                                        <DataTemplate>
                                                            <Image Source="{DynamicResource AddButtonImage}"
                                                   Height="14" Width="14"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                                  
                                                   />
                                                        </DataTemplate>
                                                    </Button.ContentTemplate>
                                                </Button>
                                            </Grid>
                                        </Grid>
                                    </DataTemplate>
                                </dxlc:LayoutGroup.HeaderTemplate>
                                <Grid ShowGridLines="False" MaxHeight="2500"  MaxWidth="1300" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="5"/>
                                        <RowDefinition Height="40"/>
                                    </Grid.RowDefinitions>

                                <dxlc:FlowLayoutControl x:Name="layoutImages" ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                ItemsSource="{Binding DataContext.SubFamilyImageList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                AllowItemMoving="True"
                                                                AllowLayerSizing="True"
                                                                AllowMaximizedElementMoving="True"
                                                                AnimateItemMoving="True"
                                                                DragScrolling="False"
                                                                ShowLayerSeparators="True"
                                                                Orientation="Horizontal"
                                                                Grid.Row="0"
                                                                HorizontalAlignment="Stretch"
                                                                VerticalAlignment="Stretch"
                                                                >
                                        <!--[rdixit][GEOS2-2694][01.08.2022]-->
                                        <dxmvvm:Interaction.Behaviors>
                                            <dxmvvm:EventToCommand Command="{Binding DataContext.ItemPositionChangedCommand,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" 
                                                                               EventName="ItemPositionChanged" 
                                                                               CommandParameter="{Binding ElementName=flowLayoutControl}">
                                            </dxmvvm:EventToCommand>
                                        </dxmvvm:Interaction.Behaviors>


                                        <dxlc:FlowLayoutControl.ItemTemplate>
                                            <DataTemplate>
                                                <UIHelper:ImageContainer  ScrollViewer.VerticalScrollBarVisibility="Auto" x:Name="Image1" Content="{Binding AttachmentImage}" Width="280" 
                                                          HorizontalAlignment="Center" VerticalAlignment="Center" Cursor="Hand"
                                                          Grid.Row="0" ToolTip="{Binding Description}">
                                                    <UIHelper:ImageContainer.Template>
                                                        <ControlTemplate TargetType="UIHelper:ImageContainer">
                                                            <Grid ShowGridLines="False">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="*"/>
                                                                </Grid.RowDefinitions>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>

                                                                <Image x:Name="root" Source="{TemplateBinding Content}"
                                                                           Grid.Row="0" Grid.ColumnSpan="2"
                                                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                           Stretch="Uniform">
                                                                    <Image.Style>
                                                                        <Style TargetType="Image">
                                                                            <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                                            <Setter Property="VerticalAlignment" Value="Stretch" />
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding Description}" >
                                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </Image.Style>
                                                                </Image>

                                                                <Grid Grid.Row="0" Grid.ColumnSpan="2" Grid.Column="1" 
                                                                          HorizontalAlignment="Right" VerticalAlignment="Top"
                                                                          ShowGridLines="False">
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="2"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="2"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <dxe:RatingEdit  Grid.Column="0" ItemsCount="1"  IsReadOnly="True">
                                                                        <dxe:RatingEdit.Style>
                                                                            <Style TargetType="dxe:RatingEdit">
                                                                                <Setter Property="Visibility" Value="Collapsed" />
                                                                                <Setter Property="HorizontalAlignment" Value="Right" />
                                                                                <Setter Property="VerticalAlignment" Value="Top" />

                                                                                <Style.Triggers>
                                                                                    <DataTrigger Binding="{Binding Position}" Value="1">
                                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                                    </DataTrigger>
                                                                                </Style.Triggers>
                                                                            </Style>
                                                                        </dxe:RatingEdit.Style>

                                                                        <dxe:RatingEdit.ItemStyle>
                                                                            <Style TargetType="dxe:RatingItem">
                                                                                <Setter Property="Background" Value="Gold" />
                                                                                <Setter Property="BorderBrush" Value="Gold" />
                                                                                <Setter Property="HorizontalAlignment" Value="Right" />
                                                                                <Setter Property="VerticalAlignment" Value="Top" />
                                                                            </Style>
                                                                        </dxe:RatingEdit.ItemStyle>
                                                                    </dxe:RatingEdit>

                                                                    <Button Name="EditImageButton" ToolTip="{DynamicResource EditImageHeader}" Grid.Column="2" 
                                                                                Command="{Binding DataContext.EditImageCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                                 IsEnabled="{Binding DataContext.IsSCMEditFamiliesManagerBtn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                                CommandParameter="{Binding ElementName=Image1}"
                                                                                HorizontalAlignment="Right" VerticalAlignment="Center"
                                                                                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">

                                                                        <Button.ContentTemplate>
                                                                            <DataTemplate>
                                                                                <Image Height="16" Width="16"  Style="{ DynamicResource EditImageStyle}"  />
                                                                            </DataTemplate>
                                                                        </Button.ContentTemplate>
                                                                    </Button>

                                                                    <Button Name="deleteRowItem" ToolTip="{DynamicResource Delete}" 
                                                                            Grid.Column="4"
                                                                            Command="{Binding DataContext.DeleteImageCommand,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
                                                                            IsEnabled="{Binding DataContext.IsSCMEditFamiliesManagerBtn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                                            CommandParameter="{Binding ElementName=Image1}"  >
                                                                        <Button.ContentTemplate>
                                                                            <DataTemplate>
                                                                                <Image Height="16" Width="16"  Style="{ DynamicResource DeleteStyle}" />
                                                                            </DataTemplate>
                                                                        </Button.ContentTemplate>
                                                                    </Button>
                                                                </Grid>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </UIHelper:ImageContainer.Template>
                                                </UIHelper:ImageContainer>
                                            </DataTemplate>
                                        </dxlc:FlowLayoutControl.ItemTemplate>
                                    </dxlc:FlowLayoutControl>
                                </Grid>
                            </dxlc:LayoutGroup>
                        </Grid>
                    </dxlc:LayoutGroup>

                </Grid>
                <!--Accept/Cancel button start-->
            <Grid Grid.Row="2" Margin="20,0,0,0" HorizontalAlignment="Center" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Button Content="{DynamicResource SCMAccept}"
                        Grid.Column="0"
                        Command="{Binding AddAcceptButtonCommand}"
                        IsEnabled="{Binding DataContext.IsSCMEditFamiliesManagerBtn,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                        Height="30"
                        Width="100"
                        Style="{DynamicResource Button16Style}"
                        VerticalAlignment="Bottom" />
                <Button Content="{DynamicResource SCMCancel}"
                        Grid.Column="2"
                        Command="{Binding AddFamilyPropertyViewCancelButtonCommand}" 
                        Height="30"
                        Width="100"
                        Style="{DynamicResource Button16Style}"
                        VerticalAlignment="Bottom" />
            </Grid>
            <!--Accept/Cancel button end-->

        </Grid>
    </ScrollViewer>
    <!--[shweta.thube][GEOS2-6630][04.04.2025]-->
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</dxwui:WinUIDialogWindow>
