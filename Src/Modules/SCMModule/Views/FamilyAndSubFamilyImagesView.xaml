<dx:DXDialogWindow x:Class="Emdep.Geos.Modules.SCM.Views.FamilyAndSubFamilyImagesView"                   
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                 
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"                  
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"                  
                   xmlns:local="clr-namespace:Emdep.Geos.Modules.SCM.Views"                 
                   xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"                  
                   xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"                 
                   xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"                         
                   xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"                         
                   xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"                         
                   xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"                         
                   xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"                        
                   xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"                         
                   xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"                         
                   xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"                         
                   xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"                         
                   xmlns:ve="http://schemas.devexpress.com/winfx/2008/xaml/docking/visualelements"                         
                   xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"                         
                   xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys"                        
                   xmlns:dxeh="http://schemas.devexpress.com/winfx/2008/xaml/editors/internal"                         
                   xmlns:Validaton ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"                         
                   xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"                         
                   xmlns:dxre="http://schemas.devexpress.com/winfx/2008/xaml/richedit"                          
                   xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"  
                   xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                    xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                   BorderThickness="2"
                   WindowStartupLocation="CenterScreen"
                   ResizeMode="CanResizeWithGrip"
                   BorderBrush="Gray"
                   Title="{Binding ImageCount}"             
                   mc:Ignorable="d"              
                   d:DesignHeight="10" d:DesignWidth="10">
    <dx:DXDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding DataContext.CancelButtonCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dx:DXDialogWindow}}"/>
    </dx:DXDialogWindow.InputBindings>
    <dx:DXDialogWindow.Content>
        <!--//rajashri GEOS2-4956 -->
        <Grid ShowGridLines="False">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="230"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
           

            <Label Content="{DynamicResource ConnectorsImageTitle}" FontSize="20" Padding="10" Margin="10" Grid.Column="0"/>
            <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="0" Padding="10" Margin="10,15,0,10">
                <TextBlock FontSize="15" Text="{Binding ImageDescription}" TextWrapping="Wrap" Margin="0,25,0,0"/>
            </Border>
            <!-- -->
            <dxlc:FlowLayoutControl x:Name="layoutImages"                                                                                                 
                                ItemsSource="{Binding DataContext.FamilyImageList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dx:DXDialogWindow}}"                                                                
                                AllowItemMoving="True"                                                                
                                AllowLayerSizing="True"                                                                
                                AllowMaximizedElementMoving="True"                                                                
                                AnimateItemMoving="True"                                                                
                                DragScrolling="False"                                                                
                                ShowLayerSeparators="True"                                                                
                                Orientation="Vertical"                                                                 
                                Loaded="LayoutImages_OnLoaded"                                                                
                                HorizontalAlignment="Center"                                                                
                                VerticalAlignment="Center" Grid.Column="1">

                <dxmvvm:Interaction.Behaviors>
                    <dxmvvm:EventToCommand Command="{Binding DataContext.ItemPositionChangedCommand,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dx:DXDialogWindow}}"                                                                                
                                       EventName="ItemPositionChanged"                                                                                
                                       CommandParameter="{Binding ElementName=flowLayoutControl}">
                    </dxmvvm:EventToCommand>
                </dxmvvm:Interaction.Behaviors>

                <dxlc:FlowLayoutControl.ItemTemplate>
                    <DataTemplate>
                        <UIHelper:ImageContainer Content="{Binding AttachmentImage}" Width="280" HorizontalAlignment="Center" VerticalAlignment="Center" Cursor="Hand" ToolTip="{Binding Description}">
                            <UIHelper:ImageContainer.Template>
                                <ControlTemplate TargetType="UIHelper:ImageContainer">
                                    <Grid ShowGridLines="False">

                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <Image x:Name="root" Source="{TemplateBinding Content}" RenderTransformOrigin="0.5,0.5" Grid.Row="0" Grid.ColumnSpan="2" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform" StretchDirection="Both" >

                                            <Image.Style>
                                                <Style TargetType="Image">
                                                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                    <Setter Property="VerticalAlignment" Value="Stretch" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Description}" >
                                                            <Setter Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Image.Style>

                                            <Image.RenderTransform>
                                                <ScaleTransform />
                                            </Image.RenderTransform>

                                            <Image.LayoutTransform>
                                                <ScaleTransform ScaleX="{Binding Value, ElementName=root}" ScaleY="{Binding Value, ElementName=root}"/>
                                            </Image.LayoutTransform>

                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualStateGroup.Transitions>
                                                        <VisualTransition To="MouseOver" GeneratedDuration="0:0:0.075" />
                                                        <VisualTransition From="MouseOver" GeneratedDuration="0:0:0.05" />
                                                    </VisualStateGroup.Transitions>
                                                    <VisualState x:Name="Normal" />
                                                    <VisualState x:Name="MouseOver">
                                                        <Storyboard>
                                                            <DoubleAnimation Storyboard.TargetName="root" Storyboard.TargetProperty="(RenderTransform).ScaleX" To="1.03" Duration="0" />
                                                            <DoubleAnimation Storyboard.TargetName="root" Storyboard.TargetProperty="(RenderTransform).ScaleY" To="1.03" Duration="0" />
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Pressed" />
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                        </Image>
                                        <Grid Grid.Row="0" Grid.ColumnSpan="2" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Top" ShowGridLines="False">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="2"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <dxe:RatingEdit  Grid.Column="0" ItemsCount="1" IsReadOnly="True">
                                                <dxe:RatingEdit.Style>
                                                    <Style TargetType="dxe:RatingEdit">
                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                        <Setter Property="HorizontalAlignment" Value="Right" />
                                                        <Setter Property="VerticalAlignment" Value="Top" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Position}" Value="1">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </dxe:RatingEdit.Style>
                                                <dxe:RatingEdit.ItemStyle>
                                                    <Style TargetType="dxe:RatingItem">
                                                        <Setter Property="Background" Value="Gold" />
                                                        <Setter Property="BorderBrush" Value="Gold" />
                                                        <Setter Property="HorizontalAlignment" Value="Right" />
                                                        <Setter Property="VerticalAlignment" Value="Top" />
                                                    </Style>
                                                </dxe:RatingEdit.ItemStyle>
                                            </dxe:RatingEdit>
                                        </Grid>
                                    </Grid>
                                </ControlTemplate>
                            </UIHelper:ImageContainer.Template>
                        </UIHelper:ImageContainer>
                    </DataTemplate>
                </dxlc:FlowLayoutControl.ItemTemplate>
            </dxlc:FlowLayoutControl>
        </Grid>
    </dx:DXDialogWindow.Content>
    <!--[shweta.thube][GEOS2-6630][04.04.2025]-->
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</dx:DXDialogWindow>
