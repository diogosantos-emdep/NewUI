<UserControl x:Class="Emdep.Geos.Modules.SCM.Views.FamiliesManagerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Emdep.Geos.Modules.SCM.Views"              
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"               
             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"              
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"              
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"              
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
             mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300">
            
    <Grid ShowGridLines="False" >
        <Grid.RowDefinitions>
            <RowDefinition Height="70"/>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="60*"/>
            <ColumnDefinition Width="40*"/>

        </Grid.ColumnDefinitions>

        <Grid Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Label Content="{DynamicResource SCMFamiliesGridTitle}" Style="{StaticResource LabelTitleStyle}"
                   Grid.Row="0"
                   VerticalAlignment="Center" />

            <Grid Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right">
                <Grid HorizontalAlignment="Right" Width="Auto" Height="45">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="45"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions >
                        <!--<ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>-->
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="0"/>
                        <ColumnDefinition Width="0"/>
                        <ColumnDefinition Width="0"/>
                        <ColumnDefinition Width="0"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="45"/>
                    </Grid.ColumnDefinitions>



                    <!-- Add Button -->

                    <Button Content=" " Grid.Row="0" Grid.Column="10" Height="40" Width="40" HorizontalAlignment="Right"
                             Command="{Binding RefreshFamilyCommand}" CommandParameter="{Binding ElementName=GridfamiliesTreeList}"  Margin="0,0,5,5">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonRefresh}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{ DynamicResource PCMRefreshButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                    <Button Content=" " Grid.Row="0" Grid.Column="12" Height="40" Width="40" HorizontalAlignment="Right"
                    IsEnabled="{Binding DataContext.IsSCMEditFamiliesManager,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}"
                  Command="{Binding AddFamilyManagerButtonCommand}" CommandParameter="{Binding ElementName=GridfamiliesTreeList}" Margin="0,0,5,5">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonAdd}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{ DynamicResource SCMAddButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                    <!-- Print Button -->
                    <Button Content=" " Grid.Row="0" Grid.Column="14" Height="40" Width="40" HorizontalAlignment="Right"
                            Command="{Binding PrintCommand}" CommandParameter="{Binding ElementName=GridfamiliesTreeList}" Margin="0,0,5,5">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonPrint}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{DynamicResource PCMPrintButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                    <!-- Export to Excel -->
                    <Button Content=" " Grid.Row="0" Grid.Column="16" Height="40" Width="40" HorizontalAlignment="Right"
                            Command="{Binding ExportCommand}" CommandParameter="{Binding ElementName=GridfamiliesTreeList}" Margin="0,0,5,5">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonExportToExcel}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{DynamicResource PCMExportToExcelButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                </Grid>
            </Grid>
        </Grid>

        <Grid Grid.Row="1"  Grid.Column="0"  >
            <dxg:TreeListControl x:Name="treeListControl" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" AutoGenerateColumns="None"
                                 ItemsSource="{Binding  DataContext.ListConnectorFamilies, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=UserControl}}"
                                 SelectedItem="{Binding DataContext.SelectedConnectorFamilies,RelativeSource={RelativeSource AncestorType=UserControl},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"                                  
                                 ImplyNullLikeEmptyStringWhenFiltering="True" SelectionMode="Row" >
                <dxmvvm:Interaction.Behaviors>
                    <dxmvvm:EventToCommand EventName="CurrentItemChanged" Command="{Binding DataContext.CurrentItemChangedCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                           PassEventArgsToCommand="True" />
                </dxmvvm:Interaction.Behaviors>
                <dxg:TreeListControl.Columns>
                    <dxg:TreeListColumn Header="{DynamicResource FamiliesName}" FieldName="Name" MinWidth="250" UnboundType="Object" FilterPopupMode="CheckedList">
                        <dxg:TreeListColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock VerticalAlignment="Center" Margin="10 0 0 0">
                                    <Hyperlink x:Name="hyperlink" TargetName="_blank"                                                                                                                                   
                                        Command="{Binding DataContext.EditFamilymanagerHyperlinkClickCommand,RelativeSource={RelativeSource AncestorType=dxg:TreeListControl}}"                                               
                                        CommandParameter="{Binding ElementName=GridfamiliesTreeList}" Style="{DynamicResource hyperlinkGridStyle}">
                                        <InlineUIContainer>
                                            <TextBlock Text="{Binding Data.Name}"  Style="{DynamicResource HyperlinkTextBlock}" TextDecorations="Underline"/>
                                        </InlineUIContainer>
                                    </Hyperlink>
                                </TextBlock>
                                <DataTemplate.Triggers>
                                    <Trigger Property="dxg:DataViewBase.IsFocusedCell" Value="True">
                                        <Setter TargetName="hyperlink" Property="Foreground" Value="OrangeRed"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="hyperlink" Property="Foreground" Value="OrangeRed" />
                                    </Trigger>
                                </DataTemplate.Triggers>
                            </DataTemplate>
                        </dxg:TreeListColumn.CellTemplate>
                    </dxg:TreeListColumn>
                    <dxg:TreeListColumn Header="{DynamicResource FamiliesConnectorType}" FieldName="ConnectorType.Value_en" MinWidth="200"  FilterPopupMode="CheckedList"/>
                    <dxg:TreeListColumn Header="{DynamicResource FamiliesDescription}" FieldName="Description" MinWidth="550"  FilterPopupMode="CheckedList"/>
                    <dxg:TreeListColumn Header="{DynamicResource FamiliesInUse}" FieldName="IsInUse" MinWidth="65" UnboundType="Object" FilterPopupMode="CheckedList"/>
                </dxg:TreeListControl.Columns>
                <dxg:TreeListControl.TotalSummary>
                    <dxg:TreeListSummaryItem FieldName="Name" SummaryType="Count" DisplayFormat="Total Count={0}" Alignment="Left"/>
                </dxg:TreeListControl.TotalSummary>
                <dxg:TreeListControl.View>
                    <dxg:TreeListView Name="GridfamiliesTreeList"                                                                                             
                                      ShowTotalSummary="False"                                                     
                                      AllowRecursiveNodeChecking="False"                                                      
                                      ShowSearchPanelMode="Always"                                                      
                                      AutoWidth="True"                                                      
                                      ShowIndicator="False"                                                      
                                      VerticalScrollbarVisibility="Visible"                                                      
                                      ParentFieldName="Parent"                                                      
                                      KeyFieldName="Key"                                                      
                                      FilterMode="Extended"                                                      
                                      SearchPanelHorizontalAlignment="Stretch"                                                      
                                      AllowDragDrop="False"                                                                                                           
                                      AutoExpandAllNodes="False"                                                      
                                      NavigationStyle="Row"                                                       
                                      ShowVerticalLines="True"                                                      
                                      ImmediateUpdateRowPosition="True"                                                      
                                      ShowColumnHeaders="True"
                                      ExpandCollapseNodesOnNavigation="True"
                                      ShowFixedTotalSummary="True"
                                      FilterEditorShowOperandTypeIcon="True" 
                                      ShowEmptyText="False"
                                      SearchString="{Binding MyFilterString,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                      FocusedRow="{Binding SelectedConnectorFamilies, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                      AllowChildNodeSourceUpdates="True">
                        <dxmvvm:Interaction.Behaviors>

                            <!--<dxmvvm:EventToCommand Command="{Binding TableViewLoadedCommand}"
                                                   EventName="Loaded"
                                                   PassEventArgsToCommand="True" />-->

                            <!--<dxmvvm:EventToCommand EventName="ShowFilterPopup" Command="{Binding CommandShowCustomFilterPopupClick}" PassEventArgsToCommand="True"/>-->
                        </dxmvvm:Interaction.Behaviors>
                    </dxg:TreeListView>
                </dxg:TreeListControl.View>
            </dxg:TreeListControl>
        </Grid>
        <dxe:ImageEdit Source="{Binding DataContext.AttachmentImage,RelativeSource={RelativeSource AncestorType=UserControl}, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                   Grid.Row="1" Grid.Column="1" Grid.RowSpan="17" HorizontalAlignment="Stretch" Stretch="Fill" IsReadOnly="True">
        </dxe:ImageEdit>
    </Grid>
    <!--[shweta.thube][GEOS2-6630][04.04.2025]-->
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    
</UserControl>
