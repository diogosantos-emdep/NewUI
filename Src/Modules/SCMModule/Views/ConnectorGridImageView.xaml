<dx:DXDialogWindow x:Class="Emdep.Geos.Modules.SCM.Views.ConnectorGridImageView"             
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"            
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"            
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"            
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"            
                   xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"            
                   xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"              
                   xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"             
                   xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"            
                   xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"            
                   xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"            
                   xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"             
                   xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"             
                   xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"             
                   xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"             
                   xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"             
                   xmlns:ve="http://schemas.devexpress.com/winfx/2008/xaml/docking/visualelements"             
                   xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"             
                   xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys"             
                   xmlns:dxeh="http://schemas.devexpress.com/winfx/2008/xaml/editors/internal"             
                   xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"             
                   xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"             
                   xmlns:dxre="http://schemas.devexpress.com/winfx/2008/xaml/richedit"              
                   xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon" 
                   xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                   xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                   BorderThickness="2" WindowState="Maximized"
                   ResizeMode="CanResizeWithGrip"
                   BorderBrush="Gray"
                   Title="{Binding ImageCount}"
                   mc:Ignorable="d"
                   d:DesignHeight="10" d:DesignWidth="10">
    <!--<Grid>
    </Grid>-->
    <dx:DXDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding DataContext.CancelButtonCommand,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dx:DXDialogWindow}}"/>
    </dx:DXDialogWindow.InputBindings>
    <!--[rdixit][GEOS2-9199][11.09.2025]-->
    <dx:DXDialogWindow.Resources>
        <Converter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </dx:DXDialogWindow.Resources>
    <dx:DXDialogWindow.Content>
        <dxlc:FlowLayoutControl x:Name="layoutImages" VerticalAlignment="Center" MinWidth="1000"
                                ItemsSource="{Binding DataContext.ImagesList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dx:DXDialogWindow}}"
                                AllowItemMoving="True" AllowLayerSizing="True" AllowMaximizedElementMoving="True" MaximizedElementChanged="layoutImages_MaximizedElementChanged"
                                AnimateItemMoving="True" DragScrolling="False" ShowLayerSeparators="True" MaximizedElementPosition="Top"
                                Orientation="Vertical" Loaded="LayoutImages_OnLoaded" HorizontalAlignment="Center">
            <dxmvvm:Interaction.Behaviors>
                <dxmvvm:EventToCommand Command="{Binding DataContext.ItemPositionChangedCommand,UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,RelativeSource={RelativeSource AncestorType=dx:DXDialogWindow}}"
                                       EventName="ItemPositionChanged" CommandParameter="{Binding ElementName=flowLayoutControl}"/>
            </dxmvvm:Interaction.Behaviors>

            <dxlc:FlowLayoutControl.ItemTemplate>
                <DataTemplate>
                    <!--[rdixit][GEOS2-9199][11.09.2025]-->
                    <UIHelper:ImageContainer Content="{Binding AttachmentImage}" Grid.Row="1" Grid.Column="1" Width="280" HorizontalAlignment="Center" VerticalAlignment="Center" Cursor="Hand" >
                        <UIHelper:ImageContainer.Style>
                            <Style TargetType="UIHelper:ImageContainer">
                                <Setter Property="ToolTip" Value="{Binding Description}" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Description}" Value="">
                                        <Setter Property="ToolTip" Value="{x:Null}" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Description}" Value="{x:Null}">
                                        <Setter Property="ToolTip" Value="{x:Null}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </UIHelper:ImageContainer.Style>
                        <UIHelper:ImageContainer.Template>
                            <ControlTemplate TargetType="UIHelper:ImageContainer">
                                <Grid ShowGridLines="False">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="50"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="50"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Image x:Name="root" Source="{TemplateBinding Content}" RenderTransformOrigin="0.5,0.5" 
                                           Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                           Stretch="Uniform" StretchDirection="Both" >
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                <Setter Property="VerticalAlignment" Value="Stretch" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Description}" >
                                                        <Setter Property="Visibility" Value="Visible" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                        <Image.RenderTransform>
                                            <ScaleTransform />
                                        </Image.RenderTransform>
                                        <Image.LayoutTransform>
                                            <ScaleTransform ScaleX="{Binding Value, ElementName=root}" ScaleY="{Binding Value, ElementName=root}"/>
                                        </Image.LayoutTransform>

                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualStateGroup.Transitions>
                                                    <VisualTransition To="MouseOver" GeneratedDuration="0:0:0.075" />
                                                    <VisualTransition From="MouseOver" GeneratedDuration="0:0:0.05" />
                                                </VisualStateGroup.Transitions>
                                                <VisualState x:Name="Normal" />
                                                <VisualState x:Name="MouseOver">
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="root" Storyboard.TargetProperty="(RenderTransform).ScaleX" To="1.03" Duration="0" />
                                                        <DoubleAnimation Storyboard.TargetName="root" Storyboard.TargetProperty="(RenderTransform).ScaleY" To="1.03" Duration="0" />
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Pressed" />
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                    </Image>

                                    <Grid Grid.Row="0" Grid.ColumnSpan="2" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Top" ShowGridLines="False">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="2"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <dxe:RatingEdit  Grid.Column="0" ItemsCount="1" IsReadOnly="True">
                                            <dxe:RatingEdit.Style>
                                                <Style TargetType="dxe:RatingEdit">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                    <Setter Property="HorizontalAlignment" Value="Right" />
                                                    <Setter Property="VerticalAlignment" Value="Top" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Position}" Value="1">
                                                            <Setter Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </dxe:RatingEdit.Style>

                                            <dxe:RatingEdit.ItemStyle>
                                                <Style TargetType="dxe:RatingItem">
                                                    <Setter Property="Background" Value="Gold" />
                                                    <Setter Property="BorderBrush" Value="Gold" />
                                                    <Setter Property="HorizontalAlignment" Value="Right" />
                                                    <Setter Property="VerticalAlignment" Value="Top" />
                                                </Style>
                                            </dxe:RatingEdit.ItemStyle>
                                        </dxe:RatingEdit>
                                    </Grid>
                                    <TextBlock Margin="0,5,0,0" Grid.Row="1" Grid.ColumnSpan="2" Grid.Column="1" FontSize ="15" HorizontalAlignment="Left" VerticalAlignment="Top"
                                               ToolTip="{Binding Description}" Text="{Binding Description}" TextWrapping="Wrap"/>

                                    <!--[rdixit][GEOS2-9199][11.09.2025]-->
                                    <TextBlock x:Name="HeaderText" Text="{Binding PictureType}" VerticalAlignment="Top" Background="Gray" FontWeight="Bold" FontSize="14" 
                                               Margin="-60,0,5,5" Width="Auto" HorizontalAlignment="Left" Padding="3"
                                               Visibility="{Binding IsPictureMaximize, Converter={StaticResource BoolToVisibilityConverter}}" />
                                </Grid>
                            </ControlTemplate>
                        </UIHelper:ImageContainer.Template>
                    </UIHelper:ImageContainer>
                </DataTemplate>
            </dxlc:FlowLayoutControl.ItemTemplate>
        </dxlc:FlowLayoutControl>
    </dx:DXDialogWindow.Content>
    <!--[shweta.thube][GEOS2-6630][04.04.2025]-->
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</dx:DXDialogWindow>
