<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.SAM.Views.DocumentsIdentificationView"
              xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:local="clr-namespace:Emdep.Geos.Modules.SAM.Views"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
                         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                         xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:Validation="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                         xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                         xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                         mc:Ignorable="d" 
                         xmlns:Coverter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                         HorizontalAlignment="Stretch" Margin="20,0,0,0"
                         Title="{DynamicResource DocumentsIdentificationView_DocumentIdentification}"
                         TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}"
                         Style="{DynamicResource WinUIDialogWindowStyle}">
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding CancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    <dxwui:WinUIDialogWindow.Resources></dxwui:WinUIDialogWindow.Resources>
    <Grid HorizontalAlignment="Stretch" Height="400" Margin="20,0,20,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="0"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="40"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20*"/>
            <ColumnDefinition Width="60*"/>
            <ColumnDefinition Width="20*"/>
        </Grid.ColumnDefinitions>
        <dxg:GridControl x:Name="DocumentIdentificationGrid" ItemsSource="{Binding DocumentsIdentificationList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                 FilterString="{Binding MyFilterString ,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" SelectionMode="Row" AllowLiveDataShaping="True" Grid.Row="1" Grid.Column="1"
                 SelectedItem="{Binding SelectedObject, Mode=TwoWay}" ImplyNullLikeEmptyStringWhenFiltering="True">
            <dxg:GridColumn FieldName="IsPdf" Header=" " MinWidth="50" MaxWidth="50" Width="30" FilterPopupMode="Default">
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <Image x:Name="image" VerticalAlignment="Center" Height="20" Width="20">
                            <Image.Style>
                                <Style TargetType="{x:Type Image}">
                                    <Setter Property="Source" Value="{DynamicResource SAMpdfIconImageStyle}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding RowData.Row.IsPdf}" Value="false">
                                            <Setter Property="Source" Value="{x:Null}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                        </Image>
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>
            </dxg:GridColumn>
            <dxg:GridColumn FieldName="FileName" Header=" " MinWidth="200" Width="*" FilterPopupMode="Default" ReadOnly="True" />
            <dxg:GridColumn FieldName="StructureDocumenttype" Header=" " MinWidth="250"  Width="250" FilterPopupMode="Default" >
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <dxe:ComboBoxEdit Name="StructureDocumentsEditor" ItemsSource="{Binding DataContext.StructureDocumentList, RelativeSource={RelativeSource AncestorType=dxg:GridControl},UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                                  HorizontalAlignment="Stretch" IsTextEditable="False" ValidateOnTextInput="False" ValidateOnEnterKeyPressed="True" InvalidValueBehavior="AllowLeaveEditor"
                                                  DisplayMember="Value" ValueMember="IdLookupValue" 
                                                  AutoComplete="False" ImmediatePopup="True" IncrementalFiltering="True" 
                                          SelectedItem="{Binding RowData.Row.StructureDocumenttype,UpdateSourceTrigger=PropertyChanged , Mode=TwoWay}">
                            <dxmvvm:Interaction.Behaviors>
                                <dxmvvm:EventToCommand EventName="Validate"
                                       Command="{Binding DataContext.StructureDocumentValidateCommand, RelativeSource={RelativeSource AncestorType=dxg:GridControl}}"
                                       PassEventArgsToCommand="True"/>
                            </dxmvvm:Interaction.Behaviors>
                        </dxe:ComboBoxEdit>
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>
            </dxg:GridColumn>
            <dxg:GridColumn Header=" " ShowCheckBoxInHeader="True" FieldName="IsSelected" Width="50" FixedWidth="True" 
                                AllowBestFit="true" 
                                AllowCellMerge="False"
                                AllowMoving="false"
                                 AllowSorting="False"
                                AllowAutoFilter="False"
                                ShowInColumnChooser="False" 
                                FilterPopupMode="CheckedList">
                <dxg:GridColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox x:Name="CheckedBox_Editor" IsChecked="{Binding RowData.Row.IsSelected,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                  HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </DataTemplate>
                </dxg:GridColumn.CellTemplate>
            </dxg:GridColumn>
           
            <dxg:GridControl.View>
                <dxg:TableView x:Name="tblCustomerAccount" 
                       AllowBestFit="True"
                       AllowEditing="True"
                       ShowGroupPanel="False" 
                       ShowIndicator="False"                      
                       ShowSearchPanelMode="never" 
                       SearchPanelHorizontalAlignment="Stretch"
                       HorizontalScrollbarVisibility="Auto"
                       VerticalScrollbarVisibility="Auto"
                       NavigationStyle="Cell" 
                       ShowFixedTotalSummary="False"
                       AllowPerPixelScrolling="True"
                       AllowConditionalFormattingMenu="True" >
                    <dxg:TableView.FormatConditions>
                        <dxg:FormatCondition Expression="[IsRowError] = True" ApplyToRow="True">
                            <dxg:Format Background="#FFFF0000"/>
                        </dxg:FormatCondition>
                    </dxg:TableView.FormatConditions>
                </dxg:TableView>
            </dxg:GridControl.View>
        </dxg:GridControl>
        <StackPanel Grid.Row=" 2"  Grid.Column="1"
                    HorizontalAlignment="Center" 
                    Orientation="Horizontal"
                    Margin="20,0,0,0"
                    Width="290">
            <Button Content="{DynamicResource AcceptButton}"
                    Command="{Binding AcceptButtonCommand}" 
                    Height="30"
                    Width="100" IsEnabled="{Binding IsAcceptEnable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    Margin="0,0,30,0"
                    Style="{DynamicResource Button16Style}"
                    VerticalAlignment="Bottom" />
            <Button Content="{DynamicResource CancelButton}"
                    Command="{Binding CancelButtonCommand}" 
                    Height="30"
                    Width="100"
                    Margin="30,0,0,0"
                    Style="{DynamicResource Button16Style}"
                    VerticalAlignment="Bottom" />
        </StackPanel>
    </Grid>
</dxwui:WinUIDialogWindow>
