<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.SAM.Views.ValidationView"
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:local="clr-namespace:Emdep.Geos.Modules.SAM.Views"
                         xmlns:Converters="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                         xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
                         xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                         xmlns:dxga="http://schemas.devexpress.com/winfx/2008/xaml/gauges"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                         xmlns:ve="http://schemas.devexpress.com/winfx/2008/xaml/docking/visualelements"
                         xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
                         xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                         xmlns:dxnav="http://schemas.devexpress.com/winfx/2008/xaml/navigation"
                         xmlns:dxn="http://schemas.devexpress.com/winfx/2008/xaml/navbar"
                         xmlns:dxwuin="http://schemas.devexpress.com/winfx/2008/xaml/windowsui/navigation"
                         xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                         xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" 
                         xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
                         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 
                         xmlns:dxm="http://schemas.devexpress.com/winfx/2008/xaml/map"
                         xmlns:system="clr-namespace:System;assembly=mscorlib"
                         xmlns:SAMCommon ="clr-namespace:Emdep.Geos.Modules.SAM"
                         xmlns:SAMDataCommon="clr-namespace:Emdep.Geos.Data.Common.SAM;assembly=Emdep.Geos.Data.Common"
                         xmlns:ViewModels="clr-namespace:Emdep.Geos.Modules.SAM.ViewModels"
                         Height="{Binding SystemParameters.PrimaryScreenHeight}" 
                         Width="{Binding SystemParameters.PrimaryScreenWidth}"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         HorizontalContentAlignment="Stretch"
                         VerticalContentAlignment="Stretch"
                         Template="{StaticResource Maximized_DXDialogWindow}"
                         Style="{DynamicResource WinUIDialogWindowStyle}"
                         mc:Ignorable="d"
                         Focusable="True" IsTabStop="True"
                         UIHelper:FocusExtension.IsFocused="{Binding FocusUserControl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
    <!--UIHelper:FocusExtension.IsFocused="{Binding FocusUserControl}"-->

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="PreviewTextInput">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandScanBarcode}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding CommandCancelButton}" />
    </dxwui:WinUIDialogWindow.InputBindings>

    <dxwui:WinUIDialogWindow.TitleStyle>
        <Style TargetType="ContentControl">
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <TextBlock Text="{DynamicResource Validation}" 
                                   Style="{DynamicResource PickingWinUIDialogWindowTitleStyle}" 
                                   Grid.Column="0" />
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </dxwui:WinUIDialogWindow.TitleStyle>

    <dxwui:WinUIDialogWindow.Resources>

        <system:Double x:Key="FontSize15">15</system:Double>
        <system:Double x:Key="FontSize18">18</system:Double>
        <system:Double x:Key="FontSize19">19</system:Double>
        <system:Double x:Key="FontSize24">24</system:Double>
        <system:Double x:Key="FontSize33">33</system:Double>
        <system:Double x:Key="FontSize35">35</system:Double>

        <Style TargetType="dxg:HeaderContentControl" x:Key="MyHeaderStyle">
            <Setter Property="TextBlock.FontSize" Value="26"/>
        </Style>

        <Style TargetType="dxlc:GroupBox" >
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="3"/>
        </Style>

    </dxwui:WinUIDialogWindow.Resources>

    <Grid ShowGridLines="False" Height="{Binding DialogHeight}" Width="{Binding DialogWidth}" Focusable="True" x:Name="grid1"
          UIHelper:FocusExtension.IsFocused="{Binding FocusUserControl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
        <Grid.RowDefinitions>
            <RowDefinition Height="130"/>
            <RowDefinition Height="7"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="7"/>
            <RowDefinition Height="35"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1.2*"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>

        <dxlc:LayoutGroup Grid.Row="0" View="GroupBox"  Grid.Column="0"
                              HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                              IsCollapsible="False" IsCollapsed="False">

            <dxlc:LayoutGroup.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Grid.Column="0" Text="{DynamicResource WorkOrder}" 
                               FontWeight="Bold" VerticalAlignment="Center"/>
                </DataTemplate>
            </dxlc:LayoutGroup.HeaderTemplate>

            <Grid Name="WorkOrder" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  >
                <Viewbox>
                    <TextBlock Text="{Binding WorkOrder,UpdateSourceTrigger=PropertyChanged}"
                               FontWeight="Bold" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                               IsEnabled="False" TextAlignment="Center"
                               Focusable="False">
                    </TextBlock>
                </Viewbox>
            </Grid>
        </dxlc:LayoutGroup>

        <dxlc:LayoutGroup Grid.Row="0" View="GroupBox"  Grid.Column="2"
                              HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                              IsCollapsible="False" IsCollapsed="False">

            <dxlc:LayoutGroup.HeaderTemplate>
                <DataTemplate>
                    <Grid >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{DynamicResource Customer}" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                    </Grid>
                </DataTemplate>
            </dxlc:LayoutGroup.HeaderTemplate>

            <Grid Name="Customer" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  >
                <Viewbox>
                    <TextBlock Text="{Binding Customer,UpdateSourceTrigger=PropertyChanged}"
                               FontWeight="Bold" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                               IsEnabled="False" TextAlignment="Center"
                               Focusable="False">
                    </TextBlock>
                </Viewbox>
            </Grid>
        </dxlc:LayoutGroup>

        <Grid Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3.5*"/>
                <ColumnDefinition Width="7"/>
                <ColumnDefinition Width="1.5*"/>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <dxlc:LayoutGroup View="GroupBox" Grid.Column="0" Grid.Row="0"
                              HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                              IsCollapsible="False" IsCollapsed="False">
                <dxlc:LayoutGroup.HeaderTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{DynamicResource Items}" FontWeight="Bold" VerticalAlignment="Center"/>
                            <DockPanel Grid.Column="1" Visibility="{Binding DataContext.IsWrongItemErrorVisible,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}">
                                <Image x:Name="errorImage" Height="24" Width="24" Source="/Emdep.Geos.Modules.SAM;component/Assets/Images/error.png"  DockPanel.Dock="Left"/>
                                <TextBlock Name="errorText" Text="{Binding DataContext.WrongItem, RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}"
                                       HorizontalAlignment="Right" VerticalAlignment="Center" FontWeight="Bold"  Foreground="#FF0000" DockPanel.Dock="Right" />
                            </DockPanel>
                        </Grid>
                    </DataTemplate>
                </dxlc:LayoutGroup.HeaderTemplate>

                <UIHelper:GridControlWithoutClickExtended ItemsSource="{Binding OtValidateItemList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedItem="{Binding SelectedOtValidateItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                                      HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                         >
                    

                    <!--Item-->
                    <dxg:GridColumn Header="{DynamicResource Item}" FieldName="NumItem" Width="35" AllowColumnFiltering ="False" AllowSorting="False" />

                    <!--Reference-->
                    <dxg:GridColumn Header="{DynamicResource Reference}" FieldName="Reference" Width="Auto" AllowColumnFiltering ="False" AllowSorting="False"/>

                    <!--Quantity-->
                    <dxg:GridColumn Header="{DynamicResource Qty}" 
                                Width="35" 
                                AllowColumnFiltering ="False" AllowSorting="False" FieldName="Quantity" AllowAutoFilter="False">
                    </dxg:GridColumn>

                    <!--Status-->
                    <dxg:GridColumn Header="{DynamicResource GridSAMStatus}" 
                                    FieldName="IdItemStatus"
                                    Width="55"  
                                    AllowColumnFiltering ="False" 
                                    AllowSorting="False"
                                    >
                        <dxg:GridColumn.CellTemplate>
                            <DataTemplate>
                                <dxe:ComboBoxEdit x:Name="PART_Editor" ItemsSource="{Binding View.DataContext.ValidationStatusList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                  DisplayMember="Value" ValueMember="IdLookupValue" 
                                                  ApplyItemTemplateToSelectedItem="True" IsTextEditable="False"
                         >
                                    <dxe:ComboBoxEdit.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Image Margin="5 0" Height="30" Width="30">
                                                    <Image.Style>
                                                        <Style>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding IdImage}" Value="1">
                                                                    <Setter Property="Image.Source" Value="{x:Null}" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding IdImage}" Value="2">
                                                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.SAM;component/Assets/Images/OK.png" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding IdImage}" Value="3">
                                                                    <Setter Property="Image.Source" Value="/Emdep.Geos.Modules.SAM;component/Assets/Images/NOK.png" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                                <TextBlock Text="{Binding Value}"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </dxe:ComboBoxEdit.ItemTemplate>
                                </dxe:ComboBoxEdit>
                            </DataTemplate>
                        </dxg:GridColumn.CellTemplate>
                    </dxg:GridColumn>

                    <UIHelper:GridControlWithoutClickExtended.View>
                        <dxg:TableView x:Name="ItemsTableView"
                                   ItemsSourceErrorInfoShowMode="None"
                                   ShowGroupPanel="False"
                                   ShowColumnHeaders="True"
                                   ShowIndicator="False" 
                                   AutoWidth="True" 
                                   RowMinHeight="60" 
                                   FontSize="{StaticResource FontSize33}" 
                                   IsColumnMenuEnabled="False"
                                   SearchColumns="False"
                                   HorizontalScrollbarVisibility="Auto"
                                   VerticalScrollbarVisibility="Auto"
                                   IndicatorWidth="60"
                                   IsEnabled="True"
                                       >

                            
                            <dxmvvm:Interaction.Behaviors>
                                <dxmvvm:EventToCommand EventName="CellValueChanging" 
                                                   Command="{Binding StatusCellValueChanged,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                                                   PassEventArgsToCommand="True" />
                               
                            </dxmvvm:Interaction.Behaviors>
                        </dxg:TableView>
                    </UIHelper:GridControlWithoutClickExtended.View>
                </UIHelper:GridControlWithoutClickExtended>
            </dxlc:LayoutGroup>

            <!--Information-->
            <dxlc:LayoutGroup Grid.Column="2" 
                          View="GroupBox"
                          Orientation="Horizontal"
                          HorizontalAlignment="Stretch"  
                          VerticalAlignment="Stretch" 
                          IsCollapsible="False" IsCollapsed="False" >

                <dxlc:LayoutGroup.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Grid.Column="0" Text="{DynamicResource Information}" 
                                   FontWeight="Bold" VerticalAlignment="Center"/>
                    </DataTemplate>
                </dxlc:LayoutGroup.HeaderTemplate>

                <Grid ShowGridLines="False" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="{Binding IsInformationVisible}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0"
                            Text="{Binding SelectedOtValidateItem.Description}" TextWrapping="Wrap" TextAlignment="Center"
                            HorizontalAlignment="Stretch" 
                            FontSize="{StaticResource FontSize24}" FontWeight="Bold" />

                    <Image Grid.Row="2" Grid.Column="0" 
                            Source="{Binding ArticleImage,UpdateSourceTrigger=PropertyChanged}" 
                            VerticalAlignment="Stretch" HorizontalAlignment="Stretch" />
                </Grid>

            </dxlc:LayoutGroup>
        </Grid>

        <!--Cancel Button-->
        <Grid Grid.Row="4" Grid.ColumnSpan="3" ShowGridLines="False" VerticalAlignment="Center" HorizontalAlignment="Center" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Row="3" Grid.Column="2"
                    HorizontalAlignment="Center"
                    Padding="0 -5 0 0"
                    Content="{DynamicResource Cancel}"
                    Command="{Binding CommandCancelButton}"
                    FontSize="{StaticResource FontSize24}"
                    FontWeight="Bold"
                    Height="35"
                    Width="150" />

        </Grid>

    </Grid>

</dxwui:WinUIDialogWindow>
