<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.Crm.Views.AddUserView"
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
                         xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                         xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                         xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
                         xmlns:UIConverter ="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                         xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
                         xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                         mc:Ignorable="d" 
                         d:DesignHeight="500" Width="800"
                         Title="{DynamicResource AddUserViewHeader}"
                         TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}"
                         Style="{DynamicResource WinUIDialogWindowStyle}">
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding AddUserCancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    <dxwui:WinUIDialogWindow.Resources>
        <Style x:Key="TabItemStyle" TargetType="dx:DXTabItem">
            <Setter Property="Header" Value="{Binding Year}"/>
        </Style>
        <DataTemplate x:Key="TabItemHeaderTemplate">
            <TextBlock Text="{Binding}" FontWeight="Medium"/>
        </DataTemplate>
        <DataTemplate x:Key="TabItemContentTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <StackPanel Orientation="Horizontal">
                    <Label Grid.Row="0" Grid.Column="0" Content="{DynamicResource SearchUserSalesQuotaAmount}" Width="140" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    <dxe:TextEdit  Text="{Binding SalesQuotaAmount}" 
                                   MaskType="Numeric" Margin="5 0 0 0" Grid.Row="0" Grid.Column="1" Width="100" Height="30" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="LostFocus">
                                <i:InvokeCommandAction Command="{Binding DataContext.SalesQuotaAmountLostFocusCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <dxmvvm:Interaction.Behaviors>
                            <dxmvvm:EventToCommand EventName="EditValueChanged" Command="{Binding DataContext.SalesQuotaAmountChangedCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
                        </dxmvvm:Interaction.Behaviors>
                    </dxe:TextEdit>

                    <dxe:ComboBoxEdit Grid.Row="0" Grid.Column="2" HorizontalAlignment="Stretch" Margin="5 0 0 0" VerticalAlignment="Center" Height="30" Width="70" DisplayMember="Name"
                                  ItemsSource="{Binding DataContext.Currencies,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" 
                                  SelectedIndex="{Binding DataContext.SelectedIndexCurrencynew,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" 
                                      IsTextEditable="False" ValidateOnTextInput="False" AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">
                        <dxmvvm:Interaction.Behaviors>
                            <dxmvvm:EventToCommand EventName="EditValueChanging" Command="{Binding DataContext.SalesQuotaCurrencyChangedCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
                        </dxmvvm:Interaction.Behaviors>
                    </dxe:ComboBoxEdit>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,5,0,0">
                    <Label Grid.Row="1" Grid.Column="0" Content="{DynamicResource CurrencyRateDate}" Width="145" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                    <dxe:DateEdit Margin="0,0,0,5" Grid.Row="2" Grid.Column="0" Height="30" Width="175" HorizontalAlignment="Left" VerticalAlignment="Center" IsTextEditable="False" ShowClearButton="False"
                                 EditValue="{Binding ExchangeRateDate}"
                                  MinValue="{Binding DataContext.CurrencyRateMinDate,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                  MaxValue="{Binding DataContext.CurrencyRateMaxDate,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}">
                        <dxmvvm:Interaction.Behaviors>
                            <dxmvvm:EventToCommand EventName="EditValueChanging" Command="{Binding DataContext.CurrencyRateDateEditValueChangingCommand,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" PassEventArgsToCommand="True"/>
                        </dxmvvm:Interaction.Behaviors>
                    </dxe:DateEdit>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Grid.Row="2" Margin="0,5,0,0">
                    <dxe:TextEdit Grid.Row="1" Grid.Column="0"  FontWeight="Bold" ShowBorder="False" IsReadOnly="True" 
                          FontSize="22" MaskType="Numeric" Mask="n2" MaskUseAsDisplayFormat="True" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="0,0,5,3">

                        <Binding Path="SalesQuotaAmountWithExchangeRate" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True">
                            <Binding.ValidationRules>
                                <Validation:UserValidation FieldName="SalesQuotaAmountWithExchangeRate" ValidationStep="UpdatedValue" />
                            </Binding.ValidationRules>
                        </Binding>

                    </dxe:TextEdit>
                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding DataContext.ToCurrency,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}" FontWeight="Bold"
                          FontSize="22" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="2,0,0,3"/>
                </StackPanel>

            </Grid>
        </DataTemplate>
    </dxwui:WinUIDialogWindow.Resources>
    <Grid Margin="2">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="40"/>
        </Grid.RowDefinitions>
        <Grid DataContext="{Binding Contact,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
            <ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Auto">
                <dxlc:LayoutControl Orientation="Vertical" Background="Transparent" Margin="-10" Width="800">
                <dxlc:LayoutGroup View="GroupBox" Header="{DynamicResource AddUserInformation}" Orientation="Vertical" Height="200" >
                    <!--<dxlc:LayoutItem Height="100" Width="100" >
                        
                    </dxlc:LayoutItem>-->

                    <Grid  >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <dxe:ImageEdit Grid.Column="0" Height="100" VerticalAlignment="Top"
                                       ShowLoadDialogOnClickMode="Never" ShowMenu="False"
                                       Source="{Binding DataContext.SelectedUser.OwnerImage,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                        <Grid Grid.Column="1">
                            <dxlc:LayoutControl Orientation="Vertical">
                                <dxlc:LayoutGroup Orientation="Horizontal">
                                    <dxlc:LayoutItem Label="{DynamicResource EditContactViewFirstName}">
                                        <dxe:TextEdit IsReadOnly="True" Text="{Binding DataContext.FirstName,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                                            <dxe:TextEdit.EditValue>
                                                <Binding Path="DataContext.FirstName" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                                                    <Binding.ValidationRules>
                                                        <Validation:UserValidation FieldName="FirstName" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
                                                    </Binding.ValidationRules>
                                                </Binding>
                                            </dxe:TextEdit.EditValue>
                                        </dxe:TextEdit>
                                    </dxlc:LayoutItem>
                                    <dxlc:LayoutItem HorizontalAlignment="Right" Margin="0 0 0 0">
                                        <Border Margin="5,0,0,0" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <ContentControl>
                                                <dxe:ImageEdit ShowLoadDialogOnClickMode="Never" ShowMenu="False" ShowBorder="False"
                                                Width="20"
                                                Height="21"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Top"
                                                Style="{DynamicResource SearchImageStyle}">
                                                    <dxe:ImageEdit.ToolTip>
                                                        <StackPanel>
                                                            <TextBlock HorizontalAlignment="Stretch" Text="{DynamicResource SearchUser}" />
                                                        </StackPanel>
                                                    </dxe:ImageEdit.ToolTip>
                                                </dxe:ImageEdit>
                                                <dxmvvm:Interaction.Behaviors>
                                                    <dxmvvm:EventToCommand
                                                    Command="{Binding DataContext.SearchUserButtonCommand,  RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                                    EventName="MouseLeftButtonUp"
                                                    PassEventArgsToCommand="True" />
                                                </dxmvvm:Interaction.Behaviors>
                                            </ContentControl>
                                        </Border>
                                    </dxlc:LayoutItem>

                                </dxlc:LayoutGroup>
                                <dxlc:LayoutGroup Orientation="Vertical">
                                    <dxlc:LayoutItem Label="{DynamicResource EditContactViewLastName}">
                                        <dxe:TextEdit IsReadOnly="True" Margin="0 0 29 0" Text="{Binding DataContext.SelectedUser.LastName,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                                        </dxe:TextEdit>
                                    </dxlc:LayoutItem>
                                </dxlc:LayoutGroup>
                                <dxlc:LayoutGroup Orientation="Horizontal">
                                    <dxlc:LayoutItem Label="{DynamicResource EditContactViewGender}">
                                        <dxe:ListBoxEdit DisplayMember="Value" ValueMember="IdLookupValue" IsEnabled="False"
                                                         ItemsSource="{Binding DataContext.UserGenderList, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ShowBorder="False" VerticalAlignment="Top">
                                            <dxe:ListBoxEdit.StyleSettings>
                                                <dxe:RadioListBoxEditStyleSettings Height="30" />
                                            </dxe:ListBoxEdit.StyleSettings>
                                            <dxe:ListBoxEdit.SelectedIndex>
                                                <Binding Path="DataContext.SelectedIndexGender" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                                                </Binding>
                                            </dxe:ListBoxEdit.SelectedIndex>
                                            <dxe:ListBoxEdit.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel Orientation="Horizontal"/>
                                                </ItemsPanelTemplate>
                                            </dxe:ListBoxEdit.ItemsPanel>
                                            <dxe:ListBoxEdit.ItemTemplate>
                                                <DataTemplate>
                                                    <DockPanel>
                                                        <Image Height="32" Width="32">
                                                            <Image.Style>
                                                                <Style>
                                                                    <Style.Triggers>
                                                                        <MultiDataTrigger>
                                                                            <MultiDataTrigger.Conditions>
                                                                                <Condition Binding="{Binding IdLookupValue}" Value="1"/>
                                                                            </MultiDataTrigger.Conditions>
                                                                            <Setter Property="Image.Source" Value="{DynamicResource ContactGenderFemaleImageStyle}"/>
                                                                        </MultiDataTrigger>
                                                                        <MultiDataTrigger>
                                                                            <MultiDataTrigger.Conditions>
                                                                                <Condition Binding="{Binding IdLookupValue}" Value="2"/>
                                                                            </MultiDataTrigger.Conditions>
                                                                            <Setter Property="Image.Source" Value="{DynamicResource ContactGenderMaleImageStyle}"/>
                                                                        </MultiDataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Image.Style>
                                                        </Image>
                                                        <TextBlock Text="{Binding Value}" Padding="0" HorizontalAlignment="Left" VerticalAlignment="Center" />
                                                    </DockPanel>
                                                </DataTemplate>
                                            </dxe:ListBoxEdit.ItemTemplate>
                                        </dxe:ListBoxEdit>
                                    </dxlc:LayoutItem>
                                    <dxlc:LayoutItem Label="{DynamicResource AddUserOffice}" Margin="0 0 29 0" VerticalAlignment="Center">
                                        <dxe:TextEdit IsReadOnly="True" Text="{Binding DataContext.SelectedUser.Company.ShortName,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                                        </dxe:TextEdit>
                                    </dxlc:LayoutItem>
                                </dxlc:LayoutGroup>
                                <dxlc:LayoutGroup Orientation="Vertical">
                                    <dxlc:LayoutItem Label="{DynamicResource EditContactViewEmail}" Margin="0 0 29 0">
                                        <Grid >
                                            <dxe:TextEdit x:Name="EmailToPerson" Grid.Column="0" IsReadOnly="True" Text="{Binding DataContext.SelectedUser.CompanyEmail,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                              MaskType="RegEx"
                                                              Mask="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}">
                                            </dxe:TextEdit>
                                        </Grid>
                                    </dxlc:LayoutItem>
                                </dxlc:LayoutGroup>
                            </dxlc:LayoutControl>
                        </Grid>
                    </Grid>


                </dxlc:LayoutGroup>

                <dxlc:LayoutGroup Header="{DynamicResource DashboardSaleSale}" View="GroupBox" Orientation="Vertical">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <!--<ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>-->
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <dxlc:LayoutItem Label="{DynamicResource EditContactViewPlant}" Grid.Row="0" VerticalAlignment="Bottom" Margin="0 0 0 5"/>
                        <dxlc:LayoutItem Grid.Row="0" Grid.Column="0" VerticalAlignment="Bottom" Margin="0 0 0 5">
                            <dxe:ComboBoxEdit  HorizontalAlignment="Right" VerticalAlignment="Stretch" Width="250"
                                                              DisplayMember="ShortName"  IsSynchronizedWithCurrentItem="True" 
                                                              ItemsSource="{Binding DataContext.ListPlants,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}}"
                                              IsTextEditable="False" ValidateOnTextInput="False" AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">
                                <dxe:ComboBoxEdit.SelectedIndex>
                                    <Binding Path="DataContext.SelectedIndexCompanyPlant" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                                        <Binding.ValidationRules>
                                            <Validation:ContactValidation FieldName="SelectedIndexCompanyPlant" ValidationStep="UpdatedValue" />
                                        </Binding.ValidationRules>
                                    </Binding>
                                </dxe:ComboBoxEdit.SelectedIndex>
                            </dxe:ComboBoxEdit>
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="{DynamicResource AddUserSalesUnit}" Grid.Row="1" VerticalAlignment="Bottom" Margin="0 0 0 5"/>
                        <dxlc:LayoutItem Grid.Row="1" Grid.Column="0" VerticalAlignment="Top" Margin="0 0 0 5">
                            <dxe:ComboBoxEdit HorizontalAlignment="Right" VerticalAlignment="Stretch" DisplayMember="Value" IsSynchronizedWithCurrentItem="True"  ValueMember="IdLookupValue"  Width="250"
                                                              ItemsSource="{Binding DataContext.SalesUnitList,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                               SelectedItem="{Binding Path=EditValue, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                              SelectedIndex="{Binding DataContext.SelectedIndexSalesUnit, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow} ,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay,ValidatesOnDataErrors=True}"
                                              IsTextEditable="False" ValidateOnTextInput="True" AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">
                                <dxe:ComboBoxEdit.ItemContainerStyle>
                                    <Style TargetType="dxe:ComboBoxEditItem">
                                        <Setter Property="IsEnabled" Value="{Binding InUse}" />
                                    </Style>
                                </dxe:ComboBoxEdit.ItemContainerStyle>
                            </dxe:ComboBoxEdit>

                        </dxlc:LayoutItem>
                        <!--Permission-->
                        <dxlc:LayoutItem Label="{DynamicResource AddUserPermission}" Grid.Column="0" Grid.Row="2" VerticalAlignment="Top" Margin="0 5 0 5"/>
                        <dxlc:LayoutItem Grid.Row="2" Grid.Column="0" Grid.RowSpan="5" VerticalAlignment="Bottom" Margin="0 20 0 0">
                            <dxe:ListBoxEdit     Height="280"                          
                                                 HorizontalAlignment="Stretch" VerticalAlignment="Top"
                                                 DisplayMember="PermissionName" Margin="10 20 0 0"
                                                 ItemsSource="{Binding DataContext.ListPermissions,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                 EditValue="{Binding DataContext.SelectedPermission, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},UpdateSourceTrigger=PropertyChanged, Mode=TwoWay,ValidatesOnDataErrors=True}"
                                                >
                                <dxe:ListBoxEdit.StyleSettings>
                                    <dxe:CheckedListBoxEditStyleSettings/>
                                </dxe:ListBoxEdit.StyleSettings>
                            </dxe:ListBoxEdit>
                        </dxlc:LayoutItem>
                        <!--Authorised User-->
                        <dxlc:LayoutItem Label="{DynamicResource AddUserAuthorizedPlants}" Grid.Column="1" Grid.Row="4" VerticalAlignment="Top" Margin="20 5 0 5"/>
                        <dxlc:LayoutItem Grid.Column="1"  Grid.Row="4" Grid.RowSpan="3" Margin="10 20 0 0">
                            <dxe:ListBoxEdit     Height="105"                         
                                                 HorizontalAlignment="Stretch" VerticalAlignment="Bottom"
                                                 DisplayMember="ShortName"
                                                 Margin="10 20 0 0"   ItemsSource="{Binding DataContext.ListAuthorizedPlants,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                 EditValue="{Binding DataContext.SelectedAuthorizedPlant, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                                <dxe:ListBoxEdit.StyleSettings>
                                    <dxe:CheckedListBoxEditStyleSettings/>
                                </dxe:ListBoxEdit.StyleSettings>
                            </dxe:ListBoxEdit>
                        </dxlc:LayoutItem>
                        
                        <!--Sales Quota-->
                        <!--<dxlc:LayoutItem Label="{DynamicResource AddUserAuthorizedPlants}" Grid.Column="3" Grid.Row="4" VerticalAlignment="Bottom" Margin="20 10 0 5"/>
                        <dxlc:LayoutItem Grid.Column="3" Grid.Row="5" Grid.RowSpan="2" Margin="10 0 0 0">
                            <dxe:ListBoxEdit    Height="150"                          HorizontalAlignment="Stretch" VerticalAlignment="Top"
                                                 DisplayMember="ShortName"
                                                 Margin="10 0 0 0"  ItemsSource="{Binding DataContext.ListAuthorizedPlants,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                                 EditValue="{Binding DataContext.SelectedAuthorizedPlant, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                                <dxe:ListBoxEdit.StyleSettings>
                                    <dxe:CheckedListBoxEditStyleSettings/>
                                </dxe:ListBoxEdit.StyleSettings>
                            </dxe:ListBoxEdit>
                        </dxlc:LayoutItem>-->
                        <dxlc:LayoutItem Label="{DynamicResource AddSalesMaxDiscount}" Grid.Row="0" Grid.Column="2" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Margin="20 0 0 5"/>
                        <dxe:SpinEdit  x:Name="Max_discount" Grid.Row="0" Grid.Column="1" Margin="0 0 0 5"
                                      VerticalAlignment="Bottom" HorizontalAlignment="Right" 
                                      Width="156" IsFloatValue="False" 
                                      Increment="1" MinValue="0" MaxValue="100"
                                      AllowRoundOutOfRangeValue="True" Mask="P0" MaskType="Numeric" MaskUseAsDisplayFormat="True"
                                      Value="{Binding DataContext.SalesMaxDiscount,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                        </dxe:SpinEdit>

                        <dxlc:LayoutItem Label="{DynamicResource AddUserSalesQuota}" Grid.Row="1" Grid.Column="2" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Margin="20 0 0 5"/>
                        <dxlc:LayoutItem Grid.Row="2" Grid.RowSpan="2" Grid.Column="1" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10 5 0 0">
                            <dx:DXTabControl Margin="10 0 0 0"
                                             
                                            
            ItemContainerStyle="{StaticResource TabItemStyle}"
            ItemHeaderTemplate="{StaticResource TabItemHeaderTemplate}"
            ItemTemplate="{StaticResource TabItemContentTemplate}"
            ItemsSource="{Binding DataContext.UserQuotasList,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,
                                UpdateSourceTrigger=PropertyChanged}" TabContentCacheMode="CacheTabsOnSelecting"
                                              SelectedIndex="{Binding DataContext.TabIndex,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow},Mode=TwoWay,
                                UpdateSourceTrigger=PropertyChanged}">
                                <dx:DXTabControl.View>
                                    <dx:TabControlScrollView HideButtonShowMode="NoWhere" NewButtonShowMode="NoWhere"/>
                                </dx:DXTabControl.View>
                            </dx:DXTabControl>
                        </dxlc:LayoutItem>
                    </Grid>
                </dxlc:LayoutGroup>
            </dxlc:LayoutControl>
            </ScrollViewer>
        </Grid>
        <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                    HorizontalAlignment="Center" 
                    Orientation="Horizontal"
                    Margin="20,5,0,0"
                    Width="290">

            <Button Content="{DynamicResource AddContactViewAccept}"
                    Command="{Binding AddUserAcceptButtonCommand}"
                    Height="30"
                    Width="100"
                    Margin="0,0,30,0"
                    VerticalAlignment="Bottom" />

            <Button Content="{DynamicResource AddContactViewCancel}"
                    Command="{Binding AddUserCancelButtonCommand}" 
                    Height="30"
                    Width="100"
                    Margin="30,0,0,0"
                    VerticalAlignment="Bottom"  />
        </StackPanel>




    </Grid>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</dxwui:WinUIDialogWindow>
