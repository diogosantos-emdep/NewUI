<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.Crm.Views.AddEditShippingAddressView"             
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"             
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"            
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"              
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"             
                         xmlns:local="clr-namespace:Emdep.Geos.Modules.Crm.Views"             
                         xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"              
                         xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"                                                   
                         xmlns:Validation="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"             
                         xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"             
                         xmlns:UIConverter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"              
                         mc:Ignorable="d"              
                         d:DesignHeight="450" d:DesignWidth="800"             
                         Style="{DynamicResource WinUIDialogWindowStyle}"            
                         Title="{Binding WindowHeader}"            
                         TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}">

    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding EscapeButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <dxwui:WinUIDialogWindow.Resources>
    <UIConverter:ImageUrlToByteArrayConverter x:Key="ImageUrlToByteArrayConverter" />

    </dxwui:WinUIDialogWindow.Resources>

    <Grid ShowGridLines="False">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="60"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="5"/>
            <RowDefinition Height="60"/>
            <RowDefinition >
                <RowDefinition.Style>
                    <Style TargetType="RowDefinition">
                        <Setter Property="RowDefinition.Height" Value="0" />
                        <Style.Triggers>
                            <DataTrigger Value="Visible" Binding="{Binding IsInUseVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                                <Setter Property="RowDefinition.Height" Value="40" />
                            </DataTrigger>
                            <DataTrigger Value="Collapsed" Binding="{Binding IsInUseVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                                <Setter Property="RowDefinition.Height" Value="0" />
                            </DataTrigger>
                            <DataTrigger Value="Hidden" Binding="{Binding IsInUseVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                                <Setter Property="RowDefinition.Height" Value="0" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </RowDefinition.Style>
            </RowDefinition>
            <RowDefinition Height="80"/>
           
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="80"/>
            <ColumnDefinition Width="2"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <!--Primary Address-->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2">
            <TextBlock Margin="0,0,10,0" VerticalAlignment="Top" Text="{DynamicResource ShippingAddressPrimaryAddress}" FontSize="16"></TextBlock>
            <dxe:ToggleSwitch  VerticalAlignment="Bottom" CheckedStateContent="YES" UncheckedStateContent="NO"  ContentPlacement="Inside" IsEnabled="{Binding IsReadOnlyField}"
             Height="30" Width="Auto" IsChecked="{Binding DataContext.IsPrimaryAddress,Mode=TwoWay ,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow,Mode=FindAncestor}, UpdateSourceTrigger=PropertyChanged}"   HorizontalAlignment="Left"   >
            </dxe:ToggleSwitch>
        </StackPanel>

        <!--[rdixit][GEOS2-6462][25.11.2024] Added validation point-->
        <!--Name-->
        <TextBlock Grid.Row="2" Grid.Column="0"  Text="{DynamicResource ShippingAddressName}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center"  />
        <dxe:TextEdit Grid.Row="2" Grid.Column="2" Text="{Binding Name}" VerticalContentAlignment="Center">
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.Name" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditShippingAddressValidation FieldName="Name" />
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <!--Address-->
        <TextBlock Grid.Row="4" Grid.Column="0" Text="{DynamicResource ShippingAddressAddress}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Top" />
        <dxe:TextEdit Grid.Row="4" Grid.Column="2" Text="{Binding Address}" VerticalContentAlignment="Center" ValidateOnTextInput="True" >
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.Address" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditShippingAddressValidation FieldName="Address" />
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <!--Zip Code-->
        <TextBlock Grid.Row="6" Grid.Column="0"  Text="{DynamicResource ShippingAddressZipCode}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center"  />
        <dxe:TextEdit Grid.Row="6" Grid.Column="2" Text="{Binding Zipcode}" VerticalContentAlignment="Center">
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.Zipcode" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditShippingAddressValidation FieldName="Zipcode" />
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <!--City-->
        <TextBlock Grid.Row="8" Grid.Column="0"  Text="{DynamicResource ShippingAddressCity}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center"  />
        <dxe:TextEdit Grid.Row="8" Grid.Column="2" Text="{Binding City}" VerticalContentAlignment="Center">
            <dxe:TextEdit.EditValue>
                <Binding Path="DataContext.City" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditShippingAddressValidation FieldName="City" />
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>
        </dxe:TextEdit>

        <!--Region-->
        <TextBlock Grid.Row="10" Grid.Column="0"  Text="{DynamicResource ShippingAddressRegion}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Center"  />
        <dxe:TextEdit Grid.Row="10" Grid.Column="2" Text="{Binding Region}" VerticalContentAlignment="Center">
            <!--<dxe:TextEdit.EditValue>
                <Binding Path="DataContext.Region" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditShippingAddressValidation FieldName="Region" />
                    </Binding.ValidationRules>
                </Binding>
            </dxe:TextEdit.EditValue>-->
        </dxe:TextEdit>
        
        <!--Country-->
        <!--IsReadOnly="{Binding Source={x:Static GeosApplication:GeosApplication.Instance}, Path=IsPermissionReadOnly}"-->
        <Label Content="{DynamicResource ShippingAddressCountry}" Grid.Row="12" Grid.Column="0" HorizontalAlignment="Left" />
        <dxe:ComboBoxEdit Grid.Row="12" Grid.Column="2"
                         ItemsSource="{Binding DataContext.CountryList, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}, UpdateSourceTrigger=PropertyChanged}" 
                         SelectedItem="{Binding DataContext.SelectedCountry, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow}, UpdateSourceTrigger=PropertyChanged}"                         DisplayMember="Name"
                         ValueMember="IdCountry"
                         VerticalAlignment="Top" 
                         AutoComplete="True" 
                         Height="30"
                         ImmediatePopup="True" 
                         IncrementalFiltering="True" 
                         IsTextEditable="False" 
                         ValidateOnTextInput="False"
                         HorizontalContentAlignment="Left"
                         ApplyItemTemplateToSelectedItem="True">

            <dxe:ComboBoxEdit.ItemTemplate>
                <DataTemplate>
                    <DockPanel>
                        <Image Source="{Binding CountryIconUrl, Converter={StaticResource ImageUrlToByteArrayConverter}, UpdateSourceTrigger=PropertyChanged ,ConverterParameter='image/png'}"  
                      VerticalAlignment="Center" Height="24" Width="24" Margin="2,0,0,0" />
                        <TextBlock Text="{Binding Name}" Margin="5,0,0,0" Padding="3" >
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Style.Triggers>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter Property="Foreground" Value="Gray" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </DockPanel>
                </DataTemplate>
            </dxe:ComboBoxEdit.ItemTemplate>
            <!--[rdixit][GEOS2-6462][25.11.2024]-->
            <dxe:ComboBoxEdit.SelectedIndex>
                <Binding Path="DataContext.SelectedIndexCountry" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                    <Binding.ValidationRules>
                        <Validation:AddEditShippingAddressValidation FieldName="SelectedIndexCountry" ValidationStep="UpdatedValue" />
                    </Binding.ValidationRules>
                </Binding>
            </dxe:ComboBoxEdit.SelectedIndex>
        </dxe:ComboBoxEdit>

        <!--Remark-->
        <TextBlock Grid.Row="14" Grid.Column="0" Text="{DynamicResource ShippingAddressRemark}" Style="{StaticResource TextBlock14Style}" VerticalAlignment="Top" />
        <dxe:TextEdit Grid.Row="14" Grid.Column="2"  Text="{Binding Remark}" VerticalContentAlignment="Top" TextWrapping="Wrap" 
           ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Disabled" AcceptsReturn="True"/>

        <!--InUse-->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Row="15" Grid.Column="2">
            <TextBlock Margin="0,10,10,0" VerticalAlignment="Top" Text="{DynamicResource ShippingAddressInUse}" FontSize="16"></TextBlock>
            <dxe:ToggleSwitch  VerticalAlignment="Bottom" CheckedStateContent="YES" UncheckedStateContent="NO"  ContentPlacement="Inside" IsEnabled="{Binding IsReadOnlyField}"
             Height="30" Width="Auto" IsChecked="{Binding DataContext.IsInUse,Mode=TwoWay ,RelativeSource={RelativeSource AncestorType=dxwui:WinUIDialogWindow,Mode=FindAncestor}, UpdateSourceTrigger=PropertyChanged}"   HorizontalAlignment="Left"   >
            </dxe:ToggleSwitch>
        </StackPanel>


        <Grid Grid.Row="16" ShowGridLines="False" Margin="0,30,0,0" Grid.Column="2" VerticalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button  HorizontalAlignment="Right"
                 Style="{DynamicResource Button16Style}"
                 VerticalAlignment="Top"
                 Content="{DynamicResource SCMAccept}"
                 Command="{Binding AcceptFileActionCommand}"
                 Height="30"
                 Width="100" />

            <Button Grid.Row="12" Grid.Column="2"
                                            HorizontalAlignment="Left"
                                            Style="{DynamicResource Button16Style}"
                                            VerticalAlignment="Top"
                                            Content="{DynamicResource SCMCancel}"
                                            Command="{Binding CancelButtonCommand }"
                                            Height="30"
                                            Width="100" />
        </Grid>

    </Grid>


</dxwui:WinUIDialogWindow>
