<dxwui:WinUIDialogWindow 
                        x:Class="Emdep.Geos.Modules.Crm.Views.ExportContactView"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                        xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
                        xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                        xmlns:UIConverter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                        xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" 
                        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                         xmlns:behaviors="clr-namespace:Emdep.Geos.UI.Behaviors;assembly=Emdep.Geos.UI.Common"
                        mc:Ignorable="d" 
                        d:DesignHeight="200" d:DesignWidth="500"
                        Title="{DynamicResource ExportContactViewHeader}"
                        TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}"
                        Style="{DynamicResource WinUIDialogWindowStyle}">

    <dxwui:WinUIDialogWindow.Resources>
        <UIConverter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </dxwui:WinUIDialogWindow.Resources>
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding ExportContactCancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>

    <dxmvvm:Interaction.Behaviors>
        <dxmvvm:FolderBrowserDialogService 
           
            ShowNewFolderButton="{Binding ShowNewFolderButton}" 
            RootFolder="Desktop"
            RestorePreviouslySelectedDirectory="True"/>
    </dxmvvm:Interaction.Behaviors>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
            <!--<RowDefinition Height="*"/>-->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!--<StackPanel Grid.Row="0"  Grid.ColumnSpan="2" Orientation="Vertical">
            <Label Grid.Row="0" 
               Grid.ColumnSpan="2"
               Content="Export Contacts"
               FontWeight="Bold"
               HorizontalAlignment="Left"
               VerticalAlignment="Top"
               Margin="0,-10,0,0" Style="{DynamicResource LabelTitleStyle}">
            </Label>
        </StackPanel>-->
        <Label Content="{DynamicResource ExportContactViewOutputType}" HorizontalAlignment="Left"
               VerticalAlignment="Top" Grid.Row="0" Grid.Column="0" Margin="0,5,0,0">
        </Label>
        <!--<dxe:ListBoxEdit Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Top" ShowBorder="False" Width="300" Margin="0,5,0,0" ScrollViewer.VerticalScrollBarVisibility="Hidden" >
            <dxe:ListBoxEdit.StyleSettings>
                <dxe:RadioListBoxEditStyleSettings/>
            </dxe:ListBoxEdit.StyleSettings>
            <dxe:ListBoxEdit.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"></StackPanel>
                </ItemsPanelTemplate>
            </dxe:ListBoxEdit.ItemsPanel>
            <dxe:ListBoxEditItem IsSelected="True">VCF</dxe:ListBoxEditItem>
            <dxe:ListBoxEditItem Margin="10,0,0,0">CSV</dxe:ListBoxEditItem>
        </dxe:ListBoxEdit>-->
        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
            <RadioButton Name="rbtnVcf"  Content="VCF"   IsChecked="{Binding IsVcf,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
            <RadioButton Name="rbtnCsv"  Margin="20,0,0,0" Content="CSV"  IsChecked="{Binding IsVcf,Converter={dx:NegationConverter}, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="Hidden"/>
        </StackPanel>

        <Label Content="{DynamicResource ExportContactViewCsvType}" HorizontalAlignment="Left"
               VerticalAlignment="Top" Grid.Row="1" Grid.Column="0" Margin="0,5,0,0" Visibility="{Binding  ElementName=rbtnCsv,Path=IsChecked,Converter={StaticResource BoolToVisibilityConverter}}">
        </Label>
        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Visibility="{Binding  ElementName=rbtnCsv,Path=IsChecked,Converter={StaticResource BoolToVisibilityConverter}}"  >
            <RadioButton Name="rbtnCsvSemiColon" Content=" ; " Style="{DynamicResource RadioButtonStyle}" IsChecked="{Binding IsCommaSeparated,Converter={dx:NegationConverter},Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"  />
            <RadioButton Name="rbtnCsvComma"  Content =" , "  Margin="30,0,0,0"   Style="{DynamicResource RadioButtonStyle}"   IsChecked="{Binding IsCommaSeparated, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
        </StackPanel>

        <Label Content="{DynamicResource ExportContactViewOutputPath}" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="1" Grid.Column="0" Margin="0,5,0,0">
        </Label>

        <dxe:ButtonEdit Name="FolderBrowser" Text="{Binding FilePath, UpdateSourceTrigger=PropertyChanged}" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Top" Width="300" Margin="0,5,0,0" AllowDefaultButton="False" IsReadOnly="True">
            <dxe:ButtonEdit.Buttons>
                <dxe:ButtonInfo Content="..." Command="{Binding SaveFolderCommand}"/>
            </dxe:ButtonEdit.Buttons>
        </dxe:ButtonEdit>
        <!--<Grid Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  Margin="0,0,0,0">
            <Button Content="Browse..."
               Height="30"
                HorizontalAlignment="Left"
                Margin="260,0,0,0"
                Name="button1"
                VerticalAlignment="Top"
                Width="80" 
                 />
            <TextBox
                 HorizontalAlignment="Left"
                 Margin="0,0,0,0"
                 Name="FolderPath"
                 VerticalAlignment="Top"
                 Width="250" Height="30"/>
        </Grid>-->
        <!--<dxe:TextEdit Grid.Row="2" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Top" Width="300" Margin="0,5,0,0"></dxe:TextEdit>-->


        <StackPanel Grid.Row="2" Grid.Column="1" 
                    HorizontalAlignment="Center" 
                    Orientation="Horizontal" 
                    Margin="0,5,0,0" Width="300">

            <Button Content="{DynamicResource ExportContactViewAccept}"
        		Command="{Binding ExportContactAcceptButtonCommand}"
        		Height="30"
        		Width="100"
        		Margin="0,0,30,0"
        		VerticalAlignment="Bottom" IsEnabled="{Binding ElementName=FolderBrowser,Path=Text.Length}" />
            <Button Content="{DynamicResource ExportContactViewCancel}"
            	Command="{Binding ExportContactCancelButtonCommand}" 
            	Height="30"
            	Width="100"
            	Margin="30,0,0,0"
            	VerticalAlignment="Bottom"  />

        </StackPanel>

    </Grid>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="KeyDown">
            <behaviors:InvokeDelegateCommandAction Command="{Binding CommandTextInput}" CommandParameter="{Binding Path=InvokeParameter, RelativeSource={RelativeSource Self}}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</dxwui:WinUIDialogWindow>
