<UserControl x:Class="Emdep.Geos.Modules.APM.Views.VisibilityPerBUView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Emdep.Geos.Modules.APM.Views"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:dxn="http://schemas.devexpress.com/winfx/2008/xaml/navbar"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
             xmlns:GeosApplication="clr-namespace:Emdep.Geos.UI.Common;assembly=Emdep.Geos.UI.Common"
             xmlns:ViewModel="clr-namespace:Emdep.Geos.Modules.APM.ViewModels"
             xmlns:Converters="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
             xmlns:dxp="http://schemas.devexpress.com/winfx/2008/xaml/printing" 
             xmlns:dxci="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
             xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
             xmlns:APMCommon ="clr-namespace:Emdep.Geos.Modules.APM.CommonClasses"
             xmlns:dxre="http://schemas.devexpress.com/winfx/2008/xaml/richedit"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"  
             xmlns:core="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/documentviewer/themekeys"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"             
             xmlns:sysglb="clr-namespace:System.Globalization;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <!--[shweta.thube][GEOS2-6696]-->
    <UserControl.Resources>
        <Converters:ImageUrlToByteArrayConverter x:Key="ImageUrlToByteArrayConverter" />
        <Style x:Key="BusinessUnitImageStyle" TargetType="Image">
            <Style.Triggers>
                <DataTrigger Binding="{Binding .}" Value="Yes">
                    <Setter Property="Source" Value="/Emdep.Geos.Modules.APM;component/Assets/Images/GEye.png" />
                </DataTrigger>
                <DataTrigger Binding="{Binding .}" Value="No">
                    <Setter Property="Source" Value="/Emdep.Geos.Modules.APM;component/Assets/Images/BEye.png" />
                </DataTrigger>
            </Style.Triggers>
        </Style>


        <Style x:Key="ColumnStyle" TargetType="dxg:GridColumn">
            <Setter Property="FilterPopupMode" Value="Default"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsVertical}" Value="true">
                    <Setter Property="HeaderTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <ContentControl Content="{Binding}">
                                    <ContentControl.LayoutTransform>
                                        <RotateTransform Angle="-90"/>
                                    </ContentControl.LayoutTransform>
                                </ContentControl>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                    <!--<Setter Property="FilterEditorHeaderTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <ContentControl Content="{Binding}">
                                    <ContentControl.LayoutTransform>
                                        <RotateTransform Angle="0"/>
                                    </ContentControl.LayoutTransform>
                                </ContentControl>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>-->
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <DataTemplate x:Key="EmployeeDetailTooltipTemplate">
            <dx:MeasurePixelSnapper>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="20"/>
                        <RowDefinition Height="20"/>
                        <RowDefinition Height="20"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="20"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="135"/>
                        <ColumnDefinition Width="250"/>
                        <ColumnDefinition Width="130"/>
                        <ColumnDefinition Width="130"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <dxe:ImageEdit Width="150" Height="150" HorizontalAlignment="Left" VerticalAlignment="Top"  
                                      Grid.Row="0" Grid.RowSpan="8" Grid.Column="0" ShowMenu="False" IsReadOnly="True">
                        <dxe:ImageEdit.Style>
                            <Style TargetType="{x:Type dxe:ImageEdit}">
                                <Style.Triggers>
                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding EmployeeProperty.ProfileImagePath,Converter={StaticResource ImageUrlToByteArrayConverter},UpdateSourceTrigger=PropertyChanged ,ConverterParameter='image/png'}" Value="{x:Null}" />
                                            <Condition Binding="{Binding EmployeeProperty.Gender.IdLookupValue}" Value="1" />
                                        </MultiDataTrigger.Conditions>
                                        <Setter Property="Source" Value="{DynamicResource EmployeeDefaultImageFemale}" />
                                    </MultiDataTrigger>
                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding EmployeeProperty.ProfileImagePath,Converter={StaticResource ImageUrlToByteArrayConverter},UpdateSourceTrigger=PropertyChanged ,ConverterParameter='image/png'}" Value="{x:Null}" />
                                            <Condition Binding="{Binding EmployeeProperty.Gender.IdLookupValue}" Value="2" />
                                        </MultiDataTrigger.Conditions>
                                        <Setter Property="Source" Value="{DynamicResource EmployeeDefaultImageMale}" />
                                    </MultiDataTrigger>
                                </Style.Triggers>
                                <Setter Property="Source" Value="{Binding EmployeeProperty.ProfileImagePath,Converter={StaticResource ImageUrlToByteArrayConverter},UpdateSourceTrigger=PropertyChanged ,ConverterParameter='image/png'}" />
                            </Style>
                        </dxe:ImageEdit.Style>
                    </dxe:ImageEdit>

                    <TextBlock Grid.Row="0" Grid.Column="1" Margin="5,0,0,0" Text="Name:" FontWeight="Bold"/>
                    <!--<TextBlock Text="{Binding Row.FullName}" TextWrapping="Wrap"  Grid.Row="0" Grid.Column="2" Margin="0,0,0,0"></TextBlock>-->
                    <TextBlock Grid.Row="0" Grid.Column="2"  Margin="0,0,0,0" TextWrapping="Wrap" >
                          <Run Text="{Binding EmployeeProperty.FullName}" />
                          <!--<Run Text=""/> 
                          <Run Text="{Binding Row.LastName}" />-->
                    </TextBlock>
                    <TextBlock Grid.Row="0" Grid.Column="3"  Margin="5,0,0,0" Text="Native Name:" FontWeight="Bold"/>
                    <TextBlock Grid.Row="0" Grid.Column="4"  Margin="-8,0,0,0" Text="{Binding EmployeeProperty.NativeName}" TextWrapping="Wrap"  />
                    <TextBlock Grid.Row="1" Grid.Column="1"  Margin="5,0,0,0" Text="Job Description:" FontWeight="Bold"/>

                    <!--<Grid Grid.Column=" 2" Grid.Row="1" Grid.ColumnSpan="3">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="AUTO"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="AUTO"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock  FontWeight="Normal" Grid.Column="0">
                                                    <Hyperlink x:Name="hyperlink_Code" TargetName="_blank"                    
                                    >
                                <InlineUIContainer>
                                    <TextBlock Text="{Binding EmployeeProperty.JobCode}" />
                            </InlineUIContainer>
                            </Hyperlink>
                        </TextBlock>
                        <TextBlock   TextWrapping="Wrap" Text="{Binding EmployeeProperty.FinalJobDescription,Converter={Converters:StringConverterForJobTitle}}"  Grid.Column="2" />
                    </Grid>-->
                    <!--[shweta.thube][GEOS2-7241][27/05/2025]-->
                    <StackPanel Orientation="Horizontal"  Grid.Column=" 2" Grid.Row="1" Grid.ColumnSpan="3">
                        <ItemsControl ItemsSource="{Binding EmployeeProperty.EmployeeJobCodes}" Grid.Column ="0">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock HorizontalAlignment="Left"  VerticalAlignment="Center" FontWeight="Normal"  
                         TextWrapping="Wrap"> 
                     <Hyperlink Name="hyperlink" Style="{DynamicResource hyperlinkGridStyle}" > 
                         <Hyperlink.Inlines>
                            <TextBlock Text="{Binding }" />
                        </Hyperlink.Inlines> 
                     </Hyperlink>
                </TextBlock>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <TextBlock   TextWrapping="Wrap" Text="{Binding EmployeeProperty.EmployeeJobTitles,Converter={Converters:StringConverterForJobTitle}}" />
                    </StackPanel>


                    <TextBlock Grid.Row="2" Grid.Column="1"  Margin="5,0,0,0" Text="Hire Date:" FontWeight="Bold" />
                    <TextBlock Grid.Row="2" Grid.Column="2"  Margin="0,0,0,0" Text="{Binding EmployeeProperty.ContractSituationStartDate,Mode=TwoWay,StringFormat=d,ConverterCulture={x:Static sysglb:CultureInfo.CurrentCulture}}" />
                    <TextBlock Grid.Row="2" Grid.Column="3"  Margin="5,0,0,0" Text="Length of Service:" FontWeight="Bold" />
                    <TextBlock Grid.Row="2" Grid.Column="4"  Margin="-8,0,0,0" Text="{Binding EmployeeProperty.LengthOfService}">
                    </TextBlock>
                    <TextBlock Grid.Row="3" Grid.Column="1"  Margin="5,0,0,0" Text="Email:" FontWeight="Bold" />
                    <TextBlock Grid.Row="3" Grid.Column="2"  Grid.ColumnSpan="5" Margin="0,0,0,0" >
                            <Hyperlink Name="hyperlink1" NavigateUri="#">
                                   <Run Text="{Binding EmployeeProperty.EmployeeContactEmail}"/> 
                            <Hyperlink.Style>
                                <Style TargetType="Hyperlink">
                                    <Setter Property="Foreground" Value="{DynamicResource HyperlinkColor}"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Foreground" Value="OrangeRed" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Hyperlink.Style>
                         </Hyperlink>
                    </TextBlock>

                    <TextBlock Grid.Row="4" Grid.Column="1"  Margin="5,0,0,0" Text="Mobile Phone:" FontWeight="Bold" />
                    <TextBlock Grid.Row="4" Grid.Column="2"  Margin="0,0,0,0" Text="{Binding EmployeeProperty.EmployeeContactMobile}" />

                    <TextBlock Grid.Row="5" Grid.Column="1"  Margin="5,0,0,0" Text="Contract Situation:" FontWeight="Bold" />
                    <TextBlock Grid.Row="5" Grid.Column="2"  Margin="0,0,0,0" Text="{Binding EmployeeProperty.ContractSituation}" Grid.ColumnSpan="2" />

                </Grid>
            </dx:MeasurePixelSnapper>
        </DataTemplate>
        <Style x:Key="EmployeerowToolTipStyle">
            <Style.Setters>
                <Setter Property="ToolTipService.InitialShowDelay" Value="10"/>
                <Setter Property="ToolTipService.HasDropShadow" Value="False"/>
                <Setter Property="ToolTipService.ToolTip">
                    <Setter.Value>
                        <ContentControl Content="{Binding}" ContentTemplate="{StaticResource EmployeeDetailTooltipTemplate}" Tag="Transparent" MaxWidth="1000"/>
                    </Setter.Value>
                </Setter>
            </Style.Setters>
        </Style>

        <DataTemplate x:Key="NameColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" CellToolTipBinding="{Binding}" FilterPopupMode="CheckedList" MaxWidth="300" ReadOnly="True"
               >

                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>

        <DataTemplate x:Key="OrganizationColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}"  FilterPopupMode="CheckedList" ReadOnly="True" >

                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="JobDescriptionColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" UnboundType="String" UnboundExpression="[JobDescription]"  FilterPopupMode="CheckedList" ReadOnly="True" >

                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="JDScopeColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" FilterPopupMode="CheckedList" MaxWidth="100" UnboundType="String" UnboundExpression="[Scope]" ReadOnly="True">


                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="HiddenColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                         Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                         AllowCellMerge="False"
                         FixedWidth="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).FixedWidth, RelativeSource={RelativeSource Self}}"
                         AllowBestFit="True"
                         Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                         AllowEditing="False" 
                         AllowAutoFilter="True"
                         Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self}, Mode=TwoWay}"
                         ShowInColumnChooser="False"
                         MinWidth="{Binding Width}"/>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="DynamicColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" FilterPopupMode="CheckedList">

                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:ComboBoxEdit Name="PART_Editor" MinWidth="100" ShowEditorButtons="True" ItemsSource="{Binding Data.YesNoList}"
                                                  HorizontalAlignment="Stretch" IsTextEditable="False" ApplyItemTemplateToSelectedItem="True"                                  
                                                  AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">

                                <dxe:ComboBoxEdit.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <Image Style="{StaticResource BusinessUnitImageStyle}" 
                               VerticalAlignment="Center" 
                               Height="22" Width="22" Margin="3" />
                                            <TextBlock Text="{Binding}"  Margin="5,0,0,0" Padding="3"
                                   VerticalAlignment="Center" />
                                        </DockPanel>
                                    </DataTemplate>
                                </dxe:ComboBoxEdit.ItemTemplate>
                            </dxe:ComboBoxEdit>


                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <!--<DataTemplate x:Key="ElectricTestBoardsColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" FilterPopupMode="CheckedList">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:ComboBoxEdit Name="PART_Editor" Width="100" ShowEditorButtons="True" ItemsSource="{Binding Data.YesNoList}"
                                                  HorizontalAlignment="Stretch" IsTextEditable="False" ApplyItemTemplateToSelectedItem="True"                                  
                                                  AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">

                                <dxe:ComboBoxEdit.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <Image Style="{StaticResource BusinessUnitImageStyle}" 
                               VerticalAlignment="Center" 
                               Height="22" Width="22" Margin="3" />
                                            <TextBlock Text="{Binding}"  Margin="5,0,0,0" Padding="3"
                                   VerticalAlignment="Center" />
                                        </DockPanel>
                                    </DataTemplate>
                                </dxe:ComboBoxEdit.ItemTemplate>
                            </dxe:ComboBoxEdit>


                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="EngineeringColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" FilterPopupMode="CheckedList">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:ComboBoxEdit Name="PART_Editor" Width="100" ShowEditorButtons="True" ItemsSource="{Binding Data.YesNoList}"
                                                  HorizontalAlignment="Stretch" IsTextEditable="False" ApplyItemTemplateToSelectedItem="True"                                  
                                                  AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">

                                <dxe:ComboBoxEdit.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <Image Style="{StaticResource BusinessUnitImageStyle}" 
                               VerticalAlignment="Center" 
                               Height="22" Width="22" Margin="3" />
                                            <TextBlock Text="{Binding}"  Margin="5,0,0,0" Padding="3"
                                   VerticalAlignment="Center" />
                                        </DockPanel>
                                    </DataTemplate>
                                </dxe:ComboBoxEdit.ItemTemplate>
                            </dxe:ComboBoxEdit>


                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="AssemblyColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" FilterPopupMode="CheckedList">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:ComboBoxEdit Name="PART_Editor" Width="100" ShowEditorButtons="True" ItemsSource="{Binding Data.YesNoList}"
                                                  HorizontalAlignment="Stretch" IsTextEditable="False" ApplyItemTemplateToSelectedItem="True"                                  
                                                  AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">

                                <dxe:ComboBoxEdit.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <Image Style="{StaticResource BusinessUnitImageStyle}" 
                               VerticalAlignment="Center" 
                               Height="22" Width="22" Margin="3" />
                                            <TextBlock Text="{Binding}"  Margin="5,0,0,0" Padding="3"
                                   VerticalAlignment="Center" />
                                        </DockPanel>
                                    </DataTemplate>
                                </dxe:ComboBoxEdit.ItemTemplate>
                            </dxe:ComboBoxEdit>


                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>
        <DataTemplate x:Key="AdvancedColumnTemplate">
            <ContentControl>
                <dxg:GridColumn FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).ColumnFieldName, RelativeSource={RelativeSource Self}}"
                                Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).HeaderText, RelativeSource={RelativeSource Self}}"
                                Width="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Width, RelativeSource={RelativeSource Self}}"
                                Visible="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Visible, RelativeSource={RelativeSource Self},Mode=TwoWay}"                                
                                Style="{StaticResource ColumnStyle}" MinWidth="100" FilterPopupMode="CheckedList">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <dxe:ComboBoxEdit Name="PART_Editor" Width="100" ShowEditorButtons="True" ItemsSource="{Binding Data.YesNoList}"
                                                  HorizontalAlignment="Stretch" IsTextEditable="False" ApplyItemTemplateToSelectedItem="True"                                  
                                                  AutoComplete="True" ImmediatePopup="True" IncrementalFiltering="True">

                                <dxe:ComboBoxEdit.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel>
                                            <Image Style="{StaticResource BusinessUnitImageStyle}" 
                               VerticalAlignment="Center" 
                               Height="22" Width="22" Margin="3" />
                                            <TextBlock Text="{Binding}"  Margin="5,0,0,0" Padding="3"
                                   VerticalAlignment="Center" />
                                        </DockPanel>
                                    </DataTemplate>
                                </dxe:ComboBoxEdit.ItemTemplate>
                            </dxe:ComboBoxEdit>


                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </ContentControl>
        </DataTemplate>-->


        <Style x:Key="PrintColumnHeaderStyle" TargetType="dxe:TextEdit"  BasedOn="{StaticResource {dxgt:TableViewThemeKey ResourceKey=DefaultPrintHeaderStyle}}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=Column.DataContext.IsVertical}" Value="True">
                    <Setter Property="dxp:ExportSettings.TargetType" Value="Image"/>
                    <Setter Property="Height" Value="150"/>
                    <Setter Property="DisplayTemplate">
                        <Setter.Value>
                            <ControlTemplate>
                                <dxe:TextEdit Name="PART_Editor" HorizontalAlignment="Left" Text="{Binding Path=Column.Header}" IsPrintingMode="True">
                                    <dxe:TextEdit.LayoutTransform>
                                        <RotateTransform Angle="-90"/>
                                    </dxe:TextEdit.LayoutTransform>
                                </dxe:TextEdit>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <UIHelper:VisibilityPerBUColumnTemplateSelector x:Key="ColumnTemplateSelector"                                                                                                                                                  
                                                   NameTemplate="{StaticResource NameColumnTemplate }"                                                    
                                                   JobDescriptionTemplate="{StaticResource JobDescriptionColumnTemplate}"
                                                   OrganizationTemplate="{StaticResource OrganizationColumnTemplate }"  
                                                   JDScopeTemplate="{StaticResource JDScopeColumnTemplate }"  
                                                   DynamicTemplate="{StaticResource DynamicColumnTemplate }"
                                                   HiddenTemplate="{StaticResource HiddenColumnTemplate }"
                                                  
                                                   />

        <!--AdvancedTemplate="{StaticResource AdvancedColumnTemplate }"
 AssemblyTemplate="{StaticResource AssemblyColumnTemplate }"
 EngineeringTemplate="{StaticResource EngineeringColumnTemplate }"
 ElectricTestBoardsTemplate="{StaticResource ElectricTestBoardsColumnTemplate }"-->


        <DataTemplate x:Key="BandTemplate">
            <ContentControl>
                <dxg:GridControlBand UIHelper:NameBinder.Name="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).BandName, RelativeSource={RelativeSource Self}}" 
                                    Header="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).BandHeader, RelativeSource={RelativeSource Self}}" 
                                    Fixed="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).FixedStyle, RelativeSource={RelativeSource Self}}" 
                                    OverlayHeaderByChildren="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).OverlayHeaderByChildren, RelativeSource={RelativeSource Self}}" 
                                    HorizontalHeaderContentAlignment="Center"
                                    ColumnsSource="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Columns, RelativeSource={RelativeSource Self}}"
                                    ColumnGeneratorTemplateSelector="{StaticResource ColumnTemplateSelector}"                                                                                          
                                    />



            </ContentControl>
        </DataTemplate>


        <DataTemplate x:Key="SummaryTemplate">
            <ContentControl>
                <dxg:GridSummaryItem FieldName="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).FieldName, RelativeSource={RelativeSource Self}}"
                                     SummaryType="{Binding Path=(dxci:DependencyObjectExtensions.DataContext).Type, RelativeSource={RelativeSource Self}}"
                                     DisplayFormat= "{Binding Path=(dxci:DependencyObjectExtensions.DataContext).DisplayFormat, RelativeSource={RelativeSource Self}}" />
            </ContentControl>
        </DataTemplate>
    </UserControl.Resources>

    <Grid ShowGridLines="False" >
        <Grid.RowDefinitions>
            <RowDefinition Height="70"/>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>


        <Grid Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Label Content="{DynamicResource APMVisibiltyPerBUViewHeader}" Style="{StaticResource LabelTitleStyle}" 
                   Grid.Row="0"
                   VerticalAlignment="Center"/>

            <Grid Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right">
                <Grid HorizontalAlignment="Right" Width="Auto" Height="45" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="45"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Grid.Row="0" Text="{DynamicResource OrganizationLabel}"  FontWeight="Bold" Margin="10,2,5,0"  HorizontalAlignment="Right" Height="25" />

                    <dxe:ComboBoxEdit x:Name="LocationEditor"  Grid.Column="1"  DisplayMember="Alias"   Width="150" Grid.Row="0" AutoComplete="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                       ItemsSource="{Binding Source={x:Static APMCommon:APMCommon.Instance}, Path=LocationList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                       EditValue="{Binding SelectedOrganization,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                Style="{DynamicResource ComboBoxEditStyle}"
                        Margin="5,0,5,0" AllowUpdateTwoWayBoundPropertiesOnSynchronization="False" 
                           Height="30" ImmediatePopup="True" IncrementalFiltering="True"
                         >
                        <dxe:ComboBoxEdit.SelectedItem>
                            <Binding Path="SelectedOrganization" 
                 Mode="TwoWay" 
                 UpdateSourceTrigger="PropertyChanged" 
                 ValidatesOnDataErrors="True" 
                 >
                            </Binding>
                        </dxe:ComboBoxEdit.SelectedItem>
                        <dxmvvm:Interaction.Triggers>
                            <dxmvvm:EventToCommand EventName="PopupClosed"
                                               Command="{Binding DataContext.LocationListClosedCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                               PassEventArgsToCommand="True"/>
                        </dxmvvm:Interaction.Triggers>
                    </dxe:ComboBoxEdit>

                    <!-- Refresh Button -->
                    <Button Content=" " Grid.Row="0" Grid.Column="3" Height="40" Width="40" HorizontalAlignment="Right"
                            Command="{Binding RefreshButtonCommand}" CommandParameter="{Binding ElementName=rootGridControl}" Margin="0,0,5,5">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonRefresh}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{ DynamicResource APMRefreshButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                    <!-- Print Button -->
                    <Button Content=" " Grid.Row="0" Grid.Column="4" Height="40" Width="40" HorizontalAlignment="Right"
                            Command="{Binding PrintButtonCommand}" CommandParameter="{Binding ElementName=ItemListTableView}" Margin="0,0,5,5">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonPrint}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{DynamicResource APMPrinterButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                    <!-- Export to Excel -->
                    <Button Content=" " Grid.Row="0" Grid.Column="5" Height="40" Width="40" HorizontalAlignment="Right"
                            Command="{Binding ExportButtonCommand}" CommandParameter="{Binding ElementName=ItemListTableView}" Margin="0,0,5,5">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonExportToExcel}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{DynamicResource APMExcelExportButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                    <!--Save Button-->
                    <Button Content=" " Height="40" Width="40" Grid.Row="0" Grid.Column="6" Command="{Binding UpdateRowsVisibilityPerBUGridCommand}" CommandParameter="{Binding ElementName=ItemListTableView}" HorizontalAlignment="Right" Margin="0,0,5,5" 
                        IsEnabled="{Binding Path=(UIHelper:VisibilityPerBUViewMultipleCellEditHelper.IsValueChanged), ElementName=ItemListTableView}">
                        <Button.ToolTip>
                            <TextBlock Text="{DynamicResource ButtonSave}"/>
                        </Button.ToolTip>
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <Image Style="{ DynamicResource SaveButtonImageStyle}"  Height="24" Width="24" Margin="-10"/>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                </Grid>
            </Grid>
        </Grid>

        <dxdo:DockLayoutManager Name="dockManager1" Grid.Row="1">

            <dxdo:LayoutGroup x:Name="rootMainGroup" Orientation="Horizontal">
                <dxdo:LayoutPanel x:Name="documentGroup1" ShowCaption="False" ShowCloseButton="False">
                    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
                        <dxg:GridControl x:Name="rootGridControl"
                                 FilterString="{Binding MyFilterString,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                             ItemsSource="{Binding DataTable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                             ScrollViewer.HorizontalScrollBarVisibility="Auto"
                             BandsSource="{Binding DataContext.Bands,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=UserControl}}"
                             BandGeneratorTemplate="{StaticResource BandTemplate}"
                             TotalSummarySource="{Binding TotalSummary}"
                             TotalSummaryGeneratorTemplate="{StaticResource SummaryTemplate}"
                             ImplyNullLikeEmptyStringWhenFiltering="True"
                             SelectionMode="Cell">

                            <dxg:GridControl.View>
                                <dxg:TableView x:Name="ItemListTableView"
                                 ShowSearchPanelMode="Always"
                                 NavigationStyle="Cell"
                                 ShowTotalSummary="True"
                                 IsTotalSummaryMenuEnabled ="False"
                                 ShowHorizontalLines="True"
                                 AllowPerPixelScrolling="True"
                                 AllowEditing="True"
                                 AllowGrouping="True"
                                 ShowGroupPanel="False"
                                 AllowColumnMoving="True"
                                 AutoMoveRowFocus="False"
                                 AllowScrollAnimation="True"
                                 ShowColumnHeaders="True"
                                 ShowVerticalLines="True"
                                 ShowIndicator="True"
                                 AllowResizing="False"
                                 AllowConditionalFormattingMenu="False"
                                 HorizontalScrollbarVisibility="Auto"
                                 VerticalScrollbarVisibility="Auto"
                                 HorizontalContentAlignment="Center"                          
                                 RowMinHeight="25"
                                 AllowSorting="True"
                                 AllowScrollHeaders="False"
                                 AllowBestFit="False"
                                 PrintColumnHeaderStyle="{StaticResource PrintColumnHeaderStyle}"
                                 UIHelper:VisibilityPerBUViewMultipleCellEditHelper.IsEnabled="True"
                                 CellToolTipTemplate="{StaticResource EmployeeDetailTooltipTemplate}"
                                 ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly"
                                                IsColumnChooserVisible="{Binding IsVisibilityPerBUColumnChooserVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"           
                                 SearchPanelHorizontalAlignment="Stretch"
                                 ShowFilterPopup="{DXEvent Handler='@args.PopupBaseEdit.PopupWidth=200'}"                                                                                                                                                                                                                                                                                                                        
                                       >
                                    <dxg:TableView.Resources>
                                        <DataTemplate x:Key="ActionsViewCustomPrintHeaderTemplate">
                                            <Grid Width="{Binding UsablePageWidth}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="50" />
                                                    <ColumnDefinition Width="130" />
                                                </Grid.ColumnDefinitions>
                                                <dxe:TextEdit Text=" " Width="{Binding UsablePageWidth}" Grid.ColumnSpan="3" IsPrintingMode="True" Background="#333E5E" HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch" Padding="12" Foreground="#FFFFFFFF" Style="{DynamicResource TextEdit20Style}" FontWeight="Bold" Height="50" />
                                                <dxe:TextEdit Text="Visibility per BU List" IsPrintingMode="True" HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch" Padding="12" Foreground="#FFFFFFFF" Style="{DynamicResource TextEdit20Style}" FontWeight="Bold" />

                                            </Grid>
                                        </DataTemplate>

                                        <DataTemplate x:Key="ActionsViewCustomPrintFooterTemplate">
                                            <dxe:TextEdit HorizontalContentAlignment="Center"
                                  Width="{Binding Path=UsablePageWidth, Mode=OneWay}"
                                  dxp:ExportSettings.TargetType="PageNumber"
                                  dxp:PageNumberExportSettings.Kind="NumberOfTotal"
                                  dxp:PageNumberExportSettings.Format="Page {0} of {1}"/>
                                        </DataTemplate>


                                    </dxg:TableView.Resources>
                                    <dxmvvm:Interaction.Behaviors>

                                        <dxmvvm:EventToCommand EventName="ShowFilterPopup"
                                                       Command="{Binding JobDescriptionShowFilterPopup}"
                                                       PassEventArgsToCommand="True"/>


                                        <dxmvvm:EventToCommand EventName="Loaded" Command="{Binding VisibilityPerBUGridControlLoadedCommand}" PassEventArgsToCommand="True" CommandParameter="{Binding ElementName=rootGridControl}" />

                                        <dxmvvm:EventToCommand EventName="ShownColumnChooser" Command="{Binding VisibilityPerBUItemListTableViewLoadedCommand}"                                                                                    
                        PassEventArgsToCommand="True" CommandParameter="{Binding ElementName=ItemListTableView}" />

                                        <dxmvvm:EventToCommand EventName="Unloaded" Command="{Binding VisibilityPerBUGridControlUnloadedCommand}"                                            
                        PassEventArgsToCommand="True" CommandParameter="{Binding ElementName=rootGridControl}" />

                                        <dxmvvm:EventToCommand SourceObject="{Binding ElementName=ActionPlansTableView, Path=FormatConditions}" EventName="CollectionChanged"                                                                                                    
                        Command="{Binding VisibilityPerBUGridControlUnloadedCommand}" CommandParameter="{Binding ElementName=rootGridControl}"/>

                                    </dxmvvm:Interaction.Behaviors>
                                </dxg:TableView>
                            </dxg:GridControl.View>
                        </dxg:GridControl>
                    </Grid>
                </dxdo:LayoutPanel>
            </dxdo:LayoutGroup>
        </dxdo:DockLayoutManager>

    </Grid>

</UserControl>
