<dxwui:WinUIDialogWindow x:Class="Emdep.Geos.Modules.APM.Views.AddEditTaskView"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Emdep.Geos.Modules.APM.Views"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" 
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
             xmlns:dxci="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"  
             xmlns:APMCommon ="clr-namespace:Emdep.Geos.Modules.APM.CommonClasses"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:ViewModels="clr-namespace:Emdep.Geos.Modules.APM.ViewModels"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:APMApplication="clr-namespace:Emdep.Geos.Modules.APM.CommonClasses"
             xmlns:Validation ="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations" 
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:UIConverter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             xmlns:dxnav="http://schemas.devexpress.com/winfx/2008/xaml/navigation"
             xmlns:Converters="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
             mc:Ignorable="d" Title="{Binding WindowHeader,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"         
             TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}" 
             Style="{DynamicResource WinUIDialogWindowStyle}" >
    <!--[Shweta.Thube][GEOS2-5979]-->
    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding CancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    <dxwui:WinUIDialogWindow.Resources>
      
        <!--[GEOS2-6496][27.09.2024][rdixit]-->
        <Style x:Key="PriorityImageStyle" TargetType="Image">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IdLookupValue}" Value="1985">
                    <Setter Property="Source" Value="/Emdep.Geos.Modules.APM;component/Assets/Images/LowPriority.png" />
                </DataTrigger>
                <DataTrigger Binding="{Binding IdLookupValue}" Value="1984">
                    <Setter Property="Source" Value="/Emdep.Geos.Modules.APM;component/Assets/Images/MediumPriority.png" />
                </DataTrigger>
                <DataTrigger Binding="{Binding IdLookupValue}" Value="1983">
                    <Setter Property="Source" Value="/Emdep.Geos.Modules.APM;component/Assets/Images/HighPriority.png" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <!--[shweta.thube] [GEOS2-9870][19-11-2025]-->
        <Style x:Key="CustomerPanelTileItemStyle" TargetType="{x:Type dxnav:TileBarItem}">
            <Setter Property="Foreground" Value="{Binding BackColor,Converter={Converters:ForegroundColorConverter}}"/>
            <Setter Property="BorderBrush" Value="#FFD6D6D6"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="{Binding BackColor}"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Height" Value="{Binding Height}"/>
            <Setter Property="Width" Value="{Binding Width}"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="SelectionPadding" Value="0" />
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Grid>
                            <TextBlock HorizontalAlignment="Center" Text="{Binding Caption}" Margin="5,0,5,0">

                            </TextBlock>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="BorderBrush" Value="{DynamicResource TileBarItemColorStyle}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <ControlTemplate x:Key="popupContentCustomerTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="300"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <dxnav:TileBar Grid.Row="0" Grid.Column="1"
                SelectedItem="{Binding SelectedRegion}"
                Orientation="Horizontal"
              HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"
                ItemSpacing="5"
                ItemsSource="{Binding RegionList}"
                ItemContainerStyle="{StaticResource CustomerPanelTileItemStyle}"
     
                Focusable="True">

                    <dxmvvm:Interaction.Behaviors>
                        <dxmvvm:EventToCommand Command="{Binding DataContext.SelectedRegionCommand,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}" EventName="SelectionChanged" PassEventArgsToCommand="True"
                                />
                    </dxmvvm:Interaction.Behaviors>
                </dxnav:TileBar>

                <!--[nastpute][12-02-2025][GEOS2-6911]-->
                <dxe:TextEdit Width="200" Grid.Row="0" Grid.Column="0"  Margin="10,5,10,0" HorizontalAlignment="Left" Text="{Binding DataContext.SearchCustomer, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType=dxlc:GroupBox}}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="TextChanged">
                            <i:InvokeCommandAction Command="{Binding SearchCustomerCommand }" CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType={x:Type dxe:TextEdit}}}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </dxe:TextEdit>

                <dxg:GridControl  Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,5,0,0" x:Name="PART_GridControl" AutoExpandAllGroups="True"  >
                    <dxg:GridControl.Columns>
                        <!--[pallavi.kale][GEOS2-7215]-->
                        <dxg:GridColumn FieldName="Group" Header="{DynamicResource APMActionPlansCustomerHeader}">
                            <dxg:GridColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding RowData.Row.Group}" />
                                </DataTemplate>
                            </dxg:GridColumn.CellTemplate>
                        </dxg:GridColumn>
                        <dxg:GridColumn FieldName="Site" Header="{DynamicResource APMActionPlansSiteHeader}">
                            <dxg:GridColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding RowData.Row.Site}" />
                                </DataTemplate>
                            </dxg:GridColumn.CellTemplate>
                        </dxg:GridColumn>
                    </dxg:GridControl.Columns>

                    <dxg:GridControl.View>
                        <dxg:TableView Name="View"
						   ShowGroupedColumns="True"
						   AutoWidth="True"
						   AllowPerPixelScrolling="True"
						   SearchPanelAllowFilter="True"
						   ScrollAnimationDuration="0"
						   ShowAutoFilterRow="True"
						   ShowTotalSummary="True"
                        IsSynchronizedWithCurrentItem="False"
                        ShowGroupPanel="False"
						   SearchString ="{Binding SearchCustomer}">
                            <dxg:TableView.RowStyle>
                                <Style TargetType="{x:Type dxg:RowControl}">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding Row.IsInActive}" Value="True" />
                                            </MultiDataTrigger.Conditions>
                                            <MultiDataTrigger.Setters>
                                                <Setter Property="Foreground" Value="Gray" />
                                                <Setter Property="IsEnabled" Value="False" />
                                            </MultiDataTrigger.Setters>
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </dxg:TableView.RowStyle>
                        </dxg:TableView>
                    </dxg:GridControl.View>
                </dxg:GridControl>
            </Grid>
        </ControlTemplate>
        <UIConverter:ImageUrlToByteArrayConverter x:Key="ImageUrlToByteArrayConverter" />
        <UIConverter:DelegatedToImageURLConverter x:Key="DelegatedToImageURLConverter" />
        <ControlTemplate x:Key="popupContentTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <!--<RowDefinition Height="5"/>
                    <RowDefinition Height="Auto"/>-->
                </Grid.RowDefinitions>
                <dxg:GridControl Grid.Row="0" x:Name="PART_GridControl" AutoExpandAllGroups="True"  dx:DXSerializer.Enabled="True">
                    <dxg:GridControl.Columns>
                        <dxg:GridColumn Header=" " FieldName="OwnerImage">
                            <dxg:GridColumn.CellTemplate>
                                <DataTemplate>
                                    <Image  
                          Source="{Binding RowData.Row.EmployeeCodeWithIdGender, Converter={StaticResource DelegatedToImageURLConverter}, UpdateSourceTrigger=PropertyChanged ,ConverterParameter='image/png'}" 
                            VerticalAlignment="Center" Height="60" Width="Auto" Margin="2,0,0,0" >
                                        <Image.ToolTip>
                                            <Image  Source="{Binding RowData.Row.EmployeeCodeWithIdGender, Converter={StaticResource DelegatedToImageURLConverter}, UpdateSourceTrigger=PropertyChanged ,ConverterParameter='image/png'}"                             
                                       VerticalAlignment="Center" Height="200" Width="300" Margin="2,0,0,0" />

                                        </Image.ToolTip>
                                    </Image>
                                </DataTemplate>
                            </dxg:GridColumn.CellTemplate>

                        </dxg:GridColumn>
                        <dxg:GridColumn FieldName="EmployeeCode" />
                        <dxg:GridColumn FieldName="FirstName" />
                        <dxg:GridColumn FieldName="LastName" />
                        <dxg:GridColumn FieldName="JobCode" />
                        <dxg:GridColumn FieldName="Organization" />
                        <dxg:GridColumn FieldName="UserName" />
                    </dxg:GridControl.Columns>
                    <dxg:GridControl.View>
                        <dxg:TableView Name="View"
                                       ShowGroupedColumns="True"
                                       AutoWidth="True"
                                       AllowPerPixelScrolling="True"
                                       SearchPanelAllowFilter="False"
                                       ScrollAnimationDuration="0"
                                       ShowAutoFilterRow="True"
                                       ShowTotalSummary="True"
                                       IsSynchronizedWithCurrentItem="False" >

                            <dxg:TableView.RowStyle>
                                <Style TargetType="{x:Type dxg:RowControl}">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>

                                                <Condition Binding="{Binding Row.IsInActive}" Value="True" />
                                            </MultiDataTrigger.Conditions>

                                            <MultiDataTrigger.Setters>
                                                <Setter Property="Foreground" Value="Gray" />
                                                <Setter Property="IsEnabled" Value="False" />
                                            </MultiDataTrigger.Setters>
                                        </MultiDataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </dxg:TableView.RowStyle>

                        </dxg:TableView>
                    </dxg:GridControl.View>
                    <dxg:GridControl.Style>
                        <Style TargetType="dxg:GridControl">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding VisibleRowCount, RelativeSource={RelativeSource Self}}" Value="0">
                                    <Setter Property="ShowLoadingPanel" Value="True" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </dxg:GridControl.Style>
                </dxg:GridControl>
            </Grid>
        </ControlTemplate>
    </dxwui:WinUIDialogWindow.Resources>

    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Center" >
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <ScrollViewer Grid.Row="0" ScrollViewer.VerticalScrollBarVisibility="Auto">
		
        <Grid  Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition>
                        <RowDefinition.Style>
                            <Style TargetType="RowDefinition">
                                <Setter Property="RowDefinition.Height" Value="Auto" />
                                <Style.Triggers>
                                    <DataTrigger Value="Collapsed" Binding="{Binding IsStatusFieldsVisible}">
                                        <Setter Property="RowDefinition.Height" Value="0" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </RowDefinition.Style>
                    </RowDefinition>

                    <RowDefinition>
                        <RowDefinition.Style>
                            <Style TargetType="RowDefinition">
                                <Setter Property="RowDefinition.Height" Value="Auto" />
                                <Style.Triggers>
                                    <DataTrigger Value="Collapsed" Binding="{Binding IsStatusFieldsVisible}">
                                        <Setter Property="RowDefinition.Height" Value="0" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </RowDefinition.Style>
                    </RowDefinition>
                    <RowDefinition>
                        <RowDefinition.Style>
                            <Style TargetType="RowDefinition">
                                <Setter Property="RowDefinition.Height" Value="Auto" />
                                <Style.Triggers>
                                    <DataTrigger Value="Collapsed" Binding="{Binding IsStatusFieldsVisible}">
                                        <Setter Property="RowDefinition.Height" Value="0" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </RowDefinition.Style>
                    </RowDefinition>
                    <RowDefinition>
                        <RowDefinition.Style>
                            <Style TargetType="RowDefinition">
                                <Setter Property="RowDefinition.Height" Value="Auto" />
                                <Style.Triggers>
                                    <DataTrigger Value="Collapsed" Binding="{Binding IsStatusFieldsVisible}">
                                        <Setter Property="RowDefinition.Height" Value="0" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </RowDefinition.Style>
                    </RowDefinition>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
               
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="24"/>
					<ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Grid.Row="0" Content="{DynamicResource AddActionPlan}" Margin="5" Width="180" Height="30" FontSize="16" ></Label>
                <dxe:ComboBoxEdit Name="Cbeplant"  Grid.Row="0" Grid.Column="1" Width="300" Height="30"
                                   VerticalAlignment="Center" HorizontalAlignment="Left" IsTextEditable="False" AutoComplete="True"                           
                       ItemsSource="{Binding Source={x:Static APMCommon:APMCommon.Instance}, Path=ActionPlanList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                    SelectedItem="{Binding SelectedActionPlans,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                 DisplayMember="Code" ShowError="False" ShowErrorToolTip="False" 
                                   >
                    <!--<dxe:ComboBoxEdit.Style>
             <Style TargetType="{x:Type dxe:ComboBoxEdit}">
                 <Setter Property="IsEnabled" Value="True"/>
                 <Style.Triggers>
                     <DataTrigger Binding="{Binding IsAddEditActionPlan}" Value="True">
                         <Setter Property="IsEnabled" Value="False"/>
                     </DataTrigger>
                 </Style.Triggers>
             </Style>
         </dxe:ComboBoxEdit.Style>-->

                    <!--<dxmvvm:Interaction.Triggers>
             <dxmvvm:EventToCommand EventName="PopupClosed"
                                            Command="{Binding DataContext.PlantOwnerPopupClosedCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                            PassEventArgsToCommand="True"/>
         </dxmvvm:Interaction.Triggers>-->

                </dxe:ComboBoxEdit>
                <Label Grid.Column="0" Grid.Row="1"  Content="{DynamicResource AddTitle}" Margin="5" Width="180" Height="30" FontSize="16" ></Label>
                <dxe:TextEdit Text="{Binding DepartmentAbbreviation, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="0,0,0,0" Grid.Row="1" Grid.Column="1" Width="300" Height="30" VerticalAlignment="Center" HorizontalAlignment="Left" 
                   AllowNullInput="True" InvalidValueBehavior="AllowLeaveEditor" 
                    IsReadOnly="{Binding IsReadOnlyField,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">

                </dxe:TextEdit>
                <dxe:TextEdit  Grid.Row="1" Grid.Column="1" Width="300" Height="30" VerticalAlignment="Center" HorizontalAlignment="Left"           >
                    <dxe:TextEdit.Text>
                        <Binding  Path="Title" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" ValidatesOnNotifyDataErrors="True" ValidatesOnDataErrors="True" >
                            <Binding.ValidationRules>
                                <Validation:LocationValidation FieldName="Title" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </dxe:TextEdit.Text>
                </dxe:TextEdit>

                <!--Description-->
                <Label Grid.Column="0" Grid.Row="2" Content="{DynamicResource AddDescription}" Margin="5" Width="180" Height="30" FontSize="16" ></Label>
                <dxe:TextEdit Grid.Row="2" Grid.Column="1"
           NullText="{DynamicResource AddEditActionPlanAttachmentsDescriptionHeader}" 
           VerticalContentAlignment="Top"
           TextWrapping="Wrap" Width="300" Height="60"
           ScrollViewer.VerticalScrollBarVisibility="Auto" 
           ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                       Text="{Binding Description,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
           AcceptsReturn="True">

                </dxe:TextEdit>

                <Label Grid.Column="0" Grid.Row="3" Content="{DynamicResource AddLocation}" Margin="5" Width="180" Height="30" FontSize="16" ></Label>
                <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" 
               Grid.Row="3" Grid.Column="1" Width="300" Height="30" AutoComplete="True"
               VerticalAlignment="Center" HorizontalAlignment="Left" ApplyItemTemplateToSelectedItem="True"
               ItemsSource="{Binding Source={x:Static APMCommon:APMCommon.Instance}, Path=LocationList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
               DisplayMember="Alias" ShowError="True" ShowErrorToolTip="True" IsTextEditable="False">

                    <dxe:ComboBoxEdit.SelectedItem>
                        <Binding Path="SelectedLocation" 
              Mode="TwoWay" 
              UpdateSourceTrigger="PropertyChanged" 
              ValidatesOnDataErrors="True" 
              >
                            <Binding.ValidationRules>
                                <Validation:AddEditTaskValidation FieldName="SelectedLocation" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </dxe:ComboBoxEdit.SelectedItem>
                    <dxe:ComboBoxEdit.ItemTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <Image Source="{Binding CountryIconUrl, Converter={StaticResource ImageUrlToByteArrayConverter}, UpdateSourceTrigger=PropertyChanged ,ConverterParameter='image/png'}"  
                                     VerticalAlignment="Center" Height="30" Width="30" Margin="5,0,0,0" />
                                <TextBlock Margin="5,0,0,0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding Alias}" />
                            </DockPanel>
                        </DataTemplate>
                    </dxe:ComboBoxEdit.ItemTemplate>
                    <dxe:ComboBoxEdit.ItemContainerStyle>
                        <Style TargetType="dxe:ComboBoxEditItem">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsStillActive}" Value="0">
                                    <Setter Property="IsEnabled" Value="False" />
                                </DataTrigger>
                            </Style.Triggers>
                            <Setter Property="IsEnabled" Value="True" />
                        </Style>
                    </dxe:ComboBoxEdit.ItemContainerStyle>
                    <dxmvvm:Interaction.Triggers>
                        <dxmvvm:EventToCommand EventName="EditValueChanged"
                                            Command="{Binding LocationListClosedCommand}" 
                                            PassEventArgsToCommand="True"/>
                    </dxmvvm:Interaction.Triggers>
                </dxe:ComboBoxEdit>

                <Label Grid.Column="0" Grid.Row="4" Content="{DynamicResource AddResponsible}" Margin="5" Width="180" Height="30" FontSize="16"></Label>

                <dxg:LookUpEdit x:Name="searchLookUpEdit1" Grid.Row="4" Grid.Column="1" Width="300" Height="30"
              PopupHeight="500"
              PopupWidth="750"
              PopupMinHeight="100"
              PopupMinWidth="100" 
              IsPopupAutoWidth="False"
              FilterCondition="StartsWith"
              FindButtonPlacement="Popup"
              FindMode="Always"
              PopupContentTemplate="{StaticResource popupContentTemplate}"                
              ItemsSource="{Binding ResponsibleList, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
              AutoPopulateColumns="False"
              DisplayMember="FullName"
              ValueMember="IdEmployee"
              ImmediatePopup="True"
              AutoComplete="True">

                    <dxg:LookUpEdit.StyleSettings>
                        <dxg:SearchLookUpEditStyleSettings />
                    </dxg:LookUpEdit.StyleSettings>

                    <dxg:LookUpEdit.SelectedItem>
                        <Binding Path="DataContext.SelectedResponsible" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
              ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                            <Binding.ValidationRules>
                                <Validation:AddEditTaskValidation FieldName="SelectedResponsible" ValidationStep="UpdatedValue"
                                                 ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </dxg:LookUpEdit.SelectedItem>

                </dxg:LookUpEdit>
                <!--[shweta.thube] [GEOS2-9870][19-11-2025]-->
                <Label Grid.Column="0" Grid.Row="5" Content="{DynamicResource APMActionPlansCustomerHeader}" Margin="5" Width="180" Height="30" FontSize="16"></Label>
                <dxg:LookUpEdit x:Name="searchLookUpEditCustomer" Grid.Column="1" Grid.Row="5"
                  PopupHeight="500" Width="300" Height="30"
                  PopupWidth="700"
                  PopupMinHeight="100"
                  PopupMinWidth="100"
                  IsPopupAutoWidth="False"
                  FilterCondition="StartsWith"
                  FindButtonPlacement="Popup"
                  FindMode="Always"
                  ItemsSource="{Binding CustomerList}"
                  PopupContentTemplate="{StaticResource popupContentCustomerTemplate}"
                  AutoPopulateColumns="False"
                  DisplayMember="GroupName"
                  ValueMember="IdSite"
                  ImmediatePopup="True"
                  AutoComplete="True"
                  IsTextEditable="False"
                 
                 NullValueButtonPlacement="EditBox"
															>
                        <!--<dxg:LookUpEdit.StyleSettings>
          <dxg:SearchTokenLookUpEditStyleSettings/>
      </dxg:LookUpEdit.StyleSettings>-->
                        <!--[GEOS2-6882][rdixit][29.01.2025]IsEnabled="{Binding DataContext.IsResponsibleEditable,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}" -->
                        <!--<dxg:LookUpEdit.StyleSettings>
										<dxg:SearchLookUpEditStyleSettings />
						</dxg:LookUpEdit.StyleSettings>-->
                        <dxg:LookUpEdit.SelectedItem>
                            <Binding Path="SelectedCustomer"
                       UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                            </Binding>
                        </dxg:LookUpEdit.SelectedItem>
                    </dxg:LookUpEdit>

                <Label Grid.Column="0" Grid.Row="6" Margin="5" Content="{DynamicResource AddStatus}" Width="180" Height="30" FontSize="16"></Label>
                <dxe:ComboBoxEdit  Style="{DynamicResource ComboBoxEditStyle}" Grid.Row="6" Grid.Column="1" Width="300" Height="30"
                                   VerticalAlignment="Center" HorizontalAlignment="Left" IsTextEditable="False" AutoComplete="True"                                  
                                 ItemsSource="{Binding StatusList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                  DisplayMember="Value" 
                                  ShowError="True" ShowErrorToolTip="True" 
                                   >
                    <dxe:ComboBoxEdit.SelectedItem>
                        <Binding Path="SelectedStatus" 
              Mode="TwoWay" 
              UpdateSourceTrigger="PropertyChanged" 
              ValidatesOnDataErrors="True" 
              >
                            <Binding.ValidationRules>
                                <Validation:AddEditTaskValidation FieldName="SelectedStatus" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </dxe:ComboBoxEdit.SelectedItem>
                    <dxe:ComboBoxEdit.ItemContainerStyle>
                        <Style TargetType="dxe:ComboBoxEditItem">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding InUse}" Value="False">
                                    <Setter Property="IsEnabled" Value="False" />
                                </DataTrigger>
                            </Style.Triggers>
                            <Setter Property="IsEnabled" Value="True" />
                        </Style>
                    </dxe:ComboBoxEdit.ItemContainerStyle>


                </dxe:ComboBoxEdit>
                <!--<Label Grid.Column="0" Grid.Row="5" Margin="5" Content="{DynamicResource AddPriority}" Width="180" Height="30" FontSize="16"></Label>
     <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Grid.Row="5" Grid.Column="1" Width="200" Height="30"                                      
                       VerticalAlignment="Center" HorizontalAlignment="Left" IsTextEditable="False" AutoComplete="True"                                                                 
                       ItemsSource="{Binding Source={x:Static APMCommon:APMCommon.Instance}, Path=PriorityList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"                                      
                       ShowError="True" ShowErrorToolTip="True" DisplayMember="Value" ApplyItemTemplateToSelectedItem="True">
         <dxe:ComboBoxEdit.SelectedItem>
             <Binding Path="SelectedPriority" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True" >
                 <Binding.ValidationRules>
                     <Validation:AddEditTaskValidation FieldName="SelectedPriority" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                 </Binding.ValidationRules>
             </Binding>
         </dxe:ComboBoxEdit.SelectedItem>
         <dxe:ComboBoxEdit.ItemTemplate>
             <DataTemplate>
                 <DockPanel>
                     <Image Style="{StaticResource PriorityImageStyle}" VerticalAlignment="Center" Height="24" Width="24" Margin="0,0,5,0" />
                     <TextBlock Text="{Binding Value}" Margin="5,0,0,0" Padding="3" />
                 </DockPanel>
             </DataTemplate>
         </dxe:ComboBoxEdit.ItemTemplate>
     </dxe:ComboBoxEdit>-->
                <!--<Label Grid.Column="0" Grid.Row="5" Margin="5" Content="{DynamicResource AddBusinessUnit}" Width="180" Height="30" FontSize="16"></Label>
     <dxe:ComboBoxEdit  Style="{DynamicResource ComboBoxEditStyle}" Grid.Row="5" Grid.Column="1" Width="200" Height="30"
                                   VerticalAlignment="Center" HorizontalAlignment="Left" IsTextEditable="False"          AutoComplete="True"                      
                                 ItemsSource="{Binding Source={x:Static APMCommon:APMCommon.Instance}, Path=BusinessUnitList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                  DisplayMember="Value"
                                ShowError="True" ShowErrorToolTip="True" 
                                   >
         <dxe:ComboBoxEdit.SelectedItem>
             <Binding Path="SelectedBusinessUnit" 
              Mode="TwoWay" 
              UpdateSourceTrigger="PropertyChanged" 
              ValidatesOnDataErrors="True" 
              >
                 <Binding.ValidationRules>
                     <Validation:AddEditTaskValidation FieldName="SelectedBusinessUnit" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                 </Binding.ValidationRules>
             </Binding>
         </dxe:ComboBoxEdit.SelectedItem>
     </dxe:ComboBoxEdit>-->

                <Label Grid.Column="0" Grid.Row="7" Margin="5" Content="{DynamicResource AddTheme}" Width="180" Height="30" FontSize="16"></Label>
                <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" 
               Grid.Row="7" Grid.Column="1" Width="300" Height="30"
               VerticalAlignment="Center" HorizontalAlignment="Left" 
               IsTextEditable="False"                                  AutoComplete="True"
               ItemsSource="{Binding Source={x:Static APMCommon:APMCommon.Instance}, Path=ThemeList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
               DisplayMember="Value" 
               ShowError="True" ShowErrorToolTip="True" >

                    <dxe:ComboBoxEdit.SelectedItem>
                        <Binding Path="SelectedTheme" 
              Mode="TwoWay" 
              UpdateSourceTrigger="PropertyChanged" 
              ValidatesOnDataErrors="True" 
              NotifyOnValidationError="True" 
             >
                            <Binding.ValidationRules>
                                <Validation:AddEditTaskValidation 
                 FieldName="SelectedTheme" 
                 ValidationStep="UpdatedValue" 
                 ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </dxe:ComboBoxEdit.SelectedItem>

                </dxe:ComboBoxEdit>

                <Label Grid.Column="0" Grid.Row="8" Margin="5" Content="{DynamicResource AddPriority}" Width="180" Height="30" FontSize="16"></Label>
                <dxe:ComboBoxEdit Style="{DynamicResource ComboBoxEditStyle}" Grid.Row="8" Grid.Column="1" Width="300" Height="30"                                      
                       VerticalAlignment="Center" HorizontalAlignment="Left" IsTextEditable="False" AutoComplete="True"                                                                 
                       ItemsSource="{Binding Source={x:Static APMCommon:APMCommon.Instance}, Path=PriorityList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"                                      
                       ShowError="True" ShowErrorToolTip="True" DisplayMember="Value" ApplyItemTemplateToSelectedItem="True">
                    <dxe:ComboBoxEdit.SelectedItem>
                        <Binding Path="SelectedPriority" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True" >
                            <Binding.ValidationRules>
                                <Validation:AddEditTaskValidation FieldName="SelectedPriority" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </dxe:ComboBoxEdit.SelectedItem>
                    <dxe:ComboBoxEdit.ItemTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <Image Style="{StaticResource PriorityImageStyle}" VerticalAlignment="Center" Height="24" Width="24" Margin="0,0,5,0" />
                                <TextBlock Text="{Binding Value}" Margin="5,0,0,0" Padding="3" />
                            </DockPanel>
                        </DataTemplate>
                    </dxe:ComboBoxEdit.ItemTemplate>
                </dxe:ComboBoxEdit>

                <Label Grid.Column="0" Grid.Row="9" Margin="5" Content="{DynamicResource AddDueDate}" Width="180" Height="30" FontSize="16"></Label>

                <dxe:DateEdit Grid.Row="9" Grid.Column="1" Width="300" Height="30" IsEnabled="{Binding IsEditable}">
                    <dxe:DateEdit.EditValue>
                        <Binding Path="DueDate"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay"
                                              ValidatesOnDataErrors="True">
                            <Binding.ValidationRules >
                                <Validation:AddEditTaskValidation FieldName="DueDate" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" ></Validation:AddEditTaskValidation>
                            </Binding.ValidationRules>
                        </Binding>
                    </dxe:DateEdit.EditValue>
                </dxe:DateEdit>

                <Label Grid.Column="0" Grid.Row="10" Margin="5" Content="{DynamicResource AddDelegatedTo}" Width="180" Height="30" FontSize="16"></Label>

                <dxg:LookUpEdit x:Name="searchLookUpEdit"  Grid.Row="10" Grid.Column="1" Width="300" Height="30"
              PopupHeight="500"
              PopupWidth="750"
              PopupMinHeight="100"
              PopupMinWidth="100"
              IsPopupAutoWidth="False"
              FilterCondition="StartsWith"
              FindButtonPlacement="Popup"
              FindMode="Always"
              PopupContentTemplate="{StaticResource popupContentTemplate}"
              ItemsSource="{Binding DelegatedToList, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
              AutoPopulateColumns="False"
              DisplayMember="FullName"
              ValueMember="IdEmployee"
              ImmediatePopup="True"
              AutoComplete="True">

                    <dxg:LookUpEdit.StyleSettings>
                        <dxg:SearchLookUpEditStyleSettings />
                    </dxg:LookUpEdit.StyleSettings>

                    <dxg:LookUpEdit.SelectedItem>
                      
                            <Binding Path="DataContext.SelectedDelegatedto" RelativeSource="{RelativeSource AncestorType=dxwui:WinUIDialogWindow}" 
ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                               
                            </Binding>
                        </dxg:LookUpEdit.SelectedItem>

                </dxg:LookUpEdit>
                <Label Grid.Column="0" Grid.Row="11" Margin="5" Content="{DynamicResource AddProgress}" Width="180" Height="30" FontSize="16"></Label>

                <DockPanel  Grid.Row="11" Grid.Column="1">
                    <dxe:TextEdit  Margin="0,0,0,0" Text="{Binding ElementName=tbeValue,Path=Value ,UpdateSourceTrigger=PropertyChanged }" IsReadOnly="True"  Width="50" Height="30" DockPanel.Dock="Right" >
                        <dxe:TextEdit.EditValue >
                            <Binding Path="Progress" Mode="TwoWay" 
              UpdateSourceTrigger="PropertyChanged" 
              ValidatesOnDataErrors="True" 
               >
                                <Binding.ValidationRules >
                                    <Validation:AddEditTaskValidation FieldName="Progress" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" ></Validation:AddEditTaskValidation>
                                </Binding.ValidationRules>
                            </Binding>
                        </dxe:TextEdit.EditValue>
                    </dxe:TextEdit>
                    <dxe:TrackBarEdit Grid.Row="3" Grid.Column="1" 
                   Margin="0,0,0,5" Height="30" Width="240" 
                   HorizontalAlignment="Left"
                   EditValueChanged="tbeValue_EditValueChanged"
                   Minimum="0" 
                   Maximum="{Binding MaxLimitOfPercentage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                   Name="tbeValue"
                   SmallStep="25" 
                   LargeStep="25" 
                   EditValue="{Binding Progress, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                   TickFrequency="25" 
                   TickPlacement="Both">
                    </dxe:TrackBarEdit>

                </DockPanel>

                <!--Task Comment-->
                <Label Grid.Column="0" Grid.Row="12" Margin="5" Content="{DynamicResource APMAddEditTaskCommentLabel}" 
   Width="180" Height="30" FontSize="16" Visibility="{Binding IsStatusFieldsVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>

                <dxe:TextEdit Grid.Row="12" Grid.Column="1"
NullText="{DynamicResource AddEditActionPlanAttachmentsCommentHeader}"
VerticalContentAlignment="Top"
TextWrapping="Wrap" Width="300" Height="60" 
ScrollViewer.VerticalScrollBarVisibility="Auto"
ScrollViewer.HorizontalScrollBarVisibility="Disabled"
		  Visibility="{Binding IsStatusFieldsVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
	 
AcceptsReturn="True">
                    <dxe:TextEdit.Text>
                        <Binding  Path="TaskStatusComment" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" ValidatesOnNotifyDataErrors="True" ValidatesOnDataErrors="True" >
                            <Binding.ValidationRules>
                                <Validation:AddEditTaskValidation FieldName="TaskStatusComment" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </dxe:TextEdit.Text>
                </dxe:TextEdit>


                <!--File-->
                <Label Grid.Column="0" Grid.Row="13" Content="{DynamicResource APMAddEditTaskFileLabel}"
   Width="180" Height="30" FontSize="16" Visibility="{Binding IsStatusFieldsVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></Label>

                <dxe:ComboBoxEdit Grid.Row="13" Grid.Column="1" IsEnabled="True"
 VerticalContentAlignment="Center" Height="30" Margin="0,5,0,5" Visibility="{Binding IsStatusFieldsVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
 ItemsSource="{Binding AttachmentObjectList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
 ScrollViewer.VerticalScrollBarVisibility="Hidden"
 DisplayMember="SavedFileName"
 HorizontalAlignment="Stretch"
 VerticalAlignment="Stretch"
 AllowDefaultButton="False" Width="300"
 AutoComplete="False"
		  EditValue="{Binding AttachmentObjectList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
 ImmediatePopup="False"
	 

 IsTextEditable="False"
 IsReadOnly="False"
                           
 Style="{DynamicResource ComboBoxEditStyle}">
                    <dxe:ComboBoxEdit.StyleSettings>
                        <dxe:TokenComboBoxStyleSettings  NewTokenPosition="Far" EnableTokenWrapping="True"  />
                    </dxe:ComboBoxEdit.StyleSettings>
                    <!--<dxe:ComboBoxEdit.SelectedItem>
	<Binding Path="ActionPlanAttachmentFile"  ValidatesOnDataErrors="True"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
		<Binding.ValidationRules>
			<Validation:AddActionPlanAttachmentValidations FieldName="ActionPlanAttachmentFile" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True"/>
		</Binding.ValidationRules>
	</Binding>
</dxe:ComboBoxEdit.SelectedItem>-->
                </dxe:ComboBoxEdit>

                <Button Grid.Row="14" Margin="0,0,0,5" Grid.Column="1" Content="{DynamicResource ChooseFile}" 
	Width="115" HorizontalAlignment="Right" Command="{Binding ChooseFileActionCommand}" Visibility="{Binding IsStatusFieldsVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>

                <!--Attachment Description-->
                <Label Grid.Column="0" Grid.Row="15" Content="{DynamicResource APMAddEditTaskDescriptionLabel}" 
   Margin="5" Width="180" Height="30" FontSize="16" Visibility="{Binding IsStatusFieldsVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"></Label>
                <dxe:TextEdit Grid.Row="15" Grid.Column="1" Visibility="{Binding IsStatusFieldsVisible,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                               IsEnabled="{Binding IsDescriptionEnabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
           NullText="{DynamicResource AddEditActionPlanAttachmentsDescriptionHeader}"
 VerticalContentAlignment="Top" Margin="0,0,0,5"
           TextWrapping="Wrap" Width="300" Height="60"
           ScrollViewer.VerticalScrollBarVisibility="Auto"
           ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                       Text="{Binding TaskStatusDescription,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
           AcceptsReturn="True">

                </dxe:TextEdit>

                <Label Grid.Column="0" Grid.Row="16" Margin="5" Content="{DynamicResource ActionPlanChildOtItemHeader}"  Visibility="{Binding OtItemFind}" Width="180" Height="30" FontSize="16"></Label>
                <DockPanel  Grid.Row="16" Grid.Column="1"  Visibility="{Binding OtItemFind}">
                    <!--<dxe:TextEdit  Margin="0,0,0,5"  Text="{Binding OtItem, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Grid.Row="3" Grid.Column="1"  Width="240" Height="30" DockPanel.Dock="Left" IsReadOnly="True" VerticalAlignment="Center" HorizontalAlignment="Left"           >
                        

                    </dxe:TextEdit>-->

                    <dxe:ButtonEdit    Margin="0,0,0,5"  Text="{Binding OTItem, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"  IsTextEditable="False" AllowDefaultButton="false" NullValueButtonPlacement="EditBox" Width="240" Height="30" DockPanel.Dock="Left" VerticalAlignment="Center" HorizontalAlignment="Left"  Grid.Row="3" Grid.Column="1"/>

                    <Button Content="{DynamicResource FindOtItem}" Grid.Column="1" Grid.Row="3"    Width="50" Height="30" DockPanel.Dock="Right"  
        FontSize="14" Margin="9,-6,-2,0" Command="{Binding FindOTItemCommand}"
                    Style="{DynamicResource Button16Style}"/>

                </DockPanel>


				<!--[Shweta.Thube][GEOS2-6912]-->
                <dxlc:LayoutGroup Grid.Column="3" Margin="0,5,0,-30"  Grid.Row="0" Grid.RowSpan="15"  VerticalAlignment="Stretch" Visibility="{Binding OtItemVisibility}" Height="{Binding Height, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
						 View="GroupBox" Width="450" dxlc:LayoutControl.AllowVerticalSizing="True"   Header="{Binding FindOTItemHeader,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"   >

                    <Grid>
                        <Grid.RowDefinitions>
							<RowDefinition Height="50"/>
							<RowDefinition Height="30"/>
							<RowDefinition Height="*"/>
							<RowDefinition Height="40"/>
						</Grid.RowDefinitions>
						<Grid Grid.Row="0" >
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="60"/>
								<ColumnDefinition Width="60"/>
								<ColumnDefinition Width="100"/>
								<ColumnDefinition Width="30"/>
								<ColumnDefinition Width="100"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							<Grid.RowDefinitions>
								<RowDefinition Height="30"/>
								<RowDefinition Height="10"/>
								<RowDefinition Height="30"/>
							</Grid.RowDefinitions>

							<Label Grid.Row="0" Grid.Column="0"  Content="{DynamicResource OtDate}"  VerticalAlignment="Top"  Height="30" FontSize="16"  ></Label>

							<Label  Grid.Row="0" Grid.Column="1"  Margin="20,0,0,0" Content="{DynamicResource APMFrom}"  VerticalAlignment="Top" Height="30"  FontSize="16" ></Label>
							<dxe:DateEdit Grid.Row="0" Grid.Column="2" Margin="5,0,0,0" Height="30" >
								<dxe:DateEdit.EditValue>
									<Binding Path="FromDate"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay"
									 ValidatesOnDataErrors="True">
										<!--<Binding.ValidationRules >
                                        <Validation:AddEditTaskValidation FieldName="DueDate" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" ></Validation:AddEditTaskValidation>
                                    </Binding.ValidationRules>-->
									</Binding>
								</dxe:DateEdit.EditValue>
							</dxe:DateEdit>

							<Label  Grid.Row="0" Grid.Column="3"  Content="{DynamicResource APMTo}" Margin="10,0,0,0" VerticalAlignment="Top" Height="30"  FontSize="16" ></Label>
							<dxe:DateEdit Grid.Row="0" Grid.Column="4"  Margin="5,0,0,0" Height="30" >
								<dxe:DateEdit.EditValue>
									<Binding Path="ToDate"  UpdateSourceTrigger="PropertyChanged" Mode="TwoWay"
			 ValidatesOnDataErrors="True">
										<!--<Binding.ValidationRules >
                                        <Validation:AddEditTaskValidation FieldName="DueDate" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" ></Validation:AddEditTaskValidation>
                                    </Binding.ValidationRules>-->
									</Binding>
								</dxe:DateEdit.EditValue>
							</dxe:DateEdit>

							<Button Content="{DynamicResource OtItemLoad}"  FontSize="16" Margin="10,0,0,0" Height="30"  Grid.Row="0" Grid.Column="5"
				 Style="{DynamicResource Button16Style}"
	IsEnabled="{Binding IsAddButtonEnabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
			   Command="{Binding OTsLoadCommand}" HorizontalAlignment="Right" />



						</Grid>

						<Grid Grid.Row="1" >
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="70"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>

							<Label Grid.Column="0" Content="{DynamicResource OtCode}"  VerticalAlignment="Center" Height="30" FontSize="16"  Margin="0,-20,0,0" ></Label>
							<dxe:ComboBoxEdit Grid.Column="1"  Height="30" VerticalAlignment="Center" HorizontalAlignment="Stretch" Margin="53,-20,0,0"
		IsTextEditable="False" AutoComplete="True"
				 ItemsSource="{Binding OTsList}"
   
	DisplayMember="Code" ShowError="False" ShowErrorToolTip="False"
  >
								<dxe:ComboBoxEdit.SelectedItem>
									<Binding Path="SelectedOTCode"
	Mode="TwoWay"
	UpdateSourceTrigger="PropertyChanged"
>
										<!--<Binding.ValidationRules>
                                        <Validation:AddEditTaskValidation FieldName="SelectedLocation" ValidationStep="UpdatedValue" ValidatesOnTargetUpdated="True" />
                                    </Binding.ValidationRules>-->
									</Binding>
								</dxe:ComboBoxEdit.SelectedItem>
								<dxmvvm:Interaction.Triggers>
									<dxmvvm:EventToCommand EventName="EditValueChanged"
								Command="{Binding OTCodeListClosedCommand}"
								PassEventArgsToCommand="True"/>
								</dxmvvm:Interaction.Triggers>
							</dxe:ComboBoxEdit>

						</Grid>
						
						<dxlc:LayoutGroup Header="{DynamicResource OtItems}" Grid.Row="2"
				  Name="lgPartnumber"
				  View="GroupBox"
                
				  dxlc:LayoutControl.AllowHorizontalSizing="True"
                                      
             >
							<dxg:GridControl x:Name="OtItemGrid" Margin="-10"
                  
										   ItemsSource="{Binding DataContext.SelectedOTCode.OtItemsList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,RelativeSource={RelativeSource AncestorType={x:Type dxwui:WinUIDialogWindow}}}"
										   SelectedItem="{Binding SelectedOTItem,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
					   Width="Auto"
					  MinWidth="130" MaxHeight="1000"
					  ImplyNullLikeEmptyStringWhenFiltering="True">
								<dxg:GridControl.Columns>
									<dxg:GridColumn  FieldName="NumItem"  Header="{DynamicResource OtItemNumber}" ReadOnly="True" FilterPopupMode="CheckedList" Width="10*"/>
									<dxg:GridColumn FieldName="Reference" Header="{DynamicResource OtReference}" ReadOnly="True" FilterPopupMode="CheckedList" Width="15*"/>
									<dxg:GridColumn FieldName="Description" Header="{DynamicResource OtDescription}" ReadOnly="True" FilterPopupMode="CheckedList" Width="15*"/>
									<dxg:GridColumn FieldName="StatusName" Header="{DynamicResource OtStatus}" ReadOnly="True" FilterPopupMode="CheckedList" Width="15*"/>
								</dxg:GridControl.Columns>

								<dxg:GridControl.View>
									<dxg:TableView Name="OtItemGridView"  NavigationStyle="Row"
							 VerticalScrollbarVisibility="Auto"
							 HorizontalScrollbarVisibility="Auto"
							 AutoWidth="False"
							 ShowGroupPanel="False"
							 ShowIndicator="False"
							 AllowEditing="True" AllowLeaveInvalidEditor="True"
                         
							 ColumnChooserColumnDisplayMode="ShowHiddenColumnsOnly" EnableImmediatePosting="True"
							 ItemsSourceErrorInfoShowMode="RowAndCell">

									</dxg:TableView>
								</dxg:GridControl.View>
							</dxg:GridControl>

						</dxlc:LayoutGroup>

						<Button Content="{DynamicResource AddActionPlanSelect}"  FontSize="16" Height="30" Grid.Row="3" VerticalAlignment="Bottom"
				Width="100"  Style="{DynamicResource Button16Style}" Margin="80,0,0,0" IsEnabled="{Binding IsSelectButtonEnabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
 
				Command="{Binding SelectButtonCommand}" HorizontalAlignment="Left" />

						<Button Content="{DynamicResource AddActionPlanCancel}"  Grid.Row="3" VerticalAlignment="Bottom"
	Command="{Binding OtItemCancelButtonCommand}"  HorizontalAlignment="Right" Margin="0,0,80,0"
	FontSize="16"  Height="30" Width="100" Style="{DynamicResource Button16Style}"/>
					
					</Grid>
				</dxlc:LayoutGroup>

				
				
				
				
				
				
                <Button Content="{DynamicResource AddActionPlanAccept}"  FontSize="16" Height="30" Grid.Column="0" Grid.Row="17"
                         Width="100"  Style="{DynamicResource Button16Style}" Margin="5"
              IsEnabled="{Binding IsAddButtonEnabled,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                         Command="{Binding AcceptButtonCommand}" />
                
                <Button Content="{DynamicResource AddActionPlanCancel}" Grid.Column="1" Grid.Row="17"
             Command="{Binding CancelButtonCommand}"  
             FontSize="16" Margin="5" Height="30" Width="100" Style="{DynamicResource Button16Style}"/>


            </Grid>

         

        </Grid>
        </ScrollViewer>

    </Grid>
</dxwui:WinUIDialogWindow>
