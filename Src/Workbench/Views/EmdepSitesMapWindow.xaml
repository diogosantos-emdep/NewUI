<dxwui:WinUIDialogWindow  x:Class="Workbench.Views.EmdepSitesMapWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
       xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
       xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
       xmlns:dxm="http://schemas.devexpress.com/winfx/2008/xaml/map"
       WindowStartupLocation="CenterScreen"  ShowIcon="False" TitleStyle="{x:Null}"
       xmlns:ViewModels="clr-namespace:Workbench.ViewModels"
       Height="500" Width="700">
    
    <!--<dxwui:WinUIDialogWindow.DataContext>
        <ViewModels:EmdepSitesWiseMapWindowViewModel/>
    </dxwui:WinUIDialogWindow.DataContext>-->
    <Window.Background>
        <SolidColorBrush Color="#FF494848" Opacity="0"/>
        <!--<SolidColorBrush Color="#4d4d4d " Opacity="0.95"/>-->
    </Window.Background>
    <Window.Resources>
        <DataTemplate x:Key="PushPin">
            <StackPanel ToolTipService.ToolTip="{Binding Path=MapItem.Information}" Margin="-30 -60" >
                <Image  Source="/GeosWorkbench;component/Assets/Images/Icon.ico"  />
                <TextBlock 
                    Margin="6"
                    Foreground="Blue"
                    Text="{Binding Path=MapItem.Text}" Style="{DynamicResource TextBlockStyle}"/>
            </StackPanel>
        </DataTemplate>

        <Style TargetType="dxm:MapControl">
            <Setter Property="ToolTipTemplate">
                <Setter.Value>
                    <DataTemplate x:Name="ToolTipTemplate">
                        <Grid x:Name="Tooltip" HorizontalAlignment="Center" VerticalAlignment="Center" UseLayoutRounding="True">
                            <Grid x:Name="Shadow" Margin="0,4,0,-4" Opacity="0.1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="12"/>
                                </Grid.RowDefinitions>
                                <Path x:Name="Arrow" Stretch="Fill" Fill="Black" Data="F1 M 461,303L 474,316L 487,303L 461,303 Z " HorizontalAlignment="Center" Height="13" Grid.Row="1" Width="26" Margin="0,-1,0,0"/>
                                <Border x:Name="ContentBack" Background="Black"/>
                            </Grid>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="12"/>
                                </Grid.RowDefinitions>
                                <Path x:Name="Arrow1" Stretch="Fill" Fill="#FF303030" Data="F1 M 461,303L 474,316L 487,303L 461,303 Z " HorizontalAlignment="Center" Height="13" Grid.Row="1" Width="26" Margin="0,-1,0,0"/>
                                <Border x:Name="ContentBack1" Background="#FF303030"/>
                                <ContentPresenter Content="{Binding}" ContentTemplate="{Binding ContentTemplate}"/>
                            </Grid>
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ZoomRegionTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Border x:Name="zoomRegionBorder"
                        BorderThickness="2"
                        Background="#204ACBFC"
                        BorderBrush="#FF4ACBFC" />
                    </DataTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ShowSearchPanel"  Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="dxm:MapControl">
                        <Grid FlowDirection="LeftToRight" >
                            <Rectangle x:Name="PART_DraggingElement" Fill="Transparent" Stretch="Fill" />
                            <Border Background="{TemplateBinding Background}" >
                                <ItemsControl x:Name="PART_LayersContainer">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <Grid/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                </ItemsControl>
                            </Border>
                            <Canvas x:Name="PART_ContainerOfRectangleToZoomIn">
                                <ContentPresenter
                                x:Name="PART_RectangleToZoomIn"
                                Visibility="Collapsed"
                                ContentTemplate="{Binding Path=ZoomRegionTemplate, RelativeSource={RelativeSource TemplatedParent}}" />
                            </Canvas>
                            <dxm:OverlayItemsControl x:Name="PART_OverlaysContainer">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <dxm:MapOverlaysPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </dxm:OverlayItemsControl>
                            <dxm:ToolTipPanel x:Name="PART_ToolTipPanel"
                            Visibility="{Binding Path=ToolTipInfo.Visibility, RelativeSource={RelativeSource TemplatedParent}}"
                            Position="{Binding Path=ToolTipInfo.ToolTipPosition, RelativeSource={RelativeSource TemplatedParent}}">
                                <ContentPresenter
                                Content="{Binding Path=ToolTipInfo, RelativeSource={RelativeSource TemplatedParent}}"
                                ContentTemplate="{Binding Path=ToolTipTemplate, RelativeSource={RelativeSource TemplatedParent}}">
                                </ContentPresenter>
                            </dxm:ToolTipPanel>
                            <Grid x:Name="PART_InvalidKeyPanel" Visibility="Collapsed" Margin="2,2,0,0" MinHeight="0" HorizontalAlignment="Center" VerticalAlignment="Center" Width="0">
                                <Border Background="#FFDD0000" Opacity="0.75" CornerRadius="5" />
                                <TextBlock TextWrapping="Wrap" Text="CustomText" Foreground="White" FontSize="14.667" Margin="32" TextAlignment="Center"/>
                            </Grid>
                        </Grid>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Background" Value="#FFC9E9F4"/>
            <Setter  Property="dxm:MapControl.ZoomLevel" Value="3"/>
        
        </Style>

    </Window.Resources>
    <Grid >
        <Grid.RowDefinitions>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Image   Source="/GeosWorkbench;component/Assets/Images/Close.png" 
                 Name="imageclose"   VerticalAlignment="Top" HorizontalAlignment="Right" Grid.Row="0"  >
            <dxmvvm:Interaction.Triggers>
                <dxmvvm:EventToCommand EventName="MouseLeftButtonDown"
                                       PassEventArgsToCommand="True"
                                       Command="{Binding EmdepSitesMapClose,Mode=TwoWay}" >
                </dxmvvm:EventToCommand>
            </dxmvvm:Interaction.Triggers>
        </Image>
        <Border Grid.Row="0">
            <Border.Style>
                <Style TargetType="{x:Type Border}" >
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="BorderBrush" Value="Transparent"></Setter>
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="BorderThickness" Value="1" />
                            <Setter Property="BorderBrush" Value="#515151"></Setter>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
        </Border>

        <dxm:MapControl ZoomLevel="12"
                        BorderBrush="Black"
                        CenterPoint="{Binding MapLatitudeAndLongitude}" 
                        Grid.Row="1" x:Name="mapconrol1" Height="500" Width="700">
            <dxm:ImageTilesLayer>
                <dxm:ImageTilesLayer.DataProvider>
                    <dxm:BingMapDataProvider Kind="Road" BingKey="s2gyr2NLYqXFe3lNMXLY~5tf9Ztp4qv52kNeVXarbwQ~ArREQRhM-E2eTViuLV2QdA_sdv_K--IlaZ_o-hXzdWemNOKlnPOiuEVQaCA0FDaV"></dxm:BingMapDataProvider>
                </dxm:ImageTilesLayer.DataProvider>
            </dxm:ImageTilesLayer>
            <!--Data="{Binding MapCustomElementList}"-->
            <dxm:VectorLayer  >
                <dxm:MapItemStorage>
                    <dxm:MapPushpin  Location="{Binding MapLatitudeAndLongitude}" 
                                     Text="{Binding MapPushPin}"                                    
                                     MarkerTemplate="{StaticResource PushPin}" />
                </dxm:MapItemStorage>
            </dxm:VectorLayer>
            
            
            <dxm:MapControl.ScalePanelOptions>
                <dxm:ScalePanelOptions HorizontalAlignment="Right" VerticalAlignment="Bottom" Visible="False" />
            </dxm:MapControl.ScalePanelOptions>
            <dxm:MapControl.CoordinatesPanelOptions>
                <dxm:CoordinatesPanelOptions VerticalAlignment="Top" HorizontalAlignment="Right" Visible="False" />
            </dxm:MapControl.CoordinatesPanelOptions>
        </dxm:MapControl>
    </Grid>
</dxwui:WinUIDialogWindow>