<dx:DXWindow
    xmlns:Views="clr-namespace:Workbench.Views"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
	xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
	xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"
	xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
     xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
    xmlns:Helpers="clr-namespace:Emdep.Geos.UI.Validations;assembly=Emdep.Geos.UI.Validations"
    xmlns:Converter="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
	xmlns:local="clr-namespace:Workbench.ViewModels"
    xmlns:local1="clr-namespace:Workbench.Views"
	x:Class="Workbench.Views.LoginViews"
	WindowStartupLocation="CenterScreen"
    MinWidth="1024" MinHeight="768"
    ResizeMode="CanResize" ShowIcon="False"
	Margin="0" BorderThickness="0"
    Title="{Binding VersionTitle}"
	Style="{DynamicResource DesktopSetting}" Unloaded="DXWindow_Unloaded">

    <dx:DXWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding LoginCloseButtonCommand, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
    </dx:DXWindow.InputBindings>

    <dx:DXWindow.Resources>
        <Style TargetType="Hyperlink">
            <Setter Property="Foreground" Value="#939393"/>
            <Setter Property="TextDecorations" Value="{x:Null}"/>
            <!-- optional: remove underline -->
        </Style>
        <Converter:InverseBooleanToVisibilityConverter x:Key="InverseBoolToVisibility"/>
        <Converter:EyeIconConverter x:Key="EyeIconConverter"/>
        <Converter:StringNullOrEmptyToVisibilityConverter x:Key="StringNullOrEmptyToVisibilityConverter"/>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
		<!--[nsatpute][01.09.2025][GEOS2-9342]-->
        <Style x:Key="LoginTextBlockStyle" TargetType="TextBlock">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=(dx:ThemeManager.TreeWalker).ThemeName, RelativeSource={RelativeSource Self}}" Value="BlackAndBlue">
                    <Setter Property="Background" Value="#333333" />
                    <Setter Property="Foreground" Value="#2EADED" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=(dx:ThemeManager.TreeWalker).ThemeName, RelativeSource={RelativeSource Self}}" Value="WhiteAndBlue">
                    <Setter Property="Background" Value="White" />
                    <Setter Property="Foreground" Value="#686868" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </dx:DXWindow.Resources>

    <Grid>
        <Grid.Background>
            <ImageBrush ImageSource="/GeosWorkbench;component/Assets/Images/background.png" RenderOptions.BitmapScalingMode="HighQuality" Stretch="UniformToFill"/>
        </Grid.Background>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="809*"/>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="809*"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="300*"/>
            <RowDefinition Height="85"/>
            <RowDefinition Height="0"/>
            <RowDefinition Height="510"/>
            <RowDefinition Height="300*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>


        <Grid Grid.Row="2" Grid.Column="1">

            <Grid.Background>
                <ImageBrush ImageSource="/GeosWorkbench;component/Assets/Images/EMDEP Logo.png" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" />
            </Grid.Background>

        </Grid>

        <!-- Forget Password -->
        <!--
        <Grid Grid.Row="5" Grid.Column="1">
            <TextBlock Text="Copyright 2003-2024 EMDEP Engineering." Foreground="Gray" FontSize="12" HorizontalAlignment="Center" Grid.Row="10" Grid.Column="2" Padding="10" FontFamily="Inter"/>
        </Grid>-->



        <TabControl Grid.Row="4" Grid.Column="1" BorderThickness="0" Visibility="{Binding IsLoginViewVisible}">

            <TabControl.Resources>
                <Style TargetType="TabControl">
                    <Style.Triggers>

                        <DataTrigger Binding="{Binding IsImpersonateViewVisible, Mode=TwoWay}" Value="Visible">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>

                    </Style.Triggers>
                </Style>
                <Style TargetType="TabItem">
                    <Setter Property="Background" Value="White"/>
                    <Setter Property="Foreground" Value="#424242"/>
                    <!-- Dark Gray -->
                    <Setter Property="FontFamily" Value="Inter"/>
                    <Setter Property="FontSize" Value="12"/>
                    <Setter Property="Padding" Value="10,5"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="TabItem">
                                <Border Name="Border" BorderThickness="0" Padding="10,5">
                                    <ContentPresenter x:Name="ContentSite"
                                      VerticalAlignment="Center"
                                      HorizontalAlignment="Center"
                                      ContentSource="Header"
                                      RecognizesAccessKey="True"/>
                                </Border>

                                <ControlTemplate.Triggers>
                                    <!-- Selected Tab -->
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="Border" Property="Background" Value="#074792"/>
                                        <Setter Property="Foreground" Value="White"/>
                                    </Trigger>
                                    <!-- Unselected Tab -->
                                    <Trigger Property="IsSelected" Value="False">
                                        <Setter TargetName="Border" Property="Background" Value="#E4E4E4"/>
                                        <Setter Property="Foreground" Value="#000000"/>
                                        <!-- Dark Gray -->
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.Resources>

            <!-- Tabs -->
            <TabItem Header="{StaticResource LoginOfficeTabHeader}" Width="152" Height="50">

                <StackPanel>

                    <Grid>
                        <Grid.RowDefinitions >
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="0"/>
                            <RowDefinition Height="56"/>
                            <RowDefinition Height="15"/>
                            <RowDefinition Height="70"/>
                            <RowDefinition Height="25"/>
                            <RowDefinition Height="40"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="40"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="15"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="32"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="32"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="256"/>
                            <ColumnDefinition Width="*"/>


                        </Grid.ColumnDefinitions>

                        <!--Errors-->
                        <TextBlock Grid.Row="7" Grid.Column="2" Grid.RowSpan="2" Margin="5,2,0,0" FontFamily="Intern" FontSize="12" Foreground="{Binding LoginNameErrorColor}" Text="{DynamicResource Loginview_Theusernamefieldismandator}" ></TextBlock>
                        <TextBlock Grid.Row="10" Grid.Column="2" Grid.RowSpan="2" Margin="5,2,0,0" FontFamily="Intern" FontSize="12" Foreground="{Binding LoginPasswordErrorColor}" Text="{DynamicResource Loginview_Thepasswordfieldismandator}"></TextBlock>
                        <!-- App Logo -->
                        <Image Source="/GeosWorkbench;component/Assets/Images/geos_logo.png"  HorizontalAlignment="Center" Grid.Row="2" Grid.Column="2" RenderOptions.BitmapScalingMode="HighQuality"    />

                        <!-- Office do u need help -->
                        <TextBlock VerticalAlignment="Center"
           HorizontalAlignment="Center"
           Grid.Row="19" Grid.Column="2"
           Foreground="#939393">
    <Hyperlink Command="{Binding NeedHelpCommand}">
        <Run Text="{DynamicResource OfficeUserLoginViewHelp}" />
    </Hyperlink>
                        </TextBlock>

                        <!-- Profile Icon -->
						<!--[nsatpute][01.09.2025][GEOS2-9342]-->
                        <Image Source="/GeosWorkbench;component/Assets/Images/profile.png" HorizontalAlignment="Center" Grid.Row="4" Grid.Column="2"  RenderOptions.BitmapScalingMode="HighQuality"  />
                        <StackPanel Orientation="Horizontal" Grid.Row="6" Grid.Column="2" >
                            <!-- Username -->
                            <dxe:ComboBoxEdit Name="Cmblogin" Padding="5" FontSize="15" Width="255" Margin="0,0,-250,0" GotFocus="Cmblogin_GotFocus" LostFocus="Cmblogin_LostFocus"  
          BorderBrush="#E6E6E6" FontFamily="Inter" ShowErrorToolTip="False" Validation.ErrorTemplate="{x:Null}"
          AllowDefaultButton="False"
          ItemsSource="{Binding LoginUserList, UpdateSourceTrigger=PropertyChanged}"
          NullText="{DynamicResource OfficeUserLoginDefaultLoginNameMessage}"
          AutoComplete="True" IsTextEditable="True" ImmediatePopup="True"
          IncrementalFiltering="True"  TabIndex="0"
          Style="{DynamicResource ComboBoxEditStyle}">
 
                                <dxe:ComboBoxEdit.EditValue>
                                    <Binding Path="LoginName" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay"
         ValidatesOnDataErrors="True"> 
                                        <Binding.ValidationRules>
                                            <Helpers:CustomRequiredFieldValidation            
            ValidationStep="UpdatedValue" />
                                        </Binding.ValidationRules>
                                    </Binding>
                                </dxe:ComboBoxEdit.EditValue>

                                <dxe:ComboBoxEdit.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}" FontSize="16" FontFamily="Inter"/>
                                    </DataTemplate>
                                </dxe:ComboBoxEdit.ItemTemplate>

                                <dxe:ComboBoxEdit.BorderTemplate>
                                    <ControlTemplate>
                                        <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" >
                                            <ContentPresenter Content="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" 
       ContentTemplate="{Binding ContentTemplate, RelativeSource={RelativeSource TemplatedParent}}" />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <DataTrigger Binding="{Binding Path=(Validation.HasError), ElementName=Cmblogin}" Value="True">
                                                <Setter TargetName="border" Property="BorderBrush" Value="#FF2626"/>
                                            </DataTrigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="BorderBrush" Value="#686868"/>
                                            </Trigger>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsKeyboardFocusWithin}" Value="True"/>
                                                    <Condition Binding="{Binding Path=(Validation.HasError), ElementName=Cmblogin}" Value="False"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter TargetName="border" Property="BorderBrush" Value="#083493"/>
                                            </MultiDataTrigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </dxe:ComboBoxEdit.BorderTemplate>
                            </dxe:ComboBoxEdit>
							<!--[nsatpute][01.09.2025][GEOS2-9342]-->
                            <TextBlock Text="{DynamicResource OfficeUserLoginDefaultLoginNameMessage}" 
                                   Visibility="{Binding ShowUserNameLabel}"
                                   Margin="0,-37,0,0"
                                   VerticalAlignment="Center" 
                                   Padding="5,0,5,0"
                                   FontSize="12"
                                   FontFamily="Inter">

                                <TextBlock.Style>
                                    <Style BasedOn="{StaticResource LoginTextBlockStyle}" TargetType="TextBlock">
                                        <Style.Triggers>

                                            <DataTrigger Binding="{Binding Path=(Validation.HasError), ElementName=Cmblogin}" Value="True">
                                                <Setter Property="Foreground"  Value="#FF2626"/>
                                            </DataTrigger>
                                            <!-- MouseOver trigger for when Cmblogin is hovered -->
                                            <DataTrigger Binding="{Binding IsMouseOver, ElementName=Cmblogin}" Value="True">
                                                <Setter Property="Foreground" Value="#686868"/>
                                            </DataTrigger>

                                            <!-- Keyboard focus within Cmblogin when no validation error -->
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding IsKeyboardFocusWithin, ElementName=Cmblogin}" Value="True"/>
                                                    <Condition Binding="{Binding Path=(Validation.HasError), ElementName=Cmblogin}" Value="False"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Foreground" Value="#083493"/>
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </StackPanel>
                        <Grid Grid.Row="9" Grid.Column="2">
                            <StackPanel Orientation="Horizontal">
                               
                            <!-- Hidden PasswordBoxEdit -->
                            <dxe:PasswordBoxEdit x:Name="passwordBox"  TabIndex="1"  Width="255" GotFocus="passwordBox_GotFocus" LostFocus="passwordBox_LostFocus"
                         NullText="{DynamicResource OfficeUserLoginDefaultPasswordMessage}"
                         Padding="5" FontSize="15" Margin="0,0,-250,0" ShowErrorToolTip="False" Validation.ErrorTemplate="{x:Null}"
                         BorderBrush="#E6E6E6" FontFamily="Inter"
                         Style="{DynamicResource PasswordBoxEditStyle}"
                         Visibility="{Binding ShowPassword, Converter={StaticResource InverseBoolToVisibility}}">
                                <dxe:PasswordBoxEdit.EditValue>
                                    <Binding Path="LoginPassword"
                     Mode="TwoWay"
                     UpdateSourceTrigger="PropertyChanged"
                     ValidatesOnDataErrors="True">
                                        <Binding.ValidationRules>
                                            <Helpers:CustomRequiredFieldValidation
                        ValidationMessage="{StaticResource OfficeUserLoginViewDefaultPasswordMessage}"
                        ValidationStep="UpdatedValue"/>
                                        </Binding.ValidationRules>
                                    </Binding>
                                </dxe:PasswordBoxEdit.EditValue>
                                    <dxe:PasswordBoxEdit.BorderTemplate>
                                        <ControlTemplate>
                                            <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" >
                                                <ContentPresenter Content="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" 
ContentTemplate="{Binding ContentTemplate, RelativeSource={RelativeSource TemplatedParent}}" />
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <DataTrigger Binding="{Binding Path=(Validation.HasError), ElementName=passwordBox}" Value="True">
                                                    <Setter TargetName="border" Property="BorderBrush" Value="#FF2626"/>
                                                </DataTrigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="BorderBrush" Value="#686868"/>
                                                </Trigger>
                                                <MultiDataTrigger>
                                                    <MultiDataTrigger.Conditions>
                                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsKeyboardFocusWithin}" Value="True"/>
                                                        <Condition Binding="{Binding Path=(Validation.HasError), ElementName=passwordBox}" Value="False"/>
                                                    </MultiDataTrigger.Conditions>
                                                    <Setter TargetName="border" Property="BorderBrush" Value="#083493"/>
                                                </MultiDataTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </dxe:PasswordBoxEdit.BorderTemplate>
                            </dxe:PasswordBoxEdit>
								<!--[nsatpute][01.09.2025][GEOS2-9342]-->
                                <Grid Visibility="{Binding ShowPassword, Converter={StaticResource InverseBoolToVisibility}}">
                                    <TextBlock Text="{DynamicResource OfficeUserLoginDefaultPasswordMessage}" 
                                            Visibility="{Binding ShowPasswordLabel}"
                                            Margin="0,-37,0,0"
                                            VerticalAlignment="Center" 
                                            Padding="5,0,5,0"
                                            FontSize="12"
                                            FontFamily="Inter">
                                        <TextBlock.Style>
                                            <Style BasedOn="{StaticResource LoginTextBlockStyle}" TargetType="TextBlock">
                                                <Style.Triggers>

                                                    <DataTrigger Binding="{Binding Path=(Validation.HasError), ElementName=passwordBox}" Value="True">
                                                        <Setter Property="Foreground"  Value="#FF2626"/>
                                                    </DataTrigger>
                                                    <!-- MouseOver trigger for when passwordBox is hovered -->
                                                    <DataTrigger Binding="{Binding IsMouseOver, ElementName=passwordBox}" Value="True">
                                                        <Setter Property="Foreground" Value="#686868"/>
                                                    </DataTrigger>

                                                    <!-- Keyboard focus within passwordBox when no validation error -->
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding IsKeyboardFocusWithin, ElementName=passwordBox}" Value="True"/>
                                                            <Condition Binding="{Binding Path=(Validation.HasError), ElementName=passwordBox}" Value="False"/>
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Foreground" Value="#083493"/>
                                                    </MultiDataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                            <!-- Visible Password TextBox -->
                            <Grid Visibility="{Binding ShowPassword, Converter={StaticResource BoolToVisibility}}" Width="255" Margin="0,0,-250,0">
                                <!-- Placeholder simulation -->
                                <!--<TextBlock Text="{DynamicResource OfficeUserLoginDefaultPasswordMessage}"
                   Foreground="Gray"
                   FontSize="15" FontFamily="Inter"
                   Margin="10,0,0,0"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Left"
                   IsHitTestVisible="False"
                   Visibility="{Binding LoginPassword, Converter={StaticResource StringNullOrEmptyToVisibilityConverter}}"/>-->

                                <dxe:TextEdit x:Name="visiblePasswordBox" Background="Transparent"  GotFocus="visiblePasswordBox_GotFocus" LostFocus="visiblePasswordBox_LostFocus"
                 Padding="5" FontSize="15" 
                 BorderBrush="#E6E6E6" FontFamily="Inter"
                 HorizontalContentAlignment="Left" ShowErrorToolTip="False"
                 VerticalContentAlignment="Center" NullText="Password" Validation.ErrorTemplate="{x:Null}"
                                         TabIndex="1">
                                        <dxe:TextEdit.Text>
                                            <Binding Path="LoginPassword"
                         Mode="TwoWay"
                         UpdateSourceTrigger="PropertyChanged"
                         ValidatesOnDataErrors="True">
                                            <Binding.ValidationRules>
                                                <Helpers:CustomRequiredFieldValidation
                            ValidationStep="UpdatedValue"/>
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </dxe:TextEdit.Text>

                                        <dxe:TextEdit.BorderTemplate>
                                            <ControlTemplate>
                                                <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" >
                                                    <ContentPresenter Content="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" 
ContentTemplate="{Binding ContentTemplate, RelativeSource={RelativeSource TemplatedParent}}" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding Path=(Validation.HasError), ElementName=visiblePasswordBox}" Value="True">
                                                        <Setter TargetName="border" Property="BorderBrush" Value="#FF2626"/>
                                                    </DataTrigger>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="BorderBrush" Value="#686868"/>
                                                    </Trigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsKeyboardFocusWithin}" Value="True"/>
                                                            <Condition Binding="{Binding Path=(Validation.HasError), ElementName=visiblePasswordBox}" Value="False"/>
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter TargetName="border" Property="BorderBrush" Value="#083493"/>
                                                    </MultiDataTrigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </dxe:TextEdit.BorderTemplate>
                                    </dxe:TextEdit>
                            </Grid>
								<!--[nsatpute][01.09.2025][GEOS2-9342]-->
                                <Grid Visibility="{Binding ShowPassword, Converter={StaticResource BoolToVisibility}}">
                                    <TextBlock Text="{DynamicResource OfficeUserLoginDefaultPasswordMessage}" 
                                    Visibility="{Binding ShowPasswordLabel}"
                                    Margin="0,-37,0,0"
                                    VerticalAlignment="Center" 
                                    Padding="5,0,5,0"
                                    FontSize="12"
                                    FontFamily="Inter">

                                        <TextBlock.Style>
                                            <Style BasedOn="{StaticResource LoginTextBlockStyle}" TargetType="TextBlock">
                                                <Style.Triggers>

                                                    <DataTrigger Binding="{Binding Path=(Validation.HasError), ElementName= visiblePasswordBox}" Value="True">
                                                        <Setter Property="Foreground"  Value="#FF2626"/>
                                                    </DataTrigger>
                                                    <!-- MouseOver trigger for when visiblePasswordBox is hovered -->
                                                    <DataTrigger Binding="{Binding IsMouseOver, ElementName=visiblePasswordBox}" Value="True">
                                                        <Setter Property="Foreground" Value="#686868"/>
                                                    </DataTrigger>

                                                    <!-- Keyboard focus within visiblePasswordBox when no validation error -->
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding IsKeyboardFocusWithin, ElementName=visiblePasswordBox}" Value="True"/>
                                                            <Condition Binding="{Binding Path=(Validation.HasError), ElementName=visiblePasswordBox}" Value="False"/>
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Foreground" Value="#083493"/>
                                                    </MultiDataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                </Grid>
                            </StackPanel>
                            <!-- Eye Toggle Icon -->
                            <Image Source="{Binding ShowPassword, Converter={StaticResource EyeIconConverter}}"
           Width="20" Height="20"
           HorizontalAlignment="Left" VerticalAlignment="Center"
           Margin="225,0,0,0"
           Cursor="Hand"
           MouseDown="ToggleEye_MouseDown"/>
                        </Grid>

                        <!-- Remember Me -->
                        <StackPanel Grid.Row="11" Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,5,0,0">

                            <!-- Toggle Switch -->
                            <ToggleButton  TabIndex="2"
                                IsChecked="{Binding IsRememberMe, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
          Width="40" Height="20"
          VerticalAlignment="Center">
                                <ToggleButton.Style>
                                    <Style TargetType="ToggleButton">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ToggleButton">
                                                    <Grid>
                                                        <Border x:Name="SwitchBorder"
                                Width="40" Height="20"
                                CornerRadius="10"
                                Background="#ccc"
                                BorderBrush="#ccc"
                                BorderThickness="1" />

                                                        <Ellipse x:Name="SwitchThumb"
                                 Width="16" Height="16"
                                 Fill="White"
                                 HorizontalAlignment="Left"
                                 Margin="2,2,0,2" />
                                                    </Grid>

                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsChecked" Value="True">
                                                            <Setter TargetName="SwitchBorder" Property="Background" Value="#074792"/>
                                                            <Setter TargetName="SwitchBorder" Property="BorderBrush" Value="#074792"/>
                                                            <Setter TargetName="SwitchThumb" Property="HorizontalAlignment" Value="Right"/>
                                                            <Setter TargetName="SwitchThumb" Property="Margin" Value="0,2,2,2"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ToggleButton.Style>
                            </ToggleButton>

                            <!-- Label to the right -->
                            <TextBlock Text="{DynamicResource OfficeUserLoginViewRememberMeInThisComputer}"
       FontSize="12"
       FontFamily="Inter"
       Foreground="Gray"
       VerticalAlignment="Center"
       Margin="10,0,0,0"/>
                        </StackPanel>


                        <!-- Forgot Password -->
                        <!--
                <Button Content="{DynamicResource OfficeUserLoginViewForgotYourPassword}"
Cursor="Hand"
Grid.Row="10" Grid.Column="2" HorizontalAlignment="Right"
Command="{Binding ForgotPasswordButtonCommand}" TabIndex="3"
FontSize="12" FontFamily="Inter" Foreground="Gray"
Background="Transparent" BorderThickness="0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <TextBlock TextDecorations="Underline">
        <ContentPresenter />
                            </TextBlock>
                        </ControlTemplate>
                    </Button.Template>
                </Button>-->

                        <!-- Login Button -->
                        <Button Content="{DynamicResource OfficeUserLoginViewAccept}"
Grid.Row="15" Grid.Column="2"
FontSize="14" FontFamily="Inter"  TabIndex="3"
Command="{Binding LoginAcceptButtonCommand}"
                                IsDefault="True">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#074792" />
                                    <Setter Property="Foreground" Value="White" />
                                    <Setter Property="BorderBrush" Value="#074792" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="0">
                                                    <!-- Removed curve -->
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#0B5BA5" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>


                        <!-- Cancel Button -->
                        <Button Content="{DynamicResource OfficeUserLoginViewClose}"
Grid.Row="17" Grid.Column="2"
FontSize="14" FontFamily="Inter" TabIndex="4"
Command="{Binding LoginCloseButtonCommand}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="White" />
                                    <Setter Property="Foreground" Value="#808080" />
                                    <Setter Property="BorderBrush" Value="#E1E1E1" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="0">
                                                    <!-- Removed curve -->
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#F0F0F0" />
                                                        <Setter Property="Foreground" Value="#444" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>


                    </Grid>
                </StackPanel>



            </TabItem>


            <!-- PRODUCTION -->
            <TabItem Header="{StaticResource ProductionTabHeader}" Width="148" Height="50">

                <StackPanel>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="0"/>
                            <RowDefinition Height="56"/>
                            <RowDefinition Height="15"/>
                            <RowDefinition Height="70"/>
                            <RowDefinition Height="25"/>
                            <RowDefinition Height="36"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="36"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="40"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="32"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="32"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="256
                                              "/>
                            <ColumnDefinition Width="*"/>


                        </Grid.ColumnDefinitions>


                        <!-- PRODUCTION App Logo -->
                        <Image Source="/Assets/Images/geos_logo.png"
                               HorizontalAlignment="Center"
                               Grid.Row="2" Grid.Column="2"
                               RenderOptions.BitmapScalingMode="HighQuality"/>


                        <!-- PRODUCTION do u need help -->
                        <TextBlock VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       Grid.Row="18" Grid.Column="2"
                                       Foreground="#939393">
                                        <Hyperlink Command="{Binding NeedHelpCommand}">
                                            <Run Text="{DynamicResource OfficeUserLoginViewHelp}" />
                                        </Hyperlink>
                        </TextBlock>

                        <!-- PRODUCTION Profile Icon -->
                        <Image Source="/Assets/Images/scanning machine .png" HorizontalAlignment="Center" Grid.Row="4" Grid.Column="2" RenderOptions.BitmapScalingMode="HighQuality"/>

                        <!-- PRODUCTION Operator ID -->
                        <!-- PRODUCTION Operator ID -->
                        <!--<dxe:ComboBoxEdit Grid.Row="6" Grid.Column="2" Padding="5" FontSize="12"
                  BorderBrush="#E6E6E6" FontFamily="Inter" Width="Auto"
                  AllowDefaultButton="False"
                  ItemsSource="{Binding LoginUserList, UpdateSourceTrigger=PropertyChanged}"
                  NullText="{DynamicResource ProductionUserLoginDefaultOperatorIdMessage}"
                  AutoComplete="True" IsTextEditable="True" ImmediatePopup="True"
                  IncrementalFiltering="True" TabIndex="0"
                  Style="{DynamicResource ComboBoxEditStyle}">
                            <dxe:ComboBoxEdit.EditValue>
                                <Binding Path="LoginName" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay"
                 ValidatesOnNotifyDataErrors="True">
                                    <Binding.ValidationRules>
                                        <Helpers:CustomRequiredFieldValidation
                    ValidationMessage="{StaticResource OfficeUserLoginViewDefaultLoginNameMessage}"
                    ValidationStep="UpdatedValue" />
                                    </Binding.ValidationRules>
                                </Binding>
                            </dxe:ComboBoxEdit.EditValue>
                        </dxe:ComboBoxEdit>-->

                        <!-- PRODUCTION Password Box -->
                        <dxe:PasswordBoxEdit Grid.Row="6" Grid.Column="2" Padding="5" FontSize="12"
                  BorderBrush="#E6E6E6" FontFamily="Inter" Width="256" HorizontalAlignment="Center"
                     AllowUpdateTwoWayBoundPropertiesOnSynchronization="False"
                     NullText="{DynamicResource ProductionUserLoginDefaultOperatorIdMessage}"
                     InvalidValueBehavior="AllowLeaveEditor"  TabIndex="0"
                     Style="{DynamicResource PasswordBoxEditProduction}"
                     HorizontalContentAlignment="Left"
                     MaxLength="14"
                     VerticalContentAlignment="Center"
                     AcceptsReturn="True"
                     FocusManager.FocusedElement="{Binding ElementName=PasswordBoxEdit}" 
                     x:Name="PasswordBoxEdit">
                            <!-- REMOVED KeyDown trigger to prevent ENTER from executing command -->
                            <!-- No EventToCommand here -->

                            <dxe:PasswordBoxEdit.EditValue>
                                <Binding Path="ProductionUserLoginCode" ValidatesOnDataErrors="True" 
                 UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                                    <Binding.ValidationRules>
                                        <Helpers:WorkbenchLoginValidation FieldName="ProductionUserLoginCode" />
                                    </Binding.ValidationRules>
                                </Binding>
                            </dxe:PasswordBoxEdit.EditValue>
                        </dxe:PasswordBoxEdit>

                        <!-- PRODUCTION Login Button -->
                        <Button Content="{DynamicResource OfficeUserLoginViewAccept}"
        Grid.Row="14" Grid.Column="2"
        FontSize="14" FontFamily="Inter" TabIndex="1"
        Command="{Binding ProductionUserLoginCodeCommand}"
                                IsDefault="True">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="#074792" />
                                    <Setter Property="Foreground" Value="White" />
                                    <Setter Property="BorderBrush" Value="#074792" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="0">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#0B5BA5" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>



                        <!-- PRODUCTION Cancel Button -->
                        <Button Content="{DynamicResource OfficeUserLoginViewClose}"
Grid.Row="16" Grid.Column="2"
FontSize="14" FontFamily="Inter" TabIndex="2"
Command="{Binding LoginCloseButtonCommand}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="White" />
                                    <Setter Property="Foreground" Value="#808080" />
                                    <Setter Property="BorderBrush" Value="#E1E1E1" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="0">
                                                    <!-- Removed curve -->
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#F0F0F0" />
                                                        <Setter Property="Foreground" Value="#444" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>


                    </Grid>
                </StackPanel>


            </TabItem>

        </TabControl>

        <Grid Grid.Row="4"  Grid.Column="1" Visibility="{Binding IsImpersonateViewVisible, Mode=TwoWay}">
            <Grid.RowDefinitions>
                <RowDefinition Height="0"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <dxwui:PageView AnimationType="SlideHorizontal" Grid.Row="1" Grid.RowSpan="1" 
		                    BorderThickness="0,0,0,0"	
                            Style="{DynamicResource PageViewLoginWindow}"  
                            Padding="0,0,0,0" 
                            Margin="0,0,0,0"  
                            ShowBackButton="True" 
                            SelectedIndex="{Binding SelectedViewIndex}" 
                            DataContext="{Binding}">

                <dxwui:PageViewItem 
                    VerticalAlignment="Stretch" 
                    HorizontalAlignment="Stretch" 
                    Padding="0,0,0,0" 
                    Margin="0,0,0,0" 
                    DataContext="{Binding}"
                    >
                    <Views:PersonatePageView 
                     
                        VerticalAlignment="Stretch" 
                        HorizontalAlignment="Stretch" 
                        DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" 
                        />
                </dxwui:PageViewItem>
            </dxwui:PageView>
        </Grid>

    </Grid>


</dx:DXWindow>
