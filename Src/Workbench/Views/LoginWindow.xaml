<dx:DXWindow 
    xmlns:Views="clr-namespace:Workbench.Views"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" 
	xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
	xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"
	xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui"	
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
     xmlns:UIHelper="clr-namespace:Emdep.Geos.UI.Helper;assembly=Emdep.Geos.UI.Helper"
	xmlns:local="clr-namespace:Workbench.ViewModels"
    xmlns:local1="clr-namespace:Workbench.Views"
	x:Class="Workbench.Views.LoginWindow"
	WindowStartupLocation="CenterScreen"  
    ResizeMode="CanResize" ShowIcon="False" 
	Margin="0" BorderThickness="0" 
    Title="{Binding VersionTitle}"
	Style="{DynamicResource DesktopSetting}" Unloaded="DXWindow_Unloaded">
    <!--<dxmvvm:Interaction.Triggers>
        <dxmvvm:EventToCommand EventName="Unloaded" PassEventArgsToCommand="True" Command="{Binding PageUnLoadedCommand, Mode=TwoWay}" />
    </dxmvvm:Interaction.Triggers>-->
    <dx:DXWindow.Resources>
        <DataTemplate x:Key="officeWhiteThemeTemplate">
            <Grid >
                <Image Source="/GeosWorkbench;component/Assets/Images/OfficeLogin.png" Name="ImageOffice"
					Stretch="None" Width="130" HorizontalAlignment="Left">
                </Image>
                <TextBlock Text="{DynamicResource LoginWindowOffice}" Name="TextOffice"
                    VerticalAlignment="Center" TextAlignment="Center"
                    Style="{DynamicResource LoginForegroundColor}"/>
            </Grid>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/OfficeLogin.png"  TargetName="ImageOffice" />
                    <Setter Property="Foreground" Value="White" TargetName="TextOffice" />
                </DataTrigger>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="False">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/OfficeLogin_Black.png" TargetName="ImageOffice" />
                    <Setter Property="Foreground" Value="Black" TargetName="TextOffice" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>

        <DataTemplate x:Key="officeBlackThemeTemplate">
            <Grid >
                <Image Source="/GeosWorkbench;component/Assets/Images/OfficeLogin.png" Name="ImageOffice"
					Stretch="None" Width="130" HorizontalAlignment="Left">
                </Image>
                <TextBlock Text="{DynamicResource LoginWindowOffice}" Name="TextOffice"
                    VerticalAlignment="Center" TextAlignment="Center"
                    Style="{DynamicResource LoginForegroundColor}"/>
            </Grid>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/OfficeLogin_Black.png"  TargetName="ImageOffice" />
                    <Setter Property="Foreground" Value="Black" TargetName="TextOffice" />
                </DataTrigger>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="False">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/OfficeLogin.png" TargetName="ImageOffice" />
                    <Setter Property="Foreground" Value="White" TargetName="TextOffice" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>

        <UIHelper:HeaderTemplateSelectorOffice x:Key="HeaderTemplateSelectorOffice"
                                   WhiteBlueTemplate="{StaticResource officeWhiteThemeTemplate}"
                                   BlackBlueTemplate="{StaticResource officeBlackThemeTemplate}"/>

        <DataTemplate x:Key="productionWhiteThemeTemplate">
            <Grid>
                <Image Source="/GeosWorkbench;component/Assets/Images/ProductionLogin.png" Name="ImageProduction"
     Stretch="None" Width="130" HorizontalAlignment="Left"
     RenderTransformOrigin="3,0"/>
                <TextBlock Text="{DynamicResource LoginWindowProduction}" Name="TextOffice"
     HorizontalAlignment="Right" 
     VerticalAlignment="Center"
     Style="{DynamicResource LoginForegroundColor}">
                </TextBlock>
            </Grid>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/ProductionLogin.png"  TargetName="ImageProduction" />
                    <Setter Property="Foreground" Value="White" TargetName="TextOffice" />
                </DataTrigger>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="False">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/ProductionLoginBlack.png" TargetName="ImageProduction" />
                    <Setter Property="Foreground" Value="Black" TargetName="TextOffice" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>

        <DataTemplate x:Key="productionBlackThemeTemplate">
            <Grid>
                <Image Source="/GeosWorkbench;component/Assets/Images/ProductionLogin.png" Name="ImageProduction"
     Stretch="None" Width="130" HorizontalAlignment="Left"
     RenderTransformOrigin="3,0"/>
                <TextBlock Text="{DynamicResource LoginWindowProduction}" Name="TextOffice"
     HorizontalAlignment="Right" 
     VerticalAlignment="Center"
     Style="{DynamicResource LoginForegroundColor}">
                </TextBlock>
            </Grid>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/ProductionLoginBlack.png"  TargetName="ImageProduction" />
                    <Setter Property="Foreground" Value="Black" TargetName="TextOffice" />
                </DataTrigger>
                <DataTrigger Binding="{Binding TemplatedParent.IsSelected, RelativeSource={RelativeSource TemplatedParent}}" Value="False">
                    <Setter Property="Source" Value="/GeosWorkbench;component/Assets/Images/ProductionLogin.png" TargetName="ImageProduction" />
                    <Setter Property="Foreground" Value="White" TargetName="TextOffice" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
        
        <UIHelper:HeaderTemplateSelectorProduction x:Key="HeaderTemplateSelectorProduction"
                                   WhiteBlueTemplate="{StaticResource productionWhiteThemeTemplate}"
                                   BlackBlueTemplate="{StaticResource productionBlackThemeTemplate}"/>

        <DataTemplate x:Key="ItemHeaderTemplatePageheader">
            <Grid>
                <Image Style="{DynamicResource EmdepLoginImageStyle}"  Height="50" />
            </Grid>
        </DataTemplate>
    </dx:DXWindow.Resources>

    <dx:DXWindow.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding LoginCloseButtonCommand, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
    </dx:DXWindow.InputBindings>
    <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  Style="{DynamicResource GridLogoImageStyle}">
        <Grid  VerticalAlignment="Top"  HorizontalAlignment="Center">
            <Grid.RowDefinitions>
                <RowDefinition Height="40*"/>
                <RowDefinition Height="200*"/>
                <RowDefinition Height="100"/>
            </Grid.RowDefinitions>
            <Canvas Grid.Row="2" VerticalAlignment="Top" HorizontalAlignment="Center"  >
                <Image Style="{DynamicResource ResourceKey=GeosLogoImageStyle}" x:Name="GeosLogo" Stretch="Uniform" 
                           HorizontalAlignment="Center" Margin="-150 -30 0 0" Height="290" Width="300" />
                <!--<Rectangle
					StrokeThickness="1"
					Height="290" Width="300" Canvas.Top="-40" Canvas.Left="-142">
                    <Rectangle.Fill>
                        <ImageBrush ImageSource="/GeosWorkbench;component/Assets/Images/Geos_logo_blue.png" Stretch="Uniform"   />
                    </Rectangle.Fill>
                </Rectangle>-->
            </Canvas>
        </Grid>

        <Grid Grid.Row="1"  Grid.Column="0"  >
            <Grid.RowDefinitions>
                <RowDefinition Height="0"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <dxwui:PageView AnimationType="SlideHorizontal" Grid.Row="1" Grid.RowSpan="1"   HeaderTemplate="{Binding Source={StaticResource ItemHeaderTemplatePageheader}}"  
				BorderThickness="0,0,0,0"	Style="{DynamicResource PageViewLoginWindow}"  Padding="0,0,0,0" Margin="0,0,0,0"  ShowBackButton="True" SelectedIndex="{Binding SelectedViewIndex}" DataContext="{Binding}">
                <dxwui:PageViewItem HeaderTemplateSelector="{StaticResource HeaderTemplateSelectorOffice}"  Padding="0,0,0,0" Margin="0,0,0,0" Height="{Binding PageViewItemHeight}"  DataContext="{Binding}">
                    <Views:OfficeUserLoginView  Height="350"  DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/>
                </dxwui:PageViewItem>
                <dxwui:PageViewItem HeaderTemplateSelector="{StaticResource HeaderTemplateSelectorProduction}" Margin="0,0,0,0" UseLayoutRounding="True"  Height="{Binding PageViewItemHeight}" >
                    <Views:ProductionUserLoginView Height="350"   />
                </dxwui:PageViewItem>
                <dxwui:PageViewItem   VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Padding="0,0,0,0" Margin="0,0,0,0" DataContext="{Binding}" >
                    <Views:ForgetPasswordView  Height="350" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/>
                </dxwui:PageViewItem>
                <dxwui:PageViewItem   VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Padding="0,0,0,0" Margin="0,0,0,0" DataContext="{Binding}">
                    <Views:NewPasswordView Height="350" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
                </dxwui:PageViewItem>
                <dxwui:PageViewItem VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Padding="0,0,0,0" Margin="0,0,0,0" DataContext="{Binding}">
                    <Views:AuthenticationView Height="350" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
                </dxwui:PageViewItem>
            </dxwui:PageView>
        </Grid>
        
        <Grid  VerticalAlignment="Bottom" HorizontalAlignment="Center" Grid.Row="1" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50*"/>
                <ColumnDefinition Width="100*"/>
                <ColumnDefinition Width="50*"/>
            </Grid.ColumnDefinitions>
            <Canvas Grid.Column="1" Background="Aqua" VerticalAlignment="Bottom" HorizontalAlignment="Center"   Visibility="{Binding ShutDownButtonVisible,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"      >
                <Image  Canvas.Top="-120">
                    <dxmvvm:Interaction.Triggers>
                        <dxmvvm:EventToCommand EventName="MouseLeftButtonDown" PassEventArgsToCommand="True" Command="{Binding LoginshutdownButtonCommand, Mode=TwoWay}" />
                    </dxmvvm:Interaction.Triggers>
                    <Image.Style>
                        <Style TargetType="{x:Type Image}">
                            <Setter Property="Source" Value="{DynamicResource ShutDownImage}" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Source" Value="{DynamicResource ShutDownImageMouseOver}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
            </Canvas>

        </Grid>
        <TextBlock  Text="{Binding MessageCopyright}" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 0 5" Style="{DynamicResource LoginForegroundColor}" />
    </Grid>
</dx:DXWindow>
