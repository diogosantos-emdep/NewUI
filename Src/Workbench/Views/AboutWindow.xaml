<dxwui:WinUIDialogWindow 
                        x:Class="Workbench.Views.AboutWindow"
                        xmlns:ViewModels="clr-namespace:Workbench.ViewModels"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                        xmlns:dxwui="http://schemas.devexpress.com/winfx/2008/xaml/windowsui" 
                        xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
                        xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                        xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid" 
                        xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                        xmlns:application="clr-namespace:Emdep.Geos.UI.Converters;assembly=Emdep.Geos.UI.Converters"
                        xmlns:glob="clr-namespace:System.Globalization;assembly=mscorlib"
                        xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
                        Title="{DynamicResource AboutTitle}"
                        TitleStyle="{DynamicResource WinUIDialogWindowTitleStyle}"
                        Style="{DynamicResource WinUIDialogWindowStyle}">


    <dxwui:WinUIDialogWindow.InputBindings>
        <KeyBinding Key="Escape"  Command="{Binding AboutWindowCancelButtonCommand}"/>
    </dxwui:WinUIDialogWindow.InputBindings>
    
    <dxwui:WinUIDialogWindow.Resources>
        <ControlTemplate x:Key="detailContainerTemplate" TargetType="{x:Type ContentControl}">
            <Border BorderThickness="0,1,0,0" BorderBrush="{TemplateBinding BorderBrush}" 
                    HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                    Padding="12,12,12,12" Background="{TemplateBinding Background}">
            </Border>
        </ControlTemplate>
        <DataTemplate x:Key="DetailCoreTemplate">
            <dx:MeasurePixelSnapper>
            </dx:MeasurePixelSnapper>
        </DataTemplate>
        <DataTemplate x:Key="expandableRowDetailTemplate">
            <StackPanel Orientation="Vertical">
                <dx:MeasurePixelSnapper>
                    <ContentPresenter x:Name="defaultRowPresenter" Content="{Binding}" ContentTemplate="{Binding View.DefaultDataRowTemplate}" />
                </dx:MeasurePixelSnapper>
                <dx:DXExpander IsExpanded="{Binding Path=IsSelected}" HorizontalExpand="None" VerticalExpand="FromTopToBottom">
                    <dxg:RowDetailContainerControl Template="{StaticResource detailContainerTemplate}" Content="{Binding}" ContentTemplate="{DynamicResource DetailCoreTemplate}" />
                </dx:DXExpander>
            </StackPanel>
        </DataTemplate>

    </dxwui:WinUIDialogWindow.Resources>

    <dxmvvm:Interaction.Behaviors>
        <dxmvvm:SaveFileDialogService Title="Save Excel Report"/>
    </dxmvvm:Interaction.Behaviors>

    <Grid Height="{Binding DialogHeight}" Width="{Binding DialogWidth}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="5"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Button Content=" " Height="40" Width="40" Grid.Row="0" HorizontalAlignment="Right" Margin="0,-80,20,0"
                    Command="{Binding ExportButtonCommand}" CommandParameter="{Binding ElementName=view}" >
            <Button.ToolTip>
                <TextBlock Text="{DynamicResource ButtonExportToExcel}"/>
            </Button.ToolTip>
            <Button.ContentTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Image Style="{ DynamicResource ExcelExportButtonImageStyle}" Grid.Column="0" Height="24" Width="24" Margin="-10"/>
                    </Grid>
                </DataTemplate>
            </Button.ContentTemplate>
        </Button>

        <dxg:GridControl  HorizontalAlignment="Stretch"   Width="auto"  Grid.Row="1" 
                          VerticalAlignment="Stretch" SnapsToDevicePixels="True"   
                          IsHitTestVisible="True" SelectionMode="None" BorderThickness="0" 
                          ShowBorder="False"   Background="Transparent"
                          ItemsSource="{Binding ReleaseNotesList}">
            <dxg:GridControl.Columns >
                <dxg:GridColumn  FieldName="VersionNumber" Width="Auto">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel  Orientation="Vertical" >
                                <DockPanel   >
                                    <TextBlock Text="{Binding RowData.Row.VersionNumber,StringFormat={}V {0}}" HorizontalAlignment="Center" Margin="5,0,0,0" Style="{DynamicResource TextBlock20Style}"/>
                                    <TextBlock Text="{Binding RowData.Row.ReleasedIn,ConverterCulture={x:Static glob:CultureInfo.CurrentUICulture}, StringFormat={}{0:dd MMM yyyy},Mode=OneWay }"  HorizontalAlignment="Right" Margin="0,0,5,0" Style="{DynamicResource TextBlock20Style}"/>
                                </DockPanel>

                                <dx:DXExpander HorizontalAlignment="Stretch" IsExpanded="{Binding Path=(dxg:DataViewBase.IsFocusedRow), RelativeSource={RelativeSource TemplatedParent}}" HorizontalExpand="None" VerticalExpand="FromTopToBottom">
                                    <dxg:GridControl  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="Auto" Width="Auto"
                                                     SnapsToDevicePixels="True"  MaxHeight="300"
                                                    IsHitTestVisible="True" SelectionMode="None" BorderThickness="0" 
                                                    ItemsSource="{Binding RowData.Row.GeosReleaseNotes}">
                                        <dxg:GridControl.Resources>
                                            <Image x:Key="newImprovment" Source="/GeosWorkbench;component/Assets/Images/Star.png"></Image>
                                            <Image x:Key="bugFix" Source="/GeosWorkbench;component/Assets/Images/Ok.png"></Image>
                                            <ControlTemplate x:Key="{dxgt:TableViewThemeKey IsThemeIndependent=true, ResourceKey=DataPresenterTemplate}" TargetType="{x:Type dxg:DataPresenter}">
                                                <Border >
                                                    <ContentPresenter  />
                                                </Border>
                                            </ControlTemplate>
                                        </dxg:GridControl.Resources>
                                        <dxg:GridControl.Columns >
                                            <dxg:GridColumn ReadOnly="True"  FieldName="IdType" Width="20">
                                                <dxg:GridColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Border x:Name="brdTypeColumn"  BorderThickness="0,0,2,0" Margin="0,5,12,5" >
                                                            <StackPanel Name="stkImage_Text" Orientation="Horizontal" Height="21" >
                                                                <dxe:ImageEdit Name="Img_Editor" Height="16" Width="16" ShowBorder="False" EditMode="InplaceInactive" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" />
                                                                <TextBlock x:Name="PART_Editor" Height="16" Margin="2,0,0,0" Style="{DynamicResource TextBlockStyle}"/>
                                                            </StackPanel>
                                                        </Border>
                                                        <DataTemplate.Triggers>
                                                            <DataTrigger Binding="{Binding RowData.Row.IdType}" Value="0">
                                                                <Setter Property="Source" TargetName="Img_Editor" Value="{Binding Path=Source, Source={StaticResource newImprovment}}"></Setter>
                                                                <Setter Property="BorderBrush" TargetName="brdTypeColumn" Value="#ffa500"></Setter>
                                                                <Setter Property="Text" TargetName="PART_Editor" Value="New"></Setter>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding RowData.Row.IdType}" Value="1">
                                                                <Setter Property="Source" TargetName="Img_Editor" Value="{Binding Path=Source, Source={StaticResource bugFix}}"></Setter>
                                                                <Setter Property="BorderBrush" TargetName="brdTypeColumn" Value="#A2FF29"></Setter>
                                                                <Setter Property="Text" TargetName="PART_Editor" Value="Fixed"></Setter>
                                                            </DataTrigger>
                                                        </DataTemplate.Triggers>
                                                    </DataTemplate>
                                                </dxg:GridColumn.CellTemplate>
                                            </dxg:GridColumn>
                                            <dxg:GridColumn FieldName="Description" ReadOnly="True"/>
                                            <dxg:GridColumn ReadOnly="True" FixedWidth="True" Width="150">
                                                <dxg:GridColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Border x:Name="brdTypeColumn2" BorderThickness="2,0,0,0" Margin="0,5,12,5" >
                                                            <StackPanel Name="stkImage_Text2" Orientation="Horizontal" Height="21" HorizontalAlignment="Right" >
                                                                <TextBlock x:Name="PART_Editor" Height="16" Margin="2,0,0,0" Style="{DynamicResource TextBlockStyle}">
                                                                    <TextBlock.ToolTip>
                                                                        <TextBlock Text="{Binding RowData.Row.GeosModule.Name}" />
                                                                    </TextBlock.ToolTip>
                                                                </TextBlock>
                                                            </StackPanel>
                                                        </Border>
                                                        <DataTemplate.Triggers>
                                                            <DataTrigger Binding="{Binding RowData.Row.IdType}" Value="0">
                                                                <Setter Property="BorderBrush" TargetName="brdTypeColumn2" Value="#ffa500"></Setter>
                                                                <Setter Property="Text" TargetName="PART_Editor" Value="{Binding  RowData.Row.GeosModule.Acronym}"></Setter>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding RowData.Row.IdType}" Value="1">
                                                                <Setter Property="BorderBrush" TargetName="brdTypeColumn2" Value="#A2FF29"></Setter>
                                                                <Setter Property="Text" TargetName="PART_Editor" Value="{Binding  RowData.Row.GeosModule.Acronym}"></Setter>
                                                            </DataTrigger>
                                                        </DataTemplate.Triggers>
                                                    </DataTemplate>
                                                </dxg:GridColumn.CellTemplate>
                                            </dxg:GridColumn>
                                        </dxg:GridControl.Columns>
                                        <dxg:GridControl.View>
                                            <dxg:TableView  NavigationStyle="None" ShowHorizontalLines="True" 
                                                            AllowPerPixelScrolling="False" AllowColumnFiltering="True" 
                                                            AllowGrouping="False" ShowGroupPanel="False"  
                                                            ShowColumnHeaders="False" ShowVerticalLines="False"
                                                            ShowIndicator="False" AutoWidth="True" BorderThickness="0" 
                                                            VerticalScrollbarVisibility="Hidden"  AllowBestFit="True" 
                                                            ShowSearchPanelMode="Never" 
                                                            SearchPanelHorizontalAlignment="Stretch">
                                            </dxg:TableView>
                                        </dxg:GridControl.View>
                                    </dxg:GridControl>
                                </dx:DXExpander>
                            </StackPanel>
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
            </dxg:GridControl.Columns>
           <dxg:GridControl.View>
                <dxg:TableView Name="view" AllowScrollAnimation="True" 
                               ShowColumnHeaders="False"
                               VerticalScrollbarVisibility="Visible"
                               AllowGrouping="False" ShowGroupPanel="False" ShowIndicator="False"
                               NavigationStyle="Row" DataRowTemplate="{DynamicResource expandableRowDetailTemplate}" AutoWidth="True"
                               ShowSearchPanelMode="Never" SearchPanelHorizontalAlignment="Stretch">
                    <dxg:TableView.UseLightweightTemplates>
                        <dxg:UseLightweightTemplates>None</dxg:UseLightweightTemplates>
                    </dxg:TableView.UseLightweightTemplates>
                </dxg:TableView>
            </dxg:GridControl.View>
        </dxg:GridControl>
    </Grid>
</dxwui:WinUIDialogWindow>
